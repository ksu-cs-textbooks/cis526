




	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Concurrency Challenges :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/03-asynchronous-js/03-concurrency-challenges/index.html" rel="canonical" type="text/html" title="Concurrency Challenges :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/03-asynchronous-js/03-concurrency-challenges/index.xml" rel="alternate" type="application/rss+xml" title="Concurrency Challenges :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/03-asynchronous-js/03-concurrency-challenges/index.print.html" rel="alternate" type="text/html" title="Concurrency Challenges :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/03-asynchronous-js/03-concurrency-challenges/tele.html" rel="alternate" type="text/html" title="Concurrency Challenges :: CIS 526 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1691704122" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1691704122" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1691704122" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1691704122" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1691704122" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1691704122" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1691704122" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1691704122" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1691704122" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-auto.css?1691704122" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1691704122" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1691704122" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1691704122" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/url.js?1691704122"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1691704122"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis526/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1691704122" rel="stylesheet">

  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/03-asynchronous-js/03-concurrency-challenges/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>Implementing concurrency in computing systems comes with some specific challenges.  Consider the multitasking approach where we have your text editor and your music player running at the same time.  As the text editor process yields to the music player, the data and program elements it had loaded up into working memory, needs to be cleared out and replaced with the music player&rsquo;s data and program.  However, the music player&rsquo;s data and program need to be retained <em>somewhere</em> so that they can be swapped back in when the music player yields.</p>
<p>Modern operating systems handle this challenge by dividing working memory amongst all programs running (which is why the more programs you run, the more RAM you consume).  Each running process is assigned a block of memory and <em>only</em> allowed to use that memory.  Moreover, data copied into the CPU (the L2 cache, L1 cache, and registers) may also be cached in memory for later restoration.  You&rsquo;ll learn more about the details of this process if you take an Operating Systems course.  But it is <em>very</em> important that each running program is <em>only</em> allowed to make changes in its own assigned memory space.  If it wasn&rsquo;t, it could overwrite the data of another task!</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>In fact, an OS allowing a running program to overwrite another program&rsquo;s assigned memory is a <em>security vulnerability</em>, as this can involve overwriting part of the other <em>program</em>, changing how it actually works!  Viruses, trojans, and worms are often written to exploit this kind of vulnerability.</p>
</div>
</div>
<p>While operating systems normally manage the challenges of concurrency between running programs, when the program <em>itself</em> is written to be concurrent, the program itself must be built to avoid accidentally overwriting its own memory in unexpected ways.  Consider a text editor - it might have its main thread handling user input, and a second thread handling spell checking.  Now the user has typed &ldquo;A quick brow&rdquo;, and the spell checker is finding that &ldquo;brow&rdquo; is misspelled.  It might try to underline the line in red, but in the intervening time, the user has deleted &ldquo;brow&rdquo;, so the underlining is no longer valid!</p>
<p>Or consider image data.  Applying a filter to an image is a computationally costly operation - typically requiring visiting each pixel in the image, and for some filters, visiting each pixel <em>around</em> each pixel as part of the transformation.  This would be a good use-case for multi-threading.  But now imagine <em>two</em> filters working in parallel.  One might be applying a blur, and the other a grayscale transformation.  If they were overwriting the old image data with their new filtered version, and were working at the same time, they might both start from the original pixels in the upper-right-hand corner.  The blur would take longer, as it needs to visit neighboring pixels.  So the grayscale filter writes out the first hundred pixels, and then the blur writes out its first hundred, over-writing the grayed pixels with blurred color pixels.  Eventually, the grayscale filter will get so far ahead of the blur filter that the blur filter will be reading in now-greyed out pixels, and blurring them.  The result could well be a mishmash of blurred color and gray-and-white splotches.</p>
<p>There are many different approaches that can be used to manage this challenge.  One is the use of locks - locking a section of memory so only one thread can access it while it makes changes.  In the filter example, the grayscale filter could lock the image data, forcing the blur filter to wait until it finishes.  Locks work well, but must be carefully designed to avoid race conditions - where two threads cannot move forward because the other thread has already locked a resource the blocked thread needs to finish its work.</p>
<p>Asynchronous programming is another potential solution, which we&rsquo;ll look at next.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1691704122" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1691704122" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1691704122" defer></script>
  </body>
</html>
