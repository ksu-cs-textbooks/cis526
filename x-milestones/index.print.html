<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Class Project Milestones!"><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Milestones :: CIS 526 Textbook"><meta name=twitter:description content="Class Project Milestones!"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-milestones/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Milestones :: CIS 526 Textbook"><meta property="og:description" content="Class Project Milestones!"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Milestones :: CIS 526 Textbook"><meta itemprop=description content="Class Project Milestones!"><meta itemprop=dateModified content="2025-03-03T12:52:30-06:00"><meta itemprop=wordCount content="3"><title>Milestones :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/x-milestones/ rel=canonical type=text/html title="Milestones :: CIS 526 Textbook"><link href=/cis526/x-milestones/index.xml rel=alternate type=application/rss+xml title="Milestones :: CIS 526 Textbook"><link href=/cis526/x-milestones/tele.html rel=alternate type=text/html title="Milestones :: CIS 526 Textbook"><link href=/cis526/x-milestones/embed.html rel=alternate type=text/html title="Milestones :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1744734277 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1744734277 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1744734277 rel=stylesheet><link href=/cis526/css/auto-complete.css?1744734277 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1744734277 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1744734277 rel=stylesheet><link href=/cis526/css/fonts.css?1744734277 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1744734277 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1744734277 rel=stylesheet><link href=/cis526/css/theme-auto.css?1744734277 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1744734277 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1744734277 rel=stylesheet><link href=/cis526/css/print.css?1744734277 rel=stylesheet media=print><link href=/cis526/css/format-print.css?1744734277 rel=stylesheet><script src=/cis526/js/variant.js?1744734277></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1744734277 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis526/x-milestones/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Milestones</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/08-deploy/ title="Deployment (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-milestones/01-starter/ title="Express Starter Project (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter X</div><h1 id=milestones>Milestones</h1><p>Class Project Milestones!</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Milestones</h1><article class=default><header class=headline></header><h1 id=express-starter-project>Express Starter Project</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-1---express-starter-project>Milestone 1 - Express Starter Project</h2><p>Follow the instructions in the <a href=/cis526/x-examples/01-express-starter/>Example Project</a> to build a project using Node.js and Express that includes the following features:</p><ol><li>A working GitHub Codespace containing Node.js</li><li>A bare-bones Express application</li><li>Update the Express application from CommonJS to ES Modules</li><li>Application logs with Winston and Morgan</li><li>Install other useful Express libraries like <code>compression</code> and <code>helmet</code></li><li>Install and configure Nodemon</li><li>Install and configure dotenvx</li><li>Create code documentation with JSDoc and OpenAPI comments</li><li>Enable linting and formatting with ESLint and Prettier</li></ol><p>Effectively, just follow along with the example project and submit the resulting repository. This will be the starting point for the rest of the milestones!</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=add-a-database>Add a Database</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-2---add-a-database>Milestone 2 - Add a Database</h2><p>Building from the <a href=/cis526/x-milestones/01-starter/>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Create an SQLite database</li><li>Install and configure the Sequelize ORM and the Umzug migration tool</li><li>Configure an automated process to migrate and seed the data on application startup</li><li>Create database migrations, seeds, and models matching the database diagram given below</li></ol><h3 id=database-diagram>Database Diagram</h3><p><a href=#R-image-a466cb4719ac85062b64437e6ff8b427 class=lightbox-link><img alt="Database Diagram" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a466cb4719ac85062b64437e6ff8b427><img alt="Database Diagram" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png></a></p><h3 id=seed-data>Seed Data</h3><p>Seed data is stored in CSV files that can be downloaded from Canvas. See <a href=/cis526/x-examples/02-database/07-another-table/#seed>Seeding from a CSV File</a> for an example of how to read data from a CSV file when seeding the database.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=restful-api>RESTful API</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-3---restful-api>Milestone 3 - RESTful API</h2><p>Building from the <a href=/cis526/x-milestones/02-database/>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Build a full RESTful API to manage the communities, counties, metadata, and documents. The RESTful API should faithfully implement the Open API specification given below.<ol><li>Notice that the <code>/api/v1/documents/{id}/upload</code> API path handles file uploads! We haven&rsquo;t covered that in these examples, but there are some prior examples in this class to build upon.</li><li>Pay special attention to the example inputs and outputs for each route. Your JSON should <strong>exactly</strong> match the structure of those examples. Note that some fields may be hidden in associated objects that are included.</li></ol></li><li>Each API endpoint should include full unit tests, with an explicit goal to test both successful and unsuccessful operations performed by that endpoint.</li><li>All functions, files, and exported objects should be documented using JSDoc and Open API following the examples given.</li></ol><h3 id=database-diagram>Database Diagram</h3><p><a href=#R-image-57dc63f6aa784774805e76b30fece21b class=lightbox-link><img alt="Database Diagram" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-57dc63f6aa784774805e76b30fece21b><img alt="Database Diagram" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png></a></p><h3 id=open-api-specification>Open API Specification</h3><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p>You can download this specification file by clicking the link below, and then edit the <code>servers</code> section to test it using your server. You can use the <a href=https://editor.swagger.io/ rel=external target=_blank>Open API Editor</a> to see a cleaner view of this JSON file.</p><p>The OpenAPI specification looks best using the light theme. You can adjust the textbook theme in the left sidebar at the bottom of the textbook page.</p></div></div><div class="sc-openapi-wrapper is-loading helper-loading-container"><div class=sc-openapi-container id=R-openapi-c6a8f44e17a3e8e49f256e1bf9e5f656 data-openapi-url=/cis526/milestones/03/openapi.json data-openapi-spec></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=authentication>Authentication</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-4---authentication>Milestone 4 - Authentication</h2><p>Building from the <a href=/cis526/x-milestones/03-rest-api/>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Implement Bypass authentication using the <a href=https://www.passportjs.org/packages/passport-unique-token/ rel=external target=_blank>Unique Token Strategy</a> in Passport.js as shown in the tutorial. When enabled via the <code>.env</code> file, it should allow authentication via the <code>/auth/bypass?token=&lt;username></code> route.</li><li>Allow the system to create new users if a user tries to authenticate with a username not currently in the database. That user should not be assigned any roles by default.</li><li>Implement <a href=https://github.com/alt-cs-lab/passport-cas rel=external target=_blank>CAS</a> authentication strategy in Passport.js as shown in the tutorial. Users should be able to authenticate via the <code>https://testcas.cs.ksu.edu</code> server. CAS settings should be controlled via the <code>.env</code> file.</li><li>Implement <a href=https://www.npmjs.com/package/jsonwebtoken rel=external target=_blank>JSON Web Tokens</a> via the <code>/auth/token</code> route as shown in the tutorial. The token should include the user&rsquo;s ID and a list of roles assigned to the user.</li><li>Require a valid JWT to access ALL routes under the <code>/api/v1</code> path.</li><li>Implement role-based authorization for ALL routes under the <code>/api/v1</code> path. See below for a matrix of roles and allowed actions.</li><li>Update unit tests for each route to use authentication and also to test role-based authorization as shown in the tutorial.</li><li>Update the appropriate routes for both Communities and Metadata so that the <code>owner_user_id</code> foreign key is automatically set to the currently authenticated user (it should no longer be provided as part of the POST request to create a new community or metadata, nor should it be editable via PUT request.)</li><li>Update the OpenAPI documentation and unit tests to match the change to Communities and Metadata above.</li></ol><h3 id=authorization-matrix>Authorization Matrix</h3><ul><li>Path: <code>/api/v1/users</code><ul><li>ALL ACTIONS: <code>manage_users</code></li></ul></li><li>Path: <code>/api/v1/roles</code><ul><li>GET: <code>manage_users</code></li></ul></li><li>Path: <code>/api/v1/communities</code><ul><li>GET: [<code>view_communities</code>, <code>manage_communities</code>, <code>add_communities</code>]</li><li>POST: [<code>manage_communities</code>, <code>add_communities</code>]</li><li>PUT: [<code>manage_communities</code>]</li><li>DELETE: [<code>manage_communities</code>]</li></ul></li><li>Path: <code>/api/v1/counties</code><ul><li>GET: [<code>view_communities</code>, <code>manage_communities</code>, <code>add_communities</code>]</li></ul></li><li>Path: <code>/api/v1/documents</code><ul><li>GET: [<code>view_documents</code>, <code>manage_documents</code>, <code>add_documents</code>]</li><li>POST: [<code>manage_documents</code>, <code>add_documents</code>] (including file uploads)</li><li>PUT: [<code>manage_documents</code>]</li><li>DELETE: [<code>manage_documents</code>]</li></ul></li><li>Path: <code>/api/v1/metadata</code><ul><li>GET: [<code>view_documents</code>, <code>manage_documents</code>, <code>add_documents</code>]</li><li>POST: [<code>manage_documents</code>, <code>add_documents</code>] (including adding and removing communities and documents to metadata)</li><li>PUT: [<code>manage_documents</code>]</li><li>DELETE: [<code>manage_documents</code>]</li></ul></li></ul><h3 id=database-diagram>Database Diagram</h3><p><a href=#R-image-42ce7ddce735b4d8d200d96906b3a21f class=lightbox-link><img alt="Database Diagram" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-42ce7ddce735b4d8d200d96906b3a21f><img alt="Database Diagram" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png></a></p><h3 id=open-api-specification>Open API Specification</h3><p><strong>UPDATED FOR MILESTONE 4</strong></p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Tip</div><div class=box-content><p>You can download this specification file by clicking the link below, and then edit the <code>servers</code> section to test it using your server. You can use the <a href=https://editor.swagger.io/ rel=external target=_blank>Open API Editor</a> to see a cleaner view of this JSON file.</p><p>The OpenAPI specification looks best using the light theme. You can adjust the textbook theme in the left sidebar at the bottom of the textbook page.</p></div></div><div class="sc-openapi-wrapper is-loading helper-loading-container"><div class=sc-openapi-container id=R-openapi-deb4b8bf923f122d314b6069f0c80652 data-openapi-url=/cis526/milestones/04/openapi.json data-openapi-spec></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=vuejs-starter-project>Vue.js Starter Project</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-5---vue-starter-project>Milestone 5 - Vue Starter Project</h2><p>Follow the instructions in the <a href=/cis526/x-examples/05-vue-starter/>Example Project</a> to build a project using Vue.js that includes the following features:</p><ol><li>A single page frontend application running in <a href=https://vuejs.org/ rel=external target=_blank>Vue 3</a>.</li><li>Built-in Vue features such as <a href=https://router.vuejs.org/ rel=external target=_blank>Vue Router</a> and <a href=https://pinia.vuejs.org/ rel=external target=_blank>Pinia</a>.</li><li>Access to components and icons from <a href=https://primevue.org/ rel=external target=_blank>PrimeVue</a>.</li><li>Access to <a href=https://tailwindcss.com/ rel=external target=_blank>Tailwind CSS</a> for additional CSS styling and features.</li><li>A working <a href=https://primevue.org/theming/styled/#darkmode rel=external target=_blank>Dark Mode Theme</a> completed with a selector that remembers our preference.</li><li>A working <a href=https://vite.dev/ rel=external target=_blank>Vite</a> server that will proxy requests to our backend RESTful API seamlessly.</li><li>An <a href=https://axios-http.com/ rel=external target=_blank>Axios</a> client that can access our RESTful API routes.</li><li>A seamless system for authentication and requesting a JWT to access protected API routes.</li><li>A demo of accessing the API on the <code>/profile</code> page listing all users and roles assigned to those users (this page should load correctly for the <code>admin</code> user)</li></ol><p>Effectively, just follow along with the example project and submit the resulting repository. This will be the starting point for the rest of the milestones!</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=vuejs-crud-app>Vue.js CRUD App</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-6---vuejs-crud-app>Milestone 6 - Vue.js CRUD App</h2><p>Building from the <a href=/cis526/x-milestones/05-vue-starter/>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Most menu items and routes are protected and only allow users with specific roles to view/access them</li><li>A page that lists all roles in the application for anyone with the <code>manage_users</code> role. Roles are not editable.</li><li>A page that lists all users in a data table for anyone with the <code>manage_users</code> role.<ol><li>Helpful columns on that page should be searchable and sortable, as well as the ability to filter by role.</li><li>A page to edit existing users, including updating their roles.</li><li>A page to create new users and assign new roles.</li><li>A method to delete existing users.</li></ol></li><li>A page that lists all counties in the application for anyone with the <code>view_communities</code>, <code>manage_communities</code> and <code>add_communities</code> roles. Counties are not editable.</li><li>A page that lists all communities in a data table for anyone with the <code>view_communities</code>, <code>manage_communities</code> and <code>add_communities</code> roles.<ol><li>Helpful columns on that page should be searchable and sortable.</li><li>A page to edit existing communities, including changing the county that they are in, for anyone with the <code>manage_communities</code> role.</li><li>A page to create new communities and associated with a county, for anyone with the <code>manage_communities</code> and <code>add_communities</code> roles.</li><li>A method to delete existing communities, for anyone with the <code>manage_communities</code> role.</li><li><strong>For this milestone, you may hard-code the frontend to have all new communities owned by user ID 1 <code>admin</code></strong></li></ol></li><li>A page that lists all documents in a data table for anyone with the <code>view_documents</code>, <code>manage_documents</code> and <code>add_documents</code> roles.<ol><li>Helpful columns on that page should be searchable and sortable. Document filenames should be clickable, and it should direct users to the appropriate file on the server (if such file exists; this should work for all uploaded files)</li><li>A page to edit existing documents, for anyone with the <code>manage_documents</code> role.</li><li>A page to create new documents, for anyone with the <code>manage_documents</code> and <code>add_documents</code> roles.</li><li>A method to delete existing documents, for anyone with the <code>manage_documents</code> role.</li><li>When creating or editing a document, users should also have the ability to upload a new file for that document.</li></ol></li></ol><p>We will <strong>NOT</strong> be handling the interface for metadata in this milestone. That will be the last milestone for this project.</p><h3 id=hints>Hints</h3><h4 id=clickable-filenames>Clickable Filenames</h4><p>To make filenames clickable, you&rsquo;ll need to add an additional proxy route to the <code>client/vite.config.js</code> to allow users to access the <code>uploads</code> folder (or wherever you are storing your uploaded files). You can continue to use the Express static file middleware to serve these files.</p><h4 id=file-uploads>File Uploads</h4><p>To simplify the file upload process, you may want to ensure that files are named with the appropriate file extensions to match their mimetypes on the server. Below is an example if you are using <a href=https://expressjs.com/en/resources/middleware/multer.html rel=external target=_blank>multer</a> to handle file uploads - it uses <a href=https://www.npmjs.com/package/nanoid rel=external target=_blank>nanoid</a> to generate random filenames and <a href=https://www.npmjs.com/package/mime-types rel=external target=_blank>mime-types</a> to get the correct file extension to match the mimetype of the file. You can then store the filename, size, and mimetype you get from multer in your endpoint for uploading files.</p><div class=tab-panel data-tab-group=60b20b3aebb618bb027be45afa80bc12><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=document-api-handler class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("60b20b3aebb618bb027be45afa80bc12","document-api-handler")'>
<span class=tab-nav-text>Document API Handler</span></button></div><div class=tab-content-container><div data-tab-item=document-api-handler class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// Initialize Multer
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>storage</span> <span class=o>=</span> <span class=nx>multer</span><span class=p>.</span><span class=nx>diskStorage</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>destination</span><span class=o>:</span> <span class=s2>&#34;public/uploads&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>filename</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>file</span><span class=p>,</span> <span class=nx>cb</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cb</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=nx>nanoid</span><span class=p>()</span> <span class=o>+</span> <span class=s2>&#34;.&#34;</span> <span class=o>+</span> <span class=nx>mime</span><span class=p>.</span><span class=nx>extension</span><span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nx>mimetype</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>upload</span> <span class=o>=</span> <span class=nx>multer</span><span class=p>({</span> <span class=nx>storage</span><span class=o>:</span> <span class=nx>storage</span> <span class=p>});</span></span></span></code></pre></div></div></div></div></div><p>On the frontend, you can use the <a href=https://primevue.org/fileupload/ rel=external target=_blank>PrimeVue FileUpload</a> component to select the file, but you should implement a <a href=https://primevue.org/fileupload/#custom-upload rel=external target=_blank>Custom Upload</a> handler.</p><p>A brief but incomplete example is given below:</p><div class=tab-panel data-tab-group=4b0960493d245891600084fe2effd66b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=file-upload-example class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("4b0960493d245891600084fe2effd66b","file-upload-example")'>
<span class=tab-nav-text>File Upload Example</span></button></div><div class=tab-content-container><div data-tab-item=file-upload-example class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// Import Libraries
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>api</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@/configs/api&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>FileUpload</span><span class=p>,</span> <span class=nx>Button</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;primevue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Declare State
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>file</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Upload function - could possibly call this after saving the document but before redirecting
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>upload</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>documentid</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// If the user has selected a file
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>hasFiles</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Fetch the file from the user&#39;s filesystem into the browser
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fetch</span><span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>files</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>objectURL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=c1>// convert the file to a blob
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=p>.</span><span class=nx>blob</span><span class=p>())</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>then</span><span class=p>((</span><span class=nx>blob</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Create a file from the blob and add it to a form data object
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>fileUpload</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>File</span><span class=p>([</span><span class=nx>blob</span><span class=p>],</span> <span class=nx>file</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>files</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>name</span><span class=p>,</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=nx>blob</span><span class=p>.</span><span class=nx>type</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>form</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>FormData</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nx>form</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;file&#39;</span><span class=p>,</span> <span class=nx>fileUpload</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Upload that form to the endpoint
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>api</span>
</span></span><span class=line><span class=cl>          <span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/api/v1/documents/&#39;</span> <span class=o>+</span> <span class=nx>documentid</span> <span class=o>+</span> <span class=s1>&#39;/upload&#39;</span><span class=p>,</span> <span class=nx>form</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;multipart/form-data&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>})</span>
</span></span><span class=line><span class=cl>          <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// handle success
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=p>})</span>
</span></span><span class=line><span class=cl>          <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// handle error uploading file
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// handle error reading file
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// No file was selected
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>FileUpload</span> <span class=na>ref</span><span class=o>=</span><span class=s>&#34;file&#34;</span> <span class=na>mode</span><span class=o>=</span><span class=s>&#34;basic&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;file&#34;</span> <span class=na>customUpload</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>Button</span> <span class=na>severity</span><span class=o>=</span><span class=s>&#34;success&#34;</span> <span class=nt>@click</span><span class=s>=&#34;upload(props.id)&#34;</span> <span class=na>label</span><span class=o>=</span><span class=s>&#34;Upload&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=vuejs-components>Vue.js Components</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-6---vuejs-crud-app>Milestone 6 - Vue.js CRUD App</h2><p>Building from the <a href=/cis526/x-milestones/06-vue-crud-app/>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li><p>Metadata view</p></li><li><p>Fix bugs</p></li></ol><ul><li>Files are not protected - write custom handler to only allow access to uploaded files if permission allows</li><li>Communities & Metadata overly secure - allow owner to edit communities and/or metadata even if not have role</li><li>Update endpoint for creating communities and metadata to assign owner automatically</li><li>Properly handle deleting uploaded files when document is deleted; also delete uploaded files when overwritten</li></ul><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis526/commit/eab4787eeb0b013f81af1812b804dc69fe85d9bd>Mar 3, 2025</a></p></div></div><script src=/cis526/js/clipboard.min.js?1744734277 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1744734277 defer></script><script src=/cis526/js/js-yaml.min.js?1744734277 defer></script><script>window.noZensmooth=!0</script><script src=/cis526/js/swagger-ui/swagger-ui-bundle.js?1744734277 defer></script><script src=/cis526/js/swagger-ui/swagger-ui-standalone-preset.js?1744734277 defer></script><script>window.themeUseOpenapi={css:"/js/swagger-ui/swagger-ui.css?1744734277",cssInProject:!0,assetsBuster:1744734277}</script><script src=/cis526/js/theme.js?1744734277 defer></script></body></html>