<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="Class Project Milestones!"><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Milestones :: CIS 526 Textbook"><meta name=twitter:description content="Class Project Milestones!"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-milestones/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Milestones :: CIS 526 Textbook"><meta property="og:description" content="Class Project Milestones!"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Milestones :: CIS 526 Textbook"><meta itemprop=description content="Class Project Milestones!"><meta itemprop=dateModified content="2025-03-03T12:52:30-06:00"><meta itemprop=wordCount content="3"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Milestones :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-milestones/index.html rel=canonical type=text/html title="Milestones :: CIS 526 Textbook"><link href=/cis526/x-milestones/index.xml rel=alternate type=application/rss+xml title="Milestones :: CIS 526 Textbook"><link href=/cis526/x-milestones/tele.html rel=alternate type=text/html title="Milestones :: CIS 526 Textbook"><link href=/cis526/x-milestones/embed.html rel=alternate type=text/html title="Milestones :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1769640562 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1769640562 defer></script><script src=/cis526/js/search-lunr.min.js?1769640562 defer></script><script src=/cis526/js/search.min.js?1769640562 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1769640562"</script><script src=/cis526/js/lunr/lunr.min.js?1769640562 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1769640562 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1769640562 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1769640562 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1769640562 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1769640562 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1769640562 rel=stylesheet><link href=/cis526/css/theme.min.css?1769640562 rel=stylesheet><link href=/cis526/css/format-print.min.css?1769640562 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-milestones/index.html",window.relearn.relBasePath="..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1769640562 rel=stylesheet></head><body class="mobile-support embed print" data-url=/cis526/x-milestones/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-milestones" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=milestones>Milestones</h1><p>Class Project Milestones!</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Milestones</h1><article class=default><header class=headline></header><h1 id=express-starter-project>Express Starter Project</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-1---express-starter-project>Milestone 1 - Express Starter Project</h2><p>Follow the instructions in the <a href=/cis526/x-examples/01-express-starter/index.html>Example Project</a> to build a project using Node.js and Express that includes the following features:</p><ol><li>A working GitHub Codespace containing Node.js</li><li>A bare-bones Express application</li><li>Update the Express application from CommonJS to ES Modules</li><li>Application logs with Winston and Morgan</li><li>Install other useful Express libraries like <code>compression</code> and <code>helmet</code></li><li>Install and configure Nodemon</li><li>Install and configure dotenvx</li><li>Create code documentation with JSDoc and OpenAPI comments</li><li>Enable linting and formatting with ESLint and Prettier</li></ol><p>Effectively, just follow along with the example project and submit the resulting repository. This will be the starting point for the rest of the milestones!</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=add-a-database>Add a Database</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-2---add-a-database>Milestone 2 - Add a Database</h2><p>Building from the <a href=/cis526/x-milestones/01-starter/index.html>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Create an SQLite database</li><li>Install and configure the Sequelize ORM and the Umzug migration tool</li><li>Configure an automated process to migrate and seed the data on application startup</li><li>Create database migrations, seeds, and models matching the database diagram given below</li></ol><h3 id=database-diagram>Database Diagram</h3><p><a href=#R-image-c75a2c66d264a7b8a3a3976df8c59036 class=lightbox-link><img alt="Database Diagram" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c75a2c66d264a7b8a3a3976df8c59036><img alt="Database Diagram" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png></a></p><h3 id=seed-data>Seed Data</h3><p>Seed data is stored in CSV files that can be downloaded from Canvas. See <a href=/cis526/x-examples/02-database/07-another-table/index.html#seed>Seeding from a CSV File</a> for an example of how to read data from a CSV file when seeding the database.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=restful-api>RESTful API</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-3---restful-api>Milestone 3 - RESTful API</h2><p>Building from the <a href=/cis526/x-milestones/02-database/index.html>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Build a full RESTful API to manage the communities, counties, metadata, and documents. The RESTful API should faithfully implement the Open API specification given below.<ol><li>Notice that the <code>/api/v1/documents/{id}/upload</code> API path handles file uploads! We haven&rsquo;t covered that in these examples, but there are some prior examples in this class to build upon.</li><li>Pay special attention to the example inputs and outputs for each route. Your JSON should <strong>exactly</strong> match the structure of those examples. Note that some fields may be hidden in associated objects that are included.</li></ol></li><li>Each API endpoint should include full unit tests, with an explicit goal to test both successful and unsuccessful operations performed by that endpoint.</li><li>All functions, files, and exported objects should be documented using JSDoc and Open API following the examples given.</li></ol><h3 id=database-diagram>Database Diagram</h3><p><a href=#R-image-8b6717541f3ca5b72659bc490c99f991 class=lightbox-link><img alt="Database Diagram" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8b6717541f3ca5b72659bc490c99f991><img alt="Database Diagram" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png></a></p><h3 id=open-api-specification>Open API Specification</h3><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can download this specification file by clicking the link below, and then edit the <code>servers</code> section to test it using your server. You can use the <a href=https://editor.swagger.io/ rel=external target=_blank>Open API Editor</a> to see a cleaner view of this JSON file.</p><p>The OpenAPI specification looks best using the light theme. You can adjust the textbook theme in the left sidebar at the bottom of the textbook page.</p></div></details><div class="sc-openapi-wrapper is-loading helper-loading-container"><div class=sc-openapi-container id=R-openapi-76e23dc9a6aa6978307abd0d3f808e52 data-openapi-url=/cis526/milestones/03/openapi.json data-openapi-spec></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=authentication>Authentication</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-4---authentication>Milestone 4 - Authentication</h2><p>Building from the <a href=/cis526/x-milestones/03-rest-api/index.html>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Implement Bypass authentication using the <a href=https://www.passportjs.org/packages/passport-unique-token/ rel=external target=_blank>Unique Token Strategy</a> in Passport.js as shown in the tutorial. When enabled via the <code>.env</code> file, it should allow authentication via the <code>/auth/bypass?token=&lt;username></code> route.</li><li>Allow the system to create new users if a user tries to authenticate with a username not currently in the database. That user should not be assigned any roles by default.</li><li>Implement <a href=https://github.com/alt-cs-lab/passport-cas rel=external target=_blank>CAS</a> authentication strategy in Passport.js as shown in the tutorial. Users should be able to authenticate via the <code>https://testcas.cs.ksu.edu</code> server. CAS settings should be controlled via the <code>.env</code> file.</li><li>Implement <a href=https://www.npmjs.com/package/jsonwebtoken rel=external target=_blank>JSON Web Tokens</a> via the <code>/auth/token</code> route as shown in the tutorial. The token should include the user&rsquo;s ID and a list of roles assigned to the user.</li><li>Require a valid JWT to access ALL routes under the <code>/api/v1</code> path.</li><li>Implement role-based authorization for ALL routes under the <code>/api/v1</code> path. See below for a matrix of roles and allowed actions.</li><li>Update unit tests for each route to use authentication and also to test role-based authorization as shown in the tutorial.</li><li>Update the appropriate routes for both Communities and Metadata so that the <code>owner_user_id</code> foreign key is automatically set to the currently authenticated user (it should no longer be provided as part of the POST request to create a new community or metadata, nor should it be editable via PUT request.)</li><li>Update the OpenAPI documentation and unit tests to match the change to Communities and Metadata above.</li></ol><h3 id=authorization-matrix>Authorization Matrix</h3><ul><li>Path: <code>/api/v1/users</code><ul><li>ALL ACTIONS: <code>manage_users</code></li></ul></li><li>Path: <code>/api/v1/roles</code><ul><li>GET: <code>manage_users</code></li></ul></li><li>Path: <code>/api/v1/communities</code><ul><li>GET: [<code>view_communities</code>, <code>manage_communities</code>, <code>add_communities</code>]</li><li>POST: [<code>manage_communities</code>, <code>add_communities</code>]</li><li>PUT: [<code>manage_communities</code>]</li><li>DELETE: [<code>manage_communities</code>]</li></ul></li><li>Path: <code>/api/v1/counties</code><ul><li>GET: [<code>view_communities</code>, <code>manage_communities</code>, <code>add_communities</code>]</li></ul></li><li>Path: <code>/api/v1/documents</code><ul><li>GET: [<code>view_documents</code>, <code>manage_documents</code>, <code>add_documents</code>]</li><li>POST: [<code>manage_documents</code>, <code>add_documents</code>] (including file uploads)</li><li>PUT: [<code>manage_documents</code>]</li><li>DELETE: [<code>manage_documents</code>]</li></ul></li><li>Path: <code>/api/v1/metadata</code><ul><li>GET: [<code>view_documents</code>, <code>manage_documents</code>, <code>add_documents</code>]</li><li>POST: [<code>manage_documents</code>, <code>add_documents</code>] (including adding and removing communities and documents to metadata)</li><li>PUT: [<code>manage_documents</code>]</li><li>DELETE: [<code>manage_documents</code>]</li></ul></li></ul><h3 id=database-diagram>Database Diagram</h3><p><a href=#R-image-f8c8fc6959062ab16b89ed57e87207de class=lightbox-link><img alt="Database Diagram" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f8c8fc6959062ab16b89ed57e87207de><img alt="Database Diagram" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/milestones/02/lost_communities.png></a></p><h3 id=open-api-specification>Open API Specification</h3><p><strong>UPDATED FOR MILESTONE 4</strong></p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Tip</summary><div class=box-content><p>You can download this specification file by clicking the link below, and then edit the <code>servers</code> section to test it using your server. You can use the <a href=https://editor.swagger.io/ rel=external target=_blank>Open API Editor</a> to see a cleaner view of this JSON file.</p><p>The OpenAPI specification looks best using the light theme. You can adjust the textbook theme in the left sidebar at the bottom of the textbook page.</p></div></details><div class="sc-openapi-wrapper is-loading helper-loading-container"><div class=sc-openapi-container id=R-openapi-95506f0c675d2e31e265c77daee92727 data-openapi-url=/cis526/milestones/04/openapi.json data-openapi-spec></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=vuejs-starter-project>Vue.js Starter Project</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-5---vue-starter-project>Milestone 5 - Vue Starter Project</h2><p>Follow the instructions in the <a href=/cis526/x-examples/05-vue-starter/index.html>Example Project</a> to build a project using Vue.js that includes the following features:</p><ol><li>A single page frontend application running in <a href=https://vuejs.org/ rel=external target=_blank>Vue 3</a>.</li><li>Built-in Vue features such as <a href=https://router.vuejs.org/ rel=external target=_blank>Vue Router</a> and <a href=https://pinia.vuejs.org/ rel=external target=_blank>Pinia</a>.</li><li>Access to components and icons from <a href=https://primevue.org/ rel=external target=_blank>PrimeVue</a>.</li><li>Access to <a href=https://tailwindcss.com/ rel=external target=_blank>Tailwind CSS</a> for additional CSS styling and features.</li><li>A working <a href=https://primevue.org/theming/styled/#darkmode rel=external target=_blank>Dark Mode Theme</a> completed with a selector that remembers our preference.</li><li>A working <a href=https://vite.dev/ rel=external target=_blank>Vite</a> server that will proxy requests to our backend RESTful API seamlessly.</li><li>An <a href=https://axios-http.com/ rel=external target=_blank>Axios</a> client that can access our RESTful API routes.</li><li>A seamless system for authentication and requesting a JWT to access protected API routes.</li><li>A demo of accessing the API on the <code>/profile</code> page listing all users and roles assigned to those users (this page should load correctly for the <code>admin</code> user)</li></ol><p>Effectively, just follow along with the example project and submit the resulting repository. This will be the starting point for the rest of the milestones!</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=vuejs-crud-app>Vue.js CRUD App</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-6---vuejs-crud-app>Milestone 6 - Vue.js CRUD App</h2><p>Building from the <a href=/cis526/x-milestones/05-vue-starter/index.html>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li>Most menu items and routes are protected and only allow users with specific roles to view/access them</li><li>A page that lists all roles in the application for anyone with the <code>manage_users</code> role. Roles are not editable.</li><li>A page that lists all users in a data table for anyone with the <code>manage_users</code> role.<ol><li>Helpful columns on that page should be searchable and sortable, as well as the ability to filter by role.</li><li>A page to edit existing users, including updating their roles.</li><li>A page to create new users and assign new roles.</li><li>A method to delete existing users.</li></ol></li><li>A page that lists all counties in the application for anyone with the <code>view_communities</code>, <code>manage_communities</code> and <code>add_communities</code> roles. Counties are not editable.</li><li>A page that lists all communities in a data table for anyone with the <code>view_communities</code>, <code>manage_communities</code> and <code>add_communities</code> roles.<ol><li>Helpful columns on that page should be searchable and sortable.</li><li>A page to edit existing communities, including changing the county that they are in, for anyone with the <code>manage_communities</code> role.</li><li>A page to create new communities and associated with a county, for anyone with the <code>manage_communities</code> and <code>add_communities</code> roles.</li><li>A method to delete existing communities, for anyone with the <code>manage_communities</code> role.</li><li><strong>For this milestone, you may hard-code the frontend to have all new communities owned by user ID 1 <code>admin</code></strong></li></ol></li><li>A page that lists all documents in a data table for anyone with the <code>view_documents</code>, <code>manage_documents</code> and <code>add_documents</code> roles.<ol><li>Helpful columns on that page should be searchable and sortable. Document filenames should be clickable, and it should direct users to the appropriate file on the server (if such file exists; this should work for all uploaded files)</li><li>A page to edit existing documents, for anyone with the <code>manage_documents</code> role.</li><li>A page to create new documents, for anyone with the <code>manage_documents</code> and <code>add_documents</code> roles.</li><li>A method to delete existing documents, for anyone with the <code>manage_documents</code> role.</li><li>When creating or editing a document, users should also have the ability to upload a new file for that document.</li></ol></li></ol><p>We will <strong>NOT</strong> be handling the interface for metadata in this milestone. That will be the last milestone for this project.</p><h3 id=hints>Hints</h3><h4 id=clickable-filenames>Clickable Filenames</h4><p>To make filenames clickable, you&rsquo;ll need to add an additional proxy route to the <code>client/vite.config.js</code> to allow users to access the <code>uploads</code> folder (or wherever you are storing your uploaded files). You can continue to use the Express static file middleware to serve these files.</p><h4 id=file-uploads>File Uploads</h4><p>To simplify the file upload process, you may want to ensure that files are named with the appropriate file extensions to match their mimetypes on the server. Below is an example if you are using <a href=https://expressjs.com/en/resources/middleware/multer.html rel=external target=_blank>multer</a> to handle file uploads - it uses <a href=https://www.npmjs.com/package/nanoid rel=external target=_blank>nanoid</a> to generate random filenames and <a href=https://www.npmjs.com/package/mime-types rel=external target=_blank>mime-types</a> to get the correct file extension to match the mimetype of the file. You can then store the filename, size, and mimetype you get from multer in your endpoint for uploading files.</p><div class=tab-panel data-tab-group=c79273b4b79ebe6507a199d7f4dcc6a2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=document-api-handler class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c79273b4b79ebe6507a199d7f4dcc6a2","document-api-handler")'>
<span class=tab-nav-text>Document API Handler</span></button></div><div class=tab-content-container><div data-tab-item=document-api-handler class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Initialize Multer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>storage</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>multer</span>.<span style=color:#a6e22e>diskStorage</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>destination</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;public/uploads&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>file</span>, <span style=color:#a6e22e>cb</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cb</span>(<span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>nanoid</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>mime</span>.<span style=color:#a6e22e>extension</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>mimetype</span>));
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>upload</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>multer</span>({ <span style=color:#a6e22e>storage</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>storage</span> });</span></span></code></pre></div></div></div></div></div><p>On the frontend, you can use the <a href=https://primevue.org/fileupload/ rel=external target=_blank>PrimeVue FileUpload</a> component to select the file, but you should implement a <a href=https://primevue.org/fileupload/#custom-upload rel=external target=_blank>Custom Upload</a> handler.</p><p>A brief but incomplete example is given below:</p><div class=tab-panel data-tab-group=0f3674c9f52671c13fb5c52f60bf9134><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=file-upload-example class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0f3674c9f52671c13fb5c52f60bf9134","file-upload-example")'>
<span class=tab-nav-text>File Upload Example</span></button></div><div class=tab-content-container><div data-tab-item=file-upload-example class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FileUpload</span>, <span style=color:#a6e22e>Button</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>file</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Upload function - could possibly call this after saving the document but before redirecting
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>upload</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>documentid</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// If the user has selected a file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>hasFiles</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Fetch the file from the user&#39;s filesystem into the browser
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>files</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>objectURL</span>)
</span></span><span style=display:flex><span>      <span style=color:#75715e>// convert the file to a blob
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>response</span>) =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>blob</span>())
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>blob</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Create a file from the blob and add it to a form data object
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fileUpload</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>File</span>([<span style=color:#a6e22e>blob</span>], <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>files</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>name</span>, { <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>blob</span>.<span style=color:#a6e22e>type</span> })
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>FormData</span>()
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#39;file&#39;</span>, <span style=color:#a6e22e>fileUpload</span>)
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Upload that form to the endpoint
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;/api/v1/documents/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>documentid</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/upload&#39;</span>, <span style=color:#a6e22e>form</span>, {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>              <span style=color:#e6db74>&#39;Content-Type&#39;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;multipart/form-data&#39;</span>,
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>          })
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// handle success
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          })
</span></span><span style=display:flex><span>          .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// handle error uploading file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          })
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// handle error reading file
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      })
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// No file was selected
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>FileUpload</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;file&#34;</span> <span style=color:#a6e22e>mode</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;basic&#34;</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;file&#34;</span> <span style=color:#a6e22e>customUpload</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;upload(props.id)&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Upload&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=advanced-topics>Advanced Topics</h1><p>This set of milestones is all about building a RESTful API and interface for the <a href=https://lostkansas.ccrsdigitalprojects.com/ rel=external target=_blank>Lost Kansas Communities</a> project.</p><h2 id=milestone-7---advanced-topics>Milestone 7 - Advanced Topics</h2><p>Building from the <a href=/cis526/x-milestones/06-vue-crud-app/index.html>previous milestone</a>, expand upon the starter project by adding the following features:</p><ol><li><strong>Metadata List View</strong> - add a view to show all metadata available in the application. You <strong>MAY NOT</strong> use the <a href=https://primevue.org/datatable/ rel=external target=_blank>PrimeVue DataTable</a> component for this. Instead, develop your own method to display these items (for example, consider using the <a href=https://primevue.org/dataview/ rel=external target=_blank>PrimeVue DataView</a> along with your own custom component for showing each individual metadata item).</li><li><strong>Metadata Single View</strong> - each metadata item in the Metadata List View should be clickable and direct users to a page showing all data about that metadata item, including all linked communities and documents.</li><li><strong>Edit Metadata View</strong> - for users with the appropriate roles, display buttons to edit and delete metadata items. Users should be able to edit all items of a metadata item except <code>owner_user_id</code> (this should be set on the backend to the currently authenticated user) and <code>copyright_id</code> (this can be set to a default value of &ldquo;1&rdquo;).</li><li><strong>Manage Documents & Communities</strong> - for users with the appropriate roles, include methods for adding and removing documents and communities from a metadata item.</li></ol><p>For 10% extra credit each, implement the following features:</p><ol><li>Enable filtering of the Metadata List View by keyword. For this project, we will assume that each individual word (delimited by spaces) in the <code>keywords</code> attribute of a metadata item is a valid keyword.</li><li>Add a map view on the Metadata Single View that shows a map with the coordinates of the first community attached to the metadata item, if one is present. Your application should seamlessly handle situations where a metadata item does not have a community attached (in that case, the map can be hidden).</li></ol><h3 id=hints>Hints</h3><ol><li>Filtering by keywords is easier than it may seem - at a minimum, you can create a route that includes a tag as a route parameter (e.g. <code>metadata/tags/&lt;tag></code>) and then use a computed value to filter the list of metadata using that keyword. You&rsquo;ll also need to use <code>split()</code> and <code>trim()</code> effectively on the <code>keyword</code> attribute.</li><li>For creating a map, consider using the <a href=https://vue3openlayers.netlify.app/ rel=external target=_blank>vue3-openlayers</a> library.</li></ol><footer class=footline></footer></article></section></div></main></div><script src=/cis526/js/js-yaml/js-yaml.min.js?1769640562 defer></script><script src=/cis526/js/swagger-ui/swagger-ui-bundle.js?1769640562 defer></script><script src=/cis526/js/swagger-ui/swagger-ui-standalone-preset.js?1769640562 defer></script><script>window.relearn.themeUseOpenapi={css:"/css/swagger-ui/swagger-ui.css",cssInProject:!0,assetsBuster:"?1769640562"}</script><script src=/cis526/js/clipboard/clipboard.min.js?1769640562 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1769640562 defer></script><script src=/cis526/js/theme.min.js?1769640562 defer></script><script src=/cis526/js/embed-iframe.min.js?1769640562 defer></script></body></html>