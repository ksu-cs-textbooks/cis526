<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, let’s look at a quick example for our application."><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Docker Compose :: CIS 526 Textbook"><meta name=twitter:description content="Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, let’s look at a quick example for our application."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/06-compose/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Docker Compose :: CIS 526 Textbook"><meta property="og:description" content="Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, let’s look at a quick example for our application."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-05-09T15:37:52-05:00"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Docker Compose :: CIS 526 Textbook"><meta itemprop=description content="Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, let’s look at a quick example for our application."><meta itemprop=dateModified content="2025-05-09T15:37:52-05:00"><meta itemprop=wordCount content="641"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Docker Compose :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/06-compose/index.html rel=canonical type=text/html title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/06-compose/index.xml rel=alternate type=application/rss+xml title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/06-compose/index.print.html rel=alternate type=text/html title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/06-compose/tele.html rel=alternate type=text/html title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1755561291 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1755561291 defer></script><script src=/cis526/js/search-lunr.min.js?1755561291 defer></script><script src=/cis526/js/search.min.js?1755561291 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1755561291"</script><script src=/cis526/js/lunr/lunr.min.js?1755561291 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1755561291 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1755561291 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1755561291 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1755561291 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1755561291 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1755561291 rel=stylesheet><link href=/cis526/css/theme.min.css?1755561291 rel=stylesheet><link href=/cis526/css/format-html.min.css?1755561291 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-examples/07-advanced-topics/06-compose/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1755561291 rel=stylesheet></head><body class="mobile-support embed html" data-url=/cis526/x-examples/07-advanced-topics/06-compose/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-examples" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=docker-compose>Docker Compose</h1><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/SjfFPNsLDn0 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=docker-compose>Docker Compose</h2><p>The last step we can take to make our application easier to deploy is to create a <a href=https://docs.docker.com/compose/ rel=external target=_blank>Docker Compose</a> file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, let&rsquo;s look at a quick example for our application.</p><p>We&rsquo;ll place this file at the top-level of our application in a file named <code>compose.yml</code> with the following contents:</p><div class=tab-panel data-tab-group=d44c415659f445dcbd48c4207aba6d3c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=composeyml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d44c415659f445dcbd48c4207aba6d3c","composeyml")'>
<span class=tab-nav-text>compose.yml</span></button></div><div class=tab-content-container><div data-tab-item=composeyml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>######################################</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Lost Communities Solution</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Repository:</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># https://github.com/cis526-codio/lost-communities-solution</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>lostcommunities</span>:
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># Docker Image</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>ghcr.io/cis526-codio/lost-communities-solution:latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Container Name</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>lostcommunities</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Restart Container Unless Stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Network Ports</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;3000:3000&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Volumes</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>lostcommunities_data:/usr/src/app/data:rw</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>lostcommunities_uploads:/usr/src/app/public/uploads:rw</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Environment Variables</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># =+=+=+= REQUIRED VALUES =+=+=+=</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># These values must be configured for deployment</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Session Secret Key</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>SESSION_SECRET</span>: <span style=color:#e6db74>&#39;thisisasupersecretkey&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># JWT Secret Key</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>JWT_SECRET_KEY</span>: <span style=color:#e6db74>&#39;thisisasupersecretkey&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Use Node and run `require(&#39;crypto&#39;).randomBytes(64).toString(&#39;hex&#39;)` to get a random value</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CAS Authentication Settings</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CAS Server URL (send users here to login)</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>CAS_URL</span>: <span style=color:#e6db74>&#39;https://testcas.cs.ksu.edu&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># CAS Service URL (CAS returns users here; usually where this app is deployed)</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>CAS_SERVICE_URL</span>: <span style=color:#e6db74>&#39;http://localhost:3000&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Database File Name</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Options: &#39;:memory:&#39; to use an in-memory database (not recommended), or any file name otherwise</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>DATABASE_FILE</span>: <span style=color:#e6db74>&#39;data/database.sqlite&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Seed initial data on first startup</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>SEED_DATA</span>: <span style=color:#e6db74>&#39;true&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># =+=+=+= OPTIONAL VALUES =+=+=+=</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># These values are set to reasonable defaults</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># but can be overridden. Default values are shown as comments</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Log Level</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Options: error | warn | info | http | verbose | debug | sql | silly</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#LOG_LEVEL: &#39;http&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Network Port</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#PORT: &#39;3000&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># =+=+=+= OTHER VALUES =+=+=+=</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># These values are not recommended for deployment but are available</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Custom Session Cookie Name</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#SESSION_NAME: &#39;connect.sid&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Open API Documentation</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Show OpenAPI Documentation at `/docs` path</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#OPENAPI_VISIBLE: &#39;false&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Open API Host for testing</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#OPENAPI_HOST: &#39;http://localhost:3000&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Export Open API JSON File</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#OPENAPI_EXPORT: &#39;false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Open API Export File Path</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#OPENAPI_EXPORT_PATH: &#39;openapi.json&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Enable Bypass Authentication</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Use path `/auth/bypass?token=&lt;username&gt;` to log in as any user</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># DO NOT ENABLE IN PRODUCTION - THIS IS INSECURE!</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#BYPASS_AUTH: &#39;false&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>lostcommunities_data</span>:
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>lostcommunities_uploads:</span></span></span></code></pre></div></div></div></div></div><p>Most of this file is pretty straightforward. The one unique bit to point out is the two <code>volume</code> mounts, which connect a Docker volume to both the <code>data</code> and the <code>public/uploads</code> folders of our container. The first folder was created to specifically store our database file, and the second one will store all uploaded files from the users. In our Docker Compose file we are simply storing these in Docker volumes, but an experienced system administrator could change these to link directly to a path on the host system, making it easy to access.</p><details open class="box cstyle notices tip"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-lightbulb"></i>
Update the Image Path</summary><div class=box-content><p>Remember to update the image path in the Docker Compose file to match the path where your own Docker image can be found on the GitHub Container Registry - you can find it in your repository by clicking the Package name on the right side of the page.</p></div></details><h2 id=using-docker-compose>Using Docker Compose</h2><p>To actually deploy this application, we can simply download a copy of this <code>compose.yml</code> file on any system with Docker installed, and then run the following command to deploy it:</p><div class=tab-panel data-tab-group=98d3cddffbb74764e27a94f7a7da7945><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("98d3cddffbb74764e27a94f7a7da7945","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker compose up -d</span></span></code></pre></div></div></div></div></div><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Authenticating with GitHub Container Registry</summary><div class=box-content><p>Since our Docker image is stored in a private repository on GitHub, we&rsquo;ll need to authenticate with the GitHub Container Registry. Instructions for doing this with a GitHub Personal Access Token can be found in the <a href=https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry#authenticating-with-a-personal-access-token-classic rel=external target=_blank>GitHub Documentation</a>.</p></div></details><p>If everything works correctly, we should see our application start in the terminal:</p><p><a href=#R-image-a344b9d94f4ee32da80607b5140cdcd7 class=lightbox-link><img alt="Docker Compose Deploy" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/07/deploy_7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a344b9d94f4ee32da80607b5140cdcd7><img alt="Docker Compose Deploy" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/07/deploy_7.png></a></p><p>We can test it by going to <code>http://localhost:3000</code> on our local system, or whatever URL is attached to the deployed container.</p><p><a href=#R-image-160773e27d342b9c503458ba2d48e68e class=lightbox-link><img alt="Docker Container Running" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/07/deploy_8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-160773e27d342b9c503458ba2d48e68e><img alt="Docker Container Running" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/07/deploy_8.png></a></p><footer class=footline></footer></article></div></main></div><script src=/cis526/js/clipboard/clipboard.min.js?1755561291 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1755561291 defer></script><script src=/cis526/js/theme.min.js?1755561291 defer></script><script src=/cis526/js/embed-iframe.min.js?1755561291 defer></script></body></html>