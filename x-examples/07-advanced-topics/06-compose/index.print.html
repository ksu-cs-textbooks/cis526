<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="YouTube Video Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, letâ€™s look at a quick example for our application."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker Compose :: CIS 526 Textbook"><meta name=twitter:description content="YouTube Video Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, letâ€™s look at a quick example for our application."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/06-compose/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Docker Compose :: CIS 526 Textbook"><meta property="og:description" content="YouTube Video Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, letâ€™s look at a quick example for our application."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-05-09T15:37:52-05:00"><meta itemprop=name content="Docker Compose :: CIS 526 Textbook"><meta itemprop=description content="YouTube Video Docker Compose The last step we can take to make our application easier to deploy is to create a Docker Compose file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, letâ€™s look at a quick example for our application."><meta itemprop=dateModified content="2025-05-09T15:37:52-05:00"><meta itemprop=wordCount content="643"><title>Docker Compose :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/06-compose/ rel=canonical type=text/html title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/06-compose/index.xml rel=alternate type=application/rss+xml title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/06-compose/tele.html rel=alternate type=text/html title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/06-compose/embed.html rel=alternate type=text/html title="Docker Compose :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1747410760 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1747410760 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1747410760 rel=stylesheet><link href=/cis526/css/auto-complete.css?1747410760 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1747410760 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1747410760 rel=stylesheet><link href=/cis526/css/fonts.css?1747410760 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1747410760 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1747410760 rel=stylesheet><link href=/cis526/css/theme-auto.css?1747410760 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1747410760 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1747410760 rel=stylesheet><link href=/cis526/css/print.css?1747410760 rel=stylesheet media=print><link href=/cis526/css/format-print.css?1747410760 rel=stylesheet><script src=/cis526/js/variant.js?1747410760></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1747410760 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis526/x-examples/07-advanced-topics/06-compose/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis526/x-examples/><span itemprop=name>Example Projects</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis526/x-examples/07-advanced-topics/><span itemprop=name>Advanced Topics</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Docker Compose</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/05-github-actions/ title="GitHub Actions (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/07-external-db/ title="External Database (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=docker-compose>Docker Compose</h1><a href="https://www.youtube.com/watch?v=SjfFPNsLDn0">YouTube Video</a><h2 id=docker-compose>Docker Compose</h2><p>The last step we can take to make our application easier to deploy is to create a <a href=https://docs.docker.com/compose/ rel=external target=_blank>Docker Compose</a> file that shows how to deploy this application easily within a Docker environment. It is becoming more and more popular for self-hosted projects and web applications to include a sample Docker Compose file to show how the application should be deployed in practice. So, let&rsquo;s look at a quick example for our application.</p><p>We&rsquo;ll place this file at the top-level of our application in a file named <code>compose.yml</code> with the following contents:</p><div class=tab-panel data-tab-group=81c7af831bb5d090749242a37a99be63><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=composeyml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("81c7af831bb5d090749242a37a99be63","composeyml")'>
<span class=tab-nav-text>compose.yml</span></button></div><div class=tab-content-container><div data-tab-item=composeyml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>######################################</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Lost Communities Solution</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>#</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Repository:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># https://github.com/cis526-codio/lost-communities-solution</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>lostcommunities</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Docker Image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/cis526-codio/lost-communities-solution:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Container Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>lostcommunities</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Restart Container Unless Stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Network Ports</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3000:3000&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Volumes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>lostcommunities_data:/usr/src/app/data:rw</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>lostcommunities_uploads:/usr/src/app/public/uploads:rw</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Environment Variables</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># =+=+=+= REQUIRED VALUES =+=+=+=</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># These values must be configured for deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Session Secret Key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>SESSION_SECRET</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;thisisasupersecretkey&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># JWT Secret Key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>JWT_SECRET_KEY</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;thisisasupersecretkey&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Use Node and run `require(&#39;crypto&#39;).randomBytes(64).toString(&#39;hex&#39;)` to get a random value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CAS Authentication Settings</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CAS Server URL (send users here to login)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CAS_URL</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://testcas.cs.ksu.edu&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CAS Service URL (CAS returns users here; usually where this app is deployed)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>CAS_SERVICE_URL</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;http://localhost:3000&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Database File Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Options: &#39;:memory:&#39; to use an in-memory database (not recommended), or any file name otherwise</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>DATABASE_FILE</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;data/database.sqlite&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Seed initial data on first startup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>SEED_DATA</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;true&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># =+=+=+= OPTIONAL VALUES =+=+=+=</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># These values are set to reasonable defaults</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># but can be overridden. Default values are shown as comments</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Log Level</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Options: error | warn | info | http | verbose | debug | sql | silly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#LOG_LEVEL: &#39;http&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Network Port</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#PORT: &#39;3000&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># =+=+=+= OTHER VALUES =+=+=+=</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># These values are not recommended for deployment but are available</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Custom Session Cookie Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#SESSION_NAME: &#39;connect.sid&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Open API Documentation</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Show OpenAPI Documentation at `/docs` path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#OPENAPI_VISIBLE: &#39;false&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Open API Host for testing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#OPENAPI_HOST: &#39;http://localhost:3000&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Export Open API JSON File</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#OPENAPI_EXPORT: &#39;false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Open API Export File Path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#OPENAPI_EXPORT_PATH: &#39;openapi.json&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Enable Bypass Authentication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Use path `/auth/bypass?token=&lt;username&gt;` to log in as any user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># DO NOT ENABLE IN PRODUCTION - THIS IS INSECURE!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c>#BYPASS_AUTH: &#39;false&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>lostcommunities_data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>lostcommunities_uploads:</span></span></span></code></pre></div></div></div></div></div><p>Most of this file is pretty straightforward. The one unique bit to point out is the two <code>volume</code> mounts, which connect a Docker volume to both the <code>data</code> and the <code>public/uploads</code> folders of our container. The first folder was created to specifically store our database file, and the second one will store all uploaded files from the users. In our Docker Compose file we are simply storing these in Docker volumes, but an experienced system administrator could change these to link directly to a path on the host system, making it easy to access.</p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Update the Image Path</div><div class=box-content><p>Remember to update the image path in the Docker Compose file to match the path where your own Docker image can be found on the GitHub Container Registry - you can find it in your repository by clicking the Package name on the right side of the page.</p></div></div><h2 id=using-docker-compose>Using Docker Compose</h2><p>To actually deploy this application, we can simply download a copy of this <code>compose.yml</code> file on any system with Docker installed, and then run the following command to deploy it:</p><div class=tab-panel data-tab-group=f2581dc2b72c0f28c2660a771db23f9a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("f2581dc2b72c0f28c2660a771db23f9a","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker compose up -d</span></span></code></pre></div></div></div></div></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Authenticating with GitHub Container Registry</div><div class=box-content><p>Since our Docker image is stored in a private repository on GitHub, we&rsquo;ll need to authenticate with the GitHub Container Registry. Instructions for doing this with a GitHub Personal Access Token can be found in the <a href=https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry#authenticating-with-a-personal-access-token-classic rel=external target=_blank>GitHub Documentation</a>.</p></div></div><p>If everything works correctly, we should see our application start in the terminal:</p><p><a href=#R-image-d66aab4a2140394f0e4395ca0dcca907 class=lightbox-link><img alt="Docker Compose Deploy" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/07/deploy_7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d66aab4a2140394f0e4395ca0dcca907><img alt="Docker Compose Deploy" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/07/deploy_7.png></a></p><p>We can test it by going to <code>http://localhost:3000</code> on our local system, or whatever URL is attached to the deployed container.</p><p><a href=#R-image-68b2ff2e4cfcbf0eae9d584bbbc1e6b6 class=lightbox-link><img alt="Docker Container Running" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/07/deploy_8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-68b2ff2e4cfcbf0eae9d584bbbc1e6b6><img alt="Docker Container Running" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/07/deploy_8.png></a></p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis526/commit/ea0963bd64701bb29f808cb103838a07237a43df>May 9, 2025</a></p></div></div><script src=/cis526/js/clipboard.min.js?1747410760 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1747410760 defer></script><script src=/cis526/js/theme.js?1747410760 defer></script></body></html>