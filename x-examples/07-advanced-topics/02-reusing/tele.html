<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Reusing Components :: CIS 526 Textbook"><meta name=twitter:description content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/02-reusing/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Reusing Components :: CIS 526 Textbook"><meta property="og:description" content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-04-26T15:56:55-05:00"><meta itemprop=name content="Reusing Components :: CIS 526 Textbook"><meta itemprop=description content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta itemprop=dateModified content="2025-04-26T15:56:55-05:00"><meta itemprop=wordCount content="1588"><title>Reusing Components :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/02-reusing/ rel=canonical type=text/html title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/02-reusing/index.xml rel=alternate type=application/rss+xml title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/02-reusing/index.print.html rel=alternate type=text/html title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/02-reusing/embed.html rel=alternate type=text/html title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1746553392 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1746553392 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1746553392 rel=stylesheet><link href=/cis526/css/auto-complete.css?1746553392 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1746553392 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1746553392 rel=stylesheet><link href=/cis526/css/fonts.css?1746553392 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1746553392 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1746553392 rel=stylesheet><link href=/cis526/css/theme-auto.css?1746553392 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1746553392 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1746553392 rel=stylesheet><link href=/cis526/css/print.css?1746553392 rel=stylesheet media=print><script src=/cis526/js/variant.js?1746553392></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1746553392 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis526/x-examples/07-advanced-topics/02-reusing/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=reusing-components>Reusing Components</h1><a href="https://www.youtube.com/watch?v=6skldOnt7Sc">YouTube Video</a><h2 id=reusing-components>Reusing Components</h2><p>One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a <a href=https://primevue.org/dynamicdialog/ rel=external target=_blank>PrimeVue DynamicDialog</a> component to allow us to open the <code>UserEdit</code> component in a popup dialog on our <code>UsersList</code> component.</p><h2 id=installing-dynamicdialog>Installing DynamicDialog</h2><p>To begin, we must install the service for this component in our <code>src/main.js</code> along with the other services for PrimeVue components:</p><div class=tab-panel data-tab-group=a45df304346156060d42c9ea676d9a16><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcmainjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a45df304346156060d42c9ea676d9a16","srcmainjs")'>
<span class=tab-nav-text>src/main.js</span></button></div><div class=tab-content-container><div data-tab-item=srcmainjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @file Main Vue application
</span></span></span><span class=line><span class=cl><span class=cm> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Import Libraries
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>createApp</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createPinia</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;pinia&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>PrimeVue</span> <span class=nx>from</span> <span class=s1>&#39;primevue/config&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Aura</span> <span class=nx>from</span> <span class=s1>&#39;@primeuix/themes/aura&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Tooltip</span> <span class=nx>from</span> <span class=s1>&#39;primevue/tooltip&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ToastService</span> <span class=nx>from</span> <span class=s1>&#39;primevue/toastservice&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ConfirmationService</span> <span class=nx>from</span> <span class=s1>&#39;primevue/confirmationservice&#39;</span>
</span></span><span class="line hl"><span class=cl><span class=kr>import</span> <span class=nx>DialogService</span> <span class=nx>from</span> <span class=s1>&#39;primevue/dialogservice&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Create Vue App
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>createApp</span><span class=p>(</span><span class=nx>App</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Install Libraries
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>createPinia</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>router</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>PrimeVue</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Theme Configuration
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>theme</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>preset</span><span class=o>:</span> <span class=nx>Aura</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>darkModeSelector</span><span class=o>:</span> <span class=s1>&#39;.app-dark-mode&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>ToastService</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>ConfirmationService</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>DialogService</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>Then, we can add the single instance of the component to our top-level <code>App.vue</code> component along with the other service components:</p><div class=tab-panel data-tab-group=16c1b58fa8d10fab9a65c21067fc96cb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcappvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("16c1b58fa8d10fab9a65c21067fc96cb","srcappvue")'>
<span class=tab-nav-text>src/App.vue</span></button></div><div class=tab-content-container><div data-tab-item=srcappvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @file Main Vue Application
</span></span></span><span class=line><span class=cl><span class=cm> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Import Components
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>Toast</span> <span class=nx>from</span> <span class=s1>&#39;primevue/toast&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>ConfirmDialog</span> <span class=nx>from</span> <span class=s1>&#39;primevue/confirmdialog&#39;</span>
</span></span><span class="line hl"><span class=cl><span class=kr>import</span> <span class=nx>DynamicDialog</span> <span class=nx>from</span> <span class=s1>&#39;primevue/dynamicdialog&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>TopMenu</span> <span class=nx>from</span> <span class=s1>&#39;./components/layout/TopMenu.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>header</span><span class=p>&gt;&lt;/</span><span class=nt>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>nav</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>Navigation</span> <span class=nx>Menu</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>TopMenu</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>nav</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;m-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=c>&lt;!--</span> <span class=nx>Main</span> <span class=nx>Application</span> <span class=nx>View</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>RouterView</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>main</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>footer</span><span class=p>&gt;&lt;/</span><span class=nt>footer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>Toast</span> <span class=na>position</span><span class=o>=</span><span class=s>&#34;bottom-right&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>ConfirmDialog</span> <span class=p>/&gt;</span>
</span></span><span class="line hl"><span class=cl>  <span class=p>&lt;</span><span class=nt>DynamicDialog</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>That&rsquo;s all it takes to make this feature available throughout our application.</p><h2 id=updating-userslist-to-use-dynamicdialog>Updating UsersList to use DynamicDialog</h2><p>Now, in our <code>UsersList</code> component, we simply have to add a few imports as well as function to load the component in a dialog box:</p><div class=tab-panel data-tab-group=2ae633f37de9bd82227d3302282bad6e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2ae633f37de9bd82227d3302282bad6e","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Import Libraries
</span></span></span><span class="line hl"><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>defineAsyncComponent</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>formatDistance</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;date-fns&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>DataTable</span> <span class=nx>from</span> <span class=s1>&#39;primevue/datatable&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Column</span> <span class=nx>from</span> <span class=s1>&#39;primevue/column&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>IconField</span><span class=p>,</span> <span class=nx>InputIcon</span><span class=p>,</span> <span class=nx>InputText</span><span class=p>,</span> <span class=nx>MultiSelect</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;primevue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>FilterMatchMode</span><span class=p>,</span> <span class=nx>FilterService</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@primevue/core/api&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>RoleChip</span> <span class=nx>from</span> <span class=s1>&#39;../roles/RoleChip.vue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>Button</span> <span class=nx>from</span> <span class=s1>&#39;primevue/button&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useRouter</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue-router&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>useRouter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useToast</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;primevue/usetoast&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>toast</span> <span class=o>=</span> <span class=nx>useToast</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useConfirm</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;primevue&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>confirm</span> <span class=o>=</span> <span class=nx>useConfirm</span><span class=p>()</span>
</span></span><span class="line hl"><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useDialog</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;primevue/usedialog&#39;</span><span class=p>;</span>
</span></span><span class="line hl"><span class=cl><span class=kr>const</span> <span class=nx>dialog</span> <span class=o>=</span> <span class=nx>useDialog</span><span class=p>();</span>
</span></span><span class="line hl"><span class=cl><span class=kr>const</span> <span class=nx>userEditComponent</span> <span class=o>=</span> <span class=nx>defineAsyncComponent</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;./UserEdit.vue&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class="line hl"><span class=cl><span class=c1>// Load Dialog
</span></span></span><span class="line hl"><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>editDialog</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>id</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=nx>dialog</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=nx>userEditComponent</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>    <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>      <span class=nx>style</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>          <span class=nx>width</span><span class=o>:</span> <span class=s1>&#39;40vw&#39;</span><span class=p>,</span>
</span></span><span class="line hl"><span class=cl>      <span class=p>},</span>
</span></span><span class="line hl"><span class=cl>      <span class=nx>modal</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class="line hl"><span class=cl>    <span class=p>},</span>
</span></span><span class="line hl"><span class=cl>    <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=nx>id</span>
</span></span><span class="line hl"><span class=cl>    <span class=p>}</span>
</span></span><span class="line hl"><span class=cl>  <span class=p>});</span>
</span></span><span class="line hl"><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>Notice in the <code>dialog.open</code> function call, we are including the <code>userEditComponent</code> that we are loading asynchronously in the background using the <code>defineAsyncComponent</code> function in Vue. This allows us to load the main <code>UsersList</code> component fully first, and then in the background it will load the <code>UserEdit</code> component as needed. We are also passing along the <code>id</code> of the user to be edited as part of the <code>data</code> that is sent to the component.</p><p>Finally, in the template, we just replace the click handlers for the <strong>New</strong> and <strong>Edit</strong> buttons to call this new <code>editDialog</code> function:</p><div class=tab-panel data-tab-group=c1ff4dd43213c2c7db218c041fb827b9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c1ff4dd43213c2c7db218c041fb827b9","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>DataTable</span>
</span></span><span class=line><span class=cl>    <span class=nt>:value</span><span class=o>=</span><span class=s>&#34;users&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>v</span><span class=nt>-model:filters</span><span class=o>=</span><span class=s>&#34;filters&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nt>:globalFilterFields</span><span class=o>=</span><span class=s>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>filterDisplay</span><span class=o>=</span><span class=s>&#34;menu&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>sortField</span><span class=o>=</span><span class=s>&#34;username&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nt>:sortOrder</span><span class=o>=</span><span class=s>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>header</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex justify-between&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Button</span>
</span></span><span class=line><span class=cl>          <span class=na>label</span><span class=o>=</span><span class=s>&#34;New User&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>icon</span><span class=o>=</span><span class=s>&#34;pi pi-user-plus&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>severity</span><span class=o>=</span><span class=s>&#34;success&#34;</span>
</span></span><span class="line hl"><span class=cl>          <span class=nt>@click</span><span class=s>=&#34;editDialog()&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--</span> <span class=nx>other</span> <span class=nx>code</span> <span class=nx>omitted</span> <span class=nx>here</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>other</span> <span class=nx>code</span> <span class=nx>omitted</span> <span class=nx>here</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Column</span> <span class=na>header</span><span class=o>=</span><span class=s>&#34;Actions&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;min-width: 8rem&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>template</span> <span class=err>#</span><span class=na>body</span><span class=o>=</span><span class=s>&#34;slotProps&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex gap-2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Button</span>
</span></span><span class=line><span class=cl>            <span class=na>icon</span><span class=o>=</span><span class=s>&#34;pi pi-pencil&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>outlined</span>
</span></span><span class=line><span class=cl>            <span class=na>rounded</span>
</span></span><span class="line hl"><span class=cl>            <span class=nt>@click</span><span class=s>=&#34;editDialog(slotProps.data.id)&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>v</span><span class=nt>-tooltip</span><span class=na>.bottom</span><span class=err>=&#34;&#39;</span><span class=na>Edit</span><span class=err>&#39;&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Button</span>
</span></span><span class=line><span class=cl>            <span class=na>icon</span><span class=o>=</span><span class=s>&#34;pi pi-trash&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>outlined</span>
</span></span><span class=line><span class=cl>            <span class=na>rounded</span>
</span></span><span class=line><span class=cl>            <span class=na>severity</span><span class=o>=</span><span class=s>&#34;danger&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nt>@click</span><span class=s>=&#34;confirmDelete(slotProps.data.id)&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>v</span><span class=nt>-tooltip</span><span class=na>.bottom</span><span class=err>=&#34;&#39;</span><span class=na>Delete</span><span class=err>&#39;&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Column</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>DataTable</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>Now, when we click those buttons, it will open the <code>EditUser</code> component in a modal popup dialog instead of directing users to a new route. Of course, on some pages, we may need to check that the user has specific roles before allowing the user to actually load the popup, just like we have to check for those roles before the user navigates to those routes. Since we are now bypassing the Vue Router, any logic in the router may need to be recreated here.</p><h2 id=updating-useredit-component>Updating UserEdit Component</h2><p>Finally, we must make a few minor tweaks to the <code>UserEdit</code> component so that it can run seamlessly in both a stand-alone view as well as part of a popup dialog. The major change comes in the way the incoming data is received, and what should happen when the user is successfully saved.</p><p>The PrimeVue DynamicDialog service uses Vue&rsquo;s <a href=https://vuejs.org/guide/components/provide-inject rel=external target=_blank>Provide / Inject</a> interface to send data to the component loaded in a dialog. So, in our component, we must declare a few additional state variables, as well as small piece of code to detect whether it is running in a dialog or as a standalone component in a view.</p><div class=tab-panel data-tab-group=1d48ba70d09d7937c60604a7428e73f1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1d48ba70d09d7937c60604a7428e73f1","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// Import Libraries
</span></span></span><span class="line hl"><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>ref</span><span class=p>,</span> <span class=nx>computed</span><span class=p>,</span> <span class=nx>inject</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Declare State
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>errors</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>([])</span>
</span></span><span class="line hl"><span class=cl><span class=kr>const</span> <span class=nx>isDialog</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>(</span><span class=kc>false</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl><span class=kr>const</span> <span class=nx>userId</span> <span class=o>=</span> <span class=nx>ref</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl><span class=c1>// Detect Dialog
</span></span></span><span class="line hl"><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>dialogRef</span> <span class=o>=</span> <span class=nx>inject</span><span class=p>(</span><span class=s1>&#39;dialogRef&#39;</span><span class=p>)</span>
</span></span><span class="line hl"><span class=cl>
</span></span><span class="line hl"><span class=cl><span class=k>if</span><span class=p>(</span><span class=nx>dialogRef</span> <span class=o>&amp;&amp;</span> <span class=nx>dialogRef</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=c1>// running in a dialog
</span></span></span><span class="line hl"><span class=cl><span class=c1></span>  <span class=nx>isDialog</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class="line hl"><span class=cl>  <span class=nx>userId</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>dialogRef</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>id</span>
</span></span><span class="line hl"><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=c1>// running in a view
</span></span></span><span class="line hl"><span class=cl><span class=c1></span>  <span class=nx>userId</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>id</span>
</span></span><span class="line hl"><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>For this component, we have created a new <code>isDialog</code> reactive state variable that will be set to <code>true</code> if the component detects it has been loaded in a dynamic dialog. It does this by checking for the status of the <code>dialogRef</code> injected state variable. We are also now storing the ID of the user to be edited in a new <code>userId</code> reactive state variable instead of relying on the <code>props.id</code> variable, which will not be present when the component is loaded in a dialog.</p><p>So, we simply need to replace all references to <code>props.id</code> to use <code>userId</code> instead. We can also change the action that occurs when the user is successfully saved - if the component is running in a dialog, it should simply close the dialog instead of using the router to navigate back to the previous page.</p><div class=tab-panel data-tab-group=6ea6168b4be477806ecdd56323d1dd3e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("6ea6168b4be477806ecdd56323d1dd3e","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>setup</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Find Single User
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=k>return</span> <span class=nx>users</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>u</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>u</span><span class=p>.</span><span class=nx>id</span> <span class=o>==</span> <span class=nx>userId</span><span class=p>.</span><span class=nx>value</span><span class=p>)</span> <span class=o>||</span> <span class=p>{</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=nx>roles</span><span class=o>:</span> <span class=p>[]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Save User
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>save</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>errors</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=nx>userStore</span>
</span></span><span class="line hl"><span class=cl>    <span class=p>.</span><span class=nx>saveUser</span><span class=p>(</span><span class=nx>userId</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>201</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>toast</span><span class=p>.</span><span class=nx>add</span><span class=p>({</span>
</span></span><span class=line><span class=cl>          <span class=nx>severity</span><span class=o>:</span> <span class=s1>&#39;success&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>summary</span><span class=o>:</span> <span class=s1>&#39;Success&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>detail</span><span class=o>:</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>life</span><span class=o>:</span> <span class=mi>5000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class="line hl"><span class=cl>        <span class=nx>leave</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>422</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>toast</span><span class=p>.</span><span class=nx>add</span><span class=p>({</span>
</span></span><span class=line><span class=cl>          <span class=nx>severity</span><span class=o>:</span> <span class=s1>&#39;warn&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>summary</span><span class=o>:</span> <span class=s1>&#39;Warning&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>detail</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>error</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>life</span><span class=o>:</span> <span class=mi>5000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=nx>errors</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>error</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>errors</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>toast</span><span class=p>.</span><span class=nx>add</span><span class=p>({</span> <span class=nx>severity</span><span class=o>:</span> <span class=s1>&#39;error&#39;</span><span class=p>,</span> <span class=nx>summary</span><span class=o>:</span> <span class=s1>&#39;Error&#39;</span><span class=p>,</span> <span class=nx>detail</span><span class=o>:</span> <span class=nx>error</span><span class=p>,</span> <span class=nx>life</span><span class=o>:</span> <span class=mi>5000</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl><span class=c1>// Leave Component
</span></span></span><span class="line hl"><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>leave</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>isDialog</span><span class=p>.</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>    <span class=nx>dialogRef</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>close</span><span class=p>()</span>
</span></span><span class="line hl"><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>    <span class=nx>router</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;users&#39;</span> <span class=p>})</span>
</span></span><span class="line hl"><span class=cl>  <span class=p>}</span>
</span></span><span class="line hl"><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>Finally, we can make a minor update to the template to also use the <code>userId</code> value instead of <code>props.id</code></p><div class=tab-panel data-tab-group=fb24570e12d597199b92a935d2b215cf><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fb24570e12d597199b92a935d2b215cf","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>template</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;flex flex-col gap-3 max-w-xl justify-items-center&#34;</span><span class=p>&gt;</span>
</span></span><span class="line hl"><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;text-xl text-center m-1&#34;</span><span class=p>&gt;{{</span> <span class=nx>userId</span> <span class=o>?</span> <span class=s1>&#39;Edit User&#39;</span> <span class=o>:</span> <span class=s1>&#39;New User&#39;</span> <span class=p>}}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--</span> <span class=nx>other</span> <span class=nx>code</span> <span class=nx>omitted</span> <span class=nx>here</span> <span class=o>--&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl>    <span class=p>&lt;</span><span class=nt>Button</span> <span class=na>severity</span><span class=o>=</span><span class=s>&#34;secondary&#34;</span> <span class=nt>@click</span><span class=s>=&#34;leave&#34;</span> <span class=na>label</span><span class=o>=</span><span class=s>&#34;Cancel&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>template</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>That&rsquo;s all it takes! Now, when we click the <strong>New User</strong> or <strong>Edit User</strong> buttons on our <code>UsersList</code> component, we&rsquo;ll see a pop-up dialog that contains our <code>UserEdit</code> component instead of being taken to an entirely new page.</p><p><a href=#R-image-e5c43e0dcb23287d3131f4e3353cedfe class=lightbox-link><img alt=DynamicDialog class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/07/dynamicdialog.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-e5c43e0dcb23287d3131f4e3353cedfe><img alt=DynamicDialog class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/07/dynamicdialog.gif></a></p><h2 id=a-bug-reactive-state-across-components>A Bug! Reactive State Across Components</h2><p>A very keen eye may notice a bug in the implementation of this component already - what if the user changes a value but then clicks the <strong>Cancel</strong> button on the modal dialog? Let&rsquo;s see what that looks like:</p><p><a href=#R-image-14826c7267f56d2a5375213308e62361 class=lightbox-link><img alt=DynamicDialogBug class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogbug.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-14826c7267f56d2a5375213308e62361><img alt=DynamicDialogBug class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogbug.gif></a></p><p>As we can see, the edits made in the <code>UserEdit</code> dialog are immediately reflected in the contents of the <code>UsersList</code> component as well. This is because they are both using the same Pinia store and referencing the same list of users in both components. So, this can present all sorts of strange issues in our program.</p><p>There are at least a couple of different ways we can go about fixing this:</p><ol><li>When the dialog closes, we can call <code>userStore.hydrate()</code> from the <code>UsersList</code> component to ensure that it has the latest version of the data from the server. However, if we do this, we could end up calling it twice when a user is saved, since the <code>User</code> store already does this.</li><li>In our <code>EditUser</code> component, we can make sure we are editing a deep copy of our user, and not the same user reference as the one in our Pinia store.</li></ol><p>Let&rsquo;s implement the second solution. Thankfully, it is as simple as using <code>JSON.parse</code> and <code>JSON.stringify</code> to create a quick deep copy of the user we are editing. We can do this in our computed Vue state variable in that component:</p><div class=tab-panel data-tab-group=32cb34baab14119f1ea27544c4d70de3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("32cb34baab14119f1ea27544c4d70de3","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-vue data-lang=vue><span class=line><span class=cl><span class=c1>// -=-=- other code omitted here -=-=-
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Find Single User
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=nx>computed</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=cl>  <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span>
</span></span><span class="line hl"><span class=cl>    <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>users</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>u</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>u</span><span class=p>.</span><span class=nx>id</span> <span class=o>==</span> <span class=nx>userId</span><span class=p>.</span><span class=nx>value</span><span class=p>)</span> <span class=o>||</span> <span class=p>{</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=nx>roles</span><span class=o>:</span> <span class=p>[]</span> <span class=p>}),</span>
</span></span><span class="line hl"><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>// -=-=- other code omitted here -=-=-</span></span></span></code></pre></div></div></div></div></div><p>With that change in place, we no longer see the bug in our output:</p><p><a href=#R-image-6535546a8a291449948eae56abc0f566 class=lightbox-link><img alt="DynamicDialog Fixed" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogfixed.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6535546a8a291449948eae56abc0f566><img alt="DynamicDialog Fixed" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogfixed.gif></a></p><footer class=footline></footer></article></div></main></div></div><script src=/cis526/js/clipboard.min.js?1746553392 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1746553392 defer></script><script src=/cis526/js/theme.js?1746553392 defer></script><script src=/cis526/js/tele-scroll.js?1746553392 defer></script></body></html>