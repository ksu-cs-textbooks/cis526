<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Reusing Components :: CIS 526 Textbook"><meta name=twitter:description content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/02-reusing/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Reusing Components :: CIS 526 Textbook"><meta property="og:description" content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-04-26T15:56:55-05:00"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Reusing Components :: CIS 526 Textbook"><meta itemprop=description content="YouTube Video Reusing Components One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a PrimeVue DynamicDialog component to allow us to open the UserEdit component in a popup dialog on our UsersList component."><meta itemprop=dateModified content="2025-04-26T15:56:55-05:00"><meta itemprop=wordCount content="1588"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Reusing Components :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-examples/07-advanced-topics/02-reusing/index.html rel=canonical type=text/html title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/02-reusing/index.xml rel=alternate type=application/rss+xml title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/02-reusing/tele.html rel=alternate type=text/html title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/x-examples/07-advanced-topics/02-reusing/embed.html rel=alternate type=text/html title="Reusing Components :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1768424848 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1768424848 defer></script><script src=/cis526/js/search-lunr.min.js?1768424848 defer></script><script src=/cis526/js/search.min.js?1768424848 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1768424848"</script><script src=/cis526/js/lunr/lunr.min.js?1768424848 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1768424848 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1768424848 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1768424848 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1768424848 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1768424848 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1768424848 rel=stylesheet><link href=/cis526/css/theme.min.css?1768424848 rel=stylesheet><link href=/cis526/css/format-print.min.css?1768424848 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-examples/07-advanced-topics/02-reusing/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1768424848 rel=stylesheet></head><body class="mobile-support print" data-url=/cis526/x-examples/07-advanced-topics/02-reusing/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#reusing-components>Reusing Components</a></li><li><a href=#installing-dynamicdialog>Installing DynamicDialog</a></li><li><a href=#updating-userslist-to-use-dynamicdialog>Updating UsersList to use DynamicDialog</a></li><li><a href=#updating-useredit-component>Updating UserEdit Component</a></li><li><a href=#a-bug-reactive-state-across-components>A Bug! Reactive State Across Components</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement class=a11y-only><a itemprop=item href=/cis526/index.html><span itemprop=name>Web Application Development</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis526/x-examples/index.html><span itemprop=name>Example Projects</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis526/x-examples/07-advanced-topics/index.html><span itemprop=name>Advanced Topics</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Reusing Components</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/ksu-cs-textbooks/cis526/edit/main/content/x-examples/07-advanced-topics/02-reusing.md rel=external target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/02-reusing/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/01-pinia/index.html title="Pinia (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/03-prep/index.html title="Preparing for Deployment (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more><div class="topbar-button topbar-button-embed" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/02-reusing/embed.html title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a></div><div class="topbar-button topbar-button-tele" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/07-advanced-topics/02-reusing/tele.html title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a></div></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-examples" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=reusing-components>Reusing Components</h1><a href="https://www.youtube.com/watch?v=6skldOnt7Sc">YouTube Video</a><h2 id=reusing-components>Reusing Components</h2><p>One of the many amazing features of a front-end framework such as Vue is the ability to reuse components in very powerful ways. For example, right now our application uses an entirely separate view and component to handle editing and updating users, but that means that we have to constantly jump back and forth between two views when working with users. Now that those views are using a shared Pinia store, we can use a <a href=https://primevue.org/dynamicdialog/ rel=external target=_blank>PrimeVue DynamicDialog</a> component to allow us to open the <code>UserEdit</code> component in a popup dialog on our <code>UsersList</code> component.</p><h2 id=installing-dynamicdialog>Installing DynamicDialog</h2><p>To begin, we must install the service for this component in our <code>src/main.js</code> along with the other services for PrimeVue components:</p><div class=tab-panel data-tab-group=724ea6f5cca88205bd5ff28bc5ee10a3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcmainjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("724ea6f5cca88205bd5ff28bc5ee10a3","srcmainjs")'>
<span class=tab-nav-text>src/main.js</span></button></div><div class=tab-content-container><div data-tab-item=srcmainjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Main Vue application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createApp</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createPinia</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;pinia&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>PrimeVue</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/config&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Aura</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primeuix/themes/aura&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Tooltip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/tooltip&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ToastService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/toastservice&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ConfirmationService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/confirmationservice&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DialogService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/dialogservice&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create Vue App
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createApp</span>(<span style=color:#a6e22e>App</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Install Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>createPinia</span>())
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>router</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>PrimeVue</span>, {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Theme Configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>preset</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Aura</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>darkModeSelector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;.app-dark-mode&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>ToastService</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>ConfirmationService</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>DialogService</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>Then, we can add the single instance of the component to our top-level <code>App.vue</code> component along with the other service components:</p><div class=tab-panel data-tab-group=4edca3ae3bc13f810531dcf1b7eb7469><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcappvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("4edca3ae3bc13f810531dcf1b7eb7469","srcappvue")'>
<span class=tab-nav-text>src/App.vue</span></button></div><div class=tab-content-container><div data-tab-item=srcappvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Main Vue Application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Components
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Toast</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/toast&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ConfirmDialog</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/confirmdialog&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DynamicDialog</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/dynamicdialog&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TopMenu</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./components/layout/TopMenu.vue&#39;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>header</span>&gt;&lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>nav</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>Navigation</span> <span style=color:#a6e22e>Menu</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>TopMenu</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>nav</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;m-2&#34;</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>Main</span> <span style=color:#a6e22e>Application</span> <span style=color:#a6e22e>View</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>RouterView</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>footer</span>&gt;&lt;/<span style=color:#f92672>footer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Toast</span> <span style=color:#a6e22e>position</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bottom-right&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>ConfirmDialog</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>DynamicDialog</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>That&rsquo;s all it takes to make this feature available throughout our application.</p><h2 id=updating-userslist-to-use-dynamicdialog>Updating UsersList to use DynamicDialog</h2><p>Now, in our <code>UsersList</code> component, we simply have to add a few imports as well as function to load the component in a dialog box:</p><div class=tab-panel data-tab-group=977fbe98cb7cc475b669c18da2e84169><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("977fbe98cb7cc475b669c18da2e84169","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span>, <span style=color:#a6e22e>defineAsyncComponent</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>InputText</span>, <span style=color:#a6e22e>MultiSelect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FilterMatchMode</span>, <span style=color:#a6e22e>FilterService</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primevue/core/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Button</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/button&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useToast</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/usetoast&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toast</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useToast</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useConfirm</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useConfirm</span>()
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useDialog</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/usedialog&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dialog</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useDialog</span>();
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userEditComponent</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineAsyncComponent</span>(() =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;./UserEdit.vue&#39;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Load Dialog
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>editDialog</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>dialog</span>.<span style=color:#a6e22e>open</span>(<span style=color:#a6e22e>userEditComponent</span>, {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>props</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>style</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;40vw&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      },
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>modal</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>id</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex;background-color:#3c3d38><span>  });
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Notice in the <code>dialog.open</code> function call, we are including the <code>userEditComponent</code> that we are loading asynchronously in the background using the <code>defineAsyncComponent</code> function in Vue. This allows us to load the main <code>UsersList</code> component fully first, and then in the background it will load the <code>UserEdit</code> component as needed. We are also passing along the <code>id</code> of the user to be edited as part of the <code>data</code> that is sent to the component.</p><p>Finally, in the template, we just replace the click handlers for the <strong>New</strong> and <strong>Edit</strong> buttons to call this new <code>editDialog</code> function:</p><div class=tab-panel data-tab-group=a47c9c1aa81f8802a5c3d31bac1f8169><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a47c9c1aa81f8802a5c3d31bac1f8169","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>  &gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>header</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex justify-between&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;New User&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-user-plus&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;editDialog()&#34;</span>
</span></span><span style=display:flex><span>        /&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Actions&#34;</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;min-width: 8rem&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;slotProps&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-pencil&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>outlined</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>rounded</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;editDialog(slotProps.data.id)&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;&#39;</span><span style=color:#a6e22e>Edit</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>
</span></span><span style=display:flex><span>          /&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-trash&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>outlined</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>rounded</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;danger&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;confirmDelete(slotProps.data.id)&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;&#39;</span><span style=color:#a6e22e>Delete</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>
</span></span><span style=display:flex><span>          /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now, when we click those buttons, it will open the <code>EditUser</code> component in a modal popup dialog instead of directing users to a new route. Of course, on some pages, we may need to check that the user has specific roles before allowing the user to actually load the popup, just like we have to check for those roles before the user navigates to those routes. Since we are now bypassing the Vue Router, any logic in the router may need to be recreated here.</p><h2 id=updating-useredit-component>Updating UserEdit Component</h2><p>Finally, we must make a few minor tweaks to the <code>UserEdit</code> component so that it can run seamlessly in both a stand-alone view as well as part of a popup dialog. The major change comes in the way the incoming data is received, and what should happen when the user is successfully saved.</p><p>The PrimeVue DynamicDialog service uses Vue&rsquo;s <a href=https://vuejs.org/guide/components/provide-inject rel=external target=_blank>Provide / Inject</a> interface to send data to the component loaded in a dialog. So, in our component, we must declare a few additional state variables, as well as small piece of code to detect whether it is running in a dialog or as a standalone component in a view.</p><div class=tab-panel data-tab-group=2d4cc7a0ab0008ad335f4bea52d0afd6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2d4cc7a0ab0008ad335f4bea52d0afd6","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span>, <span style=color:#a6e22e>computed</span>, <span style=color:#a6e22e>inject</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>errors</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>isDialog</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>(<span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>userId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Detect Dialog
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>dialogRef</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>inject</span>(<span style=color:#e6db74>&#39;dialogRef&#39;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>dialogRef</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>dialogRef</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#75715e>// running in a dialog
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>  <span style=color:#a6e22e>isDialog</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>userId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dialogRef</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>id</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#75715e>// running in a view
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>  <span style=color:#a6e22e>userId</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>For this component, we have created a new <code>isDialog</code> reactive state variable that will be set to <code>true</code> if the component detects it has been loaded in a dynamic dialog. It does this by checking for the status of the <code>dialogRef</code> injected state variable. We are also now storing the ID of the user to be edited in a new <code>userId</code> reactive state variable instead of relying on the <code>props.id</code> variable, which will not be present when the component is loaded in a dialog.</p><p>So, we simply need to replace all references to <code>props.id</code> to use <code>userId</code> instead. We can also change the action that occurs when the user is successfully saved - if the component is running in a dialog, it should simply close the dialog instead of using the router to navigate back to the previous page.</p><div class=tab-panel data-tab-group=cd48b681a1bb30a58d07db9872479ff1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("cd48b681a1bb30a58d07db9872479ff1","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Find Single User
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>find</span>((<span style=color:#a6e22e>u</span>) =&gt; <span style=color:#a6e22e>u</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>userId</span>.<span style=color:#a6e22e>value</span>) <span style=color:#f92672>||</span> { <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>roles</span><span style=color:#f92672>:</span> [] }
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Save User
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>save</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>userStore</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    .<span style=color:#a6e22e>saveUser</span>(<span style=color:#a6e22e>userId</span>.<span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>user</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>201</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Success&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>message</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>leave</span>()
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>422</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warn&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Warning&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>error</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>errors</span>
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Error&#39;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Leave Component
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>leave</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isDialog</span>.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>dialogRef</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>close</span>()
</span></span><span style=display:flex;background-color:#3c3d38><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;users&#39;</span> })
</span></span><span style=display:flex;background-color:#3c3d38><span>  }
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Finally, we can make a minor update to the template to also use the <code>userId</code> value instead of <code>props.id</code></p><div class=tab-panel data-tab-group=c37a9a1e4c2240bbd292d9ea2ce3b6b5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c37a9a1e4c2240bbd292d9ea2ce3b6b5","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex flex-col gap-3 max-w-xl justify-items-center&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>h1</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-xl text-center m-1&#34;</span>&gt;{{ <span style=color:#a6e22e>userId</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;Edit User&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;New User&#39;</span> }}&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;secondary&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;leave&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Cancel&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>That&rsquo;s all it takes! Now, when we click the <strong>New User</strong> or <strong>Edit User</strong> buttons on our <code>UsersList</code> component, we&rsquo;ll see a pop-up dialog that contains our <code>UserEdit</code> component instead of being taken to an entirely new page.</p><p><a href=#R-image-a4272a94aa3658e423389fc8462ba9a2 class=lightbox-link><img alt=DynamicDialog class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/07/dynamicdialog.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a4272a94aa3658e423389fc8462ba9a2><img alt=DynamicDialog class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/07/dynamicdialog.gif></a></p><h2 id=a-bug-reactive-state-across-components>A Bug! Reactive State Across Components</h2><p>A very keen eye may notice a bug in the implementation of this component already - what if the user changes a value but then clicks the <strong>Cancel</strong> button on the modal dialog? Let&rsquo;s see what that looks like:</p><p><a href=#R-image-79d24ed7efa511a186aa44d32f23e97a class=lightbox-link><img alt=DynamicDialogBug class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogbug.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-79d24ed7efa511a186aa44d32f23e97a><img alt=DynamicDialogBug class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogbug.gif></a></p><p>As we can see, the edits made in the <code>UserEdit</code> dialog are immediately reflected in the contents of the <code>UsersList</code> component as well. This is because they are both using the same Pinia store and referencing the same list of users in both components. So, this can present all sorts of strange issues in our program.</p><p>There are at least a couple of different ways we can go about fixing this:</p><ol><li>When the dialog closes, we can call <code>userStore.hydrate()</code> from the <code>UsersList</code> component to ensure that it has the latest version of the data from the server. However, if we do this, we could end up calling it twice when a user is saved, since the <code>User</code> store already does this.</li><li>In our <code>EditUser</code> component, we can make sure we are editing a deep copy of our user, and not the same user reference as the one in our Pinia store.</li></ol><p>Let&rsquo;s implement the second solution. Thankfully, it is as simple as using <code>JSON.parse</code> and <code>JSON.stringify</code> to create a quick deep copy of the user we are editing. We can do this in our computed Vue state variable in that component:</p><div class=tab-panel data-tab-group=2e3490eb9c89c4f6602a6e9f15aa3b0f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2e3490eb9c89c4f6602a6e9f15aa3b0f","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Find Single User
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>parse</span>(
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>find</span>((<span style=color:#a6e22e>u</span>) =&gt; <span style=color:#a6e22e>u</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>userId</span>.<span style=color:#a6e22e>value</span>) <span style=color:#f92672>||</span> { <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>roles</span><span style=color:#f92672>:</span> [] }),
</span></span><span style=display:flex;background-color:#3c3d38><span>  )
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>// -=-=- other code omitted here -=-=-</span></span></span></code></pre></div></div></div></div></div><p>With that change in place, we no longer see the bug in our output:</p><p><a href=#R-image-becb55f3e1b83cfb6d013cef4723e587 class=lightbox-link><img alt="DynamicDialog Fixed" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogfixed.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-becb55f3e1b83cfb6d013cef4723e587><img alt="DynamicDialog Fixed" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/07/dynamicdialogfixed.gif></a></p><footer class=footline></footer></article></div></main><div class=git-footer><p class=theme-version-footer>8.0.0</p><p>Last modified by:
<i class='fa-fw fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis526/commit/e5daef67cd687cb59770f3a14b78173cff2d90ce>Apr 26, 2025</a></p></div></div><script src=/cis526/js/clipboard/clipboard.min.js?1768424848 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1768424848 defer></script><script src=/cis526/js/theme.min.js?1768424848 defer></script></body></html>