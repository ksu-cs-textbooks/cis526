<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="This example project builds on the previous Vue.js starter project by scaffolding a CRUD frontend for the basic users and roles tables.
Project Deliverables At the end of this example, we will have a project with the following features:
Most menu items and routes are protected and only allow users with specific roles to view/access them A page that lists all roles in the application for anyone with the manage_users role. Roles are not editable. A page that lists all users in a data table for anyone with the manage_users role. Helpful Columns on that page should be searchable and sortable, as well as the ability to filter by role A page to edit existing users, including updating their roles A page to create new users and assign new roles A method to delete existing users Prior Work This project picks up right where the last one left off, so if you havenâ€™t completed that one yet, go back and do that before starting this one."><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Vue.js CRUD App :: CIS 526 Textbook"><meta name=twitter:description content="This example project builds on the previous Vue.js starter project by scaffolding a CRUD frontend for the basic users and roles tables.
Project Deliverables At the end of this example, we will have a project with the following features:
Most menu items and routes are protected and only allow users with specific roles to view/access them A page that lists all roles in the application for anyone with the manage_users role. Roles are not editable. A page that lists all users in a data table for anyone with the manage_users role. Helpful Columns on that page should be searchable and sortable, as well as the ability to filter by role A page to edit existing users, including updating their roles A page to create new users and assign new roles A method to delete existing users Prior Work This project picks up right where the last one left off, so if you havenâ€™t completed that one yet, go back and do that before starting this one."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/06-vue-crud-app/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Vue.js CRUD App :: CIS 526 Textbook"><meta property="og:description" content="This example project builds on the previous Vue.js starter project by scaffolding a CRUD frontend for the basic users and roles tables.
Project Deliverables At the end of this example, we will have a project with the following features:
Most menu items and routes are protected and only allow users with specific roles to view/access them A page that lists all roles in the application for anyone with the manage_users role. Roles are not editable. A page that lists all users in a data table for anyone with the manage_users role. Helpful Columns on that page should be searchable and sortable, as well as the ability to filter by role A page to edit existing users, including updating their roles A page to create new users and assign new roles A method to delete existing users Prior Work This project picks up right where the last one left off, so if you havenâ€™t completed that one yet, go back and do that before starting this one."><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Vue.js CRUD App :: CIS 526 Textbook"><meta itemprop=description content="This example project builds on the previous Vue.js starter project by scaffolding a CRUD frontend for the basic users and roles tables.
Project Deliverables At the end of this example, we will have a project with the following features:
Most menu items and routes are protected and only allow users with specific roles to view/access them A page that lists all roles in the application for anyone with the manage_users role. Roles are not editable. A page that lists all users in a data table for anyone with the manage_users role. Helpful Columns on that page should be searchable and sortable, as well as the ability to filter by role A page to edit existing users, including updating their roles A page to create new users and assign new roles A method to delete existing users Prior Work This project picks up right where the last one left off, so if you havenâ€™t completed that one yet, go back and do that before starting this one."><meta itemprop=dateModified content="2025-04-12T15:48:56-05:00"><meta itemprop=wordCount content="169"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Vue.js CRUD App :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-examples/06-vue-crud-app/index.html rel=canonical type=text/html title="Vue.js CRUD App :: CIS 526 Textbook"><link href=/cis526/x-examples/06-vue-crud-app/index.xml rel=alternate type=application/rss+xml title="Vue.js CRUD App :: CIS 526 Textbook"><link href=/cis526/x-examples/06-vue-crud-app/tele.html rel=alternate type=text/html title="Vue.js CRUD App :: CIS 526 Textbook"><link href=/cis526/x-examples/06-vue-crud-app/embed.html rel=alternate type=text/html title="Vue.js CRUD App :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1755561291 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1755561291 defer></script><script src=/cis526/js/search-lunr.min.js?1755561291 defer></script><script src=/cis526/js/search.min.js?1755561291 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1755561291"</script><script src=/cis526/js/lunr/lunr.min.js?1755561291 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1755561291 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1755561291 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1755561291 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1755561291 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1755561291 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1755561291 rel=stylesheet><link href=/cis526/css/theme.min.css?1755561291 rel=stylesheet><link href=/cis526/css/format-print.min.css?1755561291 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-examples/06-vue-crud-app/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1755561291 rel=stylesheet></head><body class="mobile-support print" data-url=/cis526/x-examples/06-vue-crud-app/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#project-deliverables>Project Deliverables</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement class=a11y-only><a itemprop=item href=/cis526/index.html><span itemprop=name>Web Application Development</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis526/x-examples/index.html><span itemprop=name>Example Projects</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Vue.js CRUD App</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-edit" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=https://github.com/ksu-cs-textbooks/cis526/edit/main/content/x-examples/06-vue-crud-app/_index.md rel=external target=_blank title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a></div><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/06-vue-crud-app/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/05-vue-starter/11-accessing-api/index.html title="Accessing API (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/06-vue-crud-app/01-roles/index.html title="Roles View (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more><div class="topbar-button topbar-button-embed" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/06-vue-crud-app/embed.html title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a></div><div class="topbar-button topbar-button-tele" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/06-vue-crud-app/tele.html title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a></div></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-examples" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=vuejs-crud-app>Vue.js CRUD App</h1><p>This example project builds on the previous Vue.js starter project by scaffolding a CRUD frontend for the basic users and roles tables.</p><h2 id=project-deliverables>Project Deliverables</h2><p>At the end of this example, we will have a project with the following features:</p><ol><li>Most menu items and routes are protected and only allow users with specific roles to view/access them</li><li>A page that lists all roles in the application for anyone with the <code>manage_users</code> role. Roles are not editable.</li><li>A page that lists all users in a data table for anyone with the <code>manage_users</code> role.<ol><li>Helpful Columns on that page should be searchable and sortable, as well as the ability to filter by role</li><li>A page to edit existing users, including updating their roles</li><li>A page to create new users and assign new roles</li><li>A method to delete existing users</li></ol></li></ol><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Prior Work</summary><div class=box-content><p>This project picks up right where the last one left off, so if you haven&rsquo;t completed that one yet, go back and do that before starting this one.</p></div></details><p>Let&rsquo;s get started!</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Vue.js CRUD App</h1><article class=default><header class=headline></header><h1 id=roles-view>Roles View</h1><a href="https://www.youtube.com/watch?v=n1TMdZpo-Wc">YouTube Video</a><h2 id=roles-view>Roles View</h2><p>To start this project, let&rsquo;s add a new view and a new component to explore the roles available in our application.</p><p>First, let&rsquo;s create a simple component skeleton in a new <code>src/components/roles/</code> folder. We&rsquo;ll name it the <code>RolesList</code> component:</p><div class=tab-panel data-tab-group=239887a9248340cd75a4ab5337bf6061><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsrolesroleslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("239887a9248340cd75a4ab5337bf6061","srccomponentsrolesroleslistvue")'>
<span class=tab-nav-text>src/components/roles/RolesList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsrolesroleslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Roles List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Card</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create Reactive State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roles</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Load Roles
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/roles&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Card</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in roles&#34; :key=&#34;role.id&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>title</span>&gt;<span style=color:#a6e22e>Role</span><span style=color:#f92672>:</span> {{ <span style=color:#a6e22e>role</span>.<span style=color:#a6e22e>role</span> }}&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Card</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>This component should look very familiar - it is based on the <code>TestUser</code> component we developed in the previous tutorial.</p><p>Next, we should create a <code>RolesView.vue</code> component in the <code>src/views</code> folder to load that component on a page:</p><div class=tab-panel data-tab-group=83525f69dd5057b69f9278e1dd2cb360><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcviewsrolesviewvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("83525f69dd5057b69f9278e1dd2cb360","srcviewsrolesviewvue")'>
<span class=tab-nav-text>src/views/RolesView.vue</span></button></div><div class=tab-content-container><div data-tab-item=srcviewsrolesviewvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RolesList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../components/roles/RolesList.vue&#39;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>RolesList</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>After that, we should add this page to our router:</p><div class=tab-panel data-tab-group=8fbc8997d6789400ec9fbede0aef65b3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcrouterindexjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("8fbc8997d6789400ec9fbede0aef65b3","srcrouterindexjs")'>
<span class=tab-nav-text>src/router/index.js</span></button></div><div class=tab-content-container><div data-tab-item=srcrouterindexjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRouter</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure History Mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>history</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createWebHistory</span>(<span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>BASE_URL</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure routes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>routes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;home&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>HomeView</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/about&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;about&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#75715e>// route level code-splitting
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// this generates a separate chunk (About.[hash].js) for this route
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// which is lazy-loaded when the route is visited.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/AboutView.vue&#39;</span>),
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/profile&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;profile&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/ProfileView.vue&#39;</span>),
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/roles&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;roles&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/RolesView.vue&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>Finally, let&rsquo;s also add it to our list of menu options in the <code>TopMenu</code> component:</p><div class=tab-panel data-tab-group=ae1fa318cd359f198718a4064cc560d9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentslayouttopmenuvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("ae1fa318cd359f198718a4064cc560d9","srccomponentslayouttopmenuvue")'>
<span class=tab-nav-text>src/components/layout/TopMenu.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentslayouttopmenuvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Home&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-home&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;home&#39;</span> })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;About&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-info-circle&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;about&#39;</span> })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex;background-color:#3c3d38><span>  {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Roles&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-id-card&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;roles&#39;</span> })
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>])
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With those changes in place, we should be able to view the list of available roles in our application by clicking the new Roles link in the top menu bar:</p><p><a href=#R-image-34ade033e084c998ae2729b6731b59b4 class=lightbox-link><img alt="Roles View" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/crud_1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-34ade033e084c998ae2729b6731b59b4><img alt="Roles View" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/crud_1.png></a></p><p>Our application will even redirect users to the CAS server to authenticate if they aren&rsquo;t already logged in!</p><p>However, what if we log in using the <code>user</code> username instead of <code>admin</code>? Will this page still work? Unfortunately, because the <code>/api/v1/roles</code> API route requires a user to have the <code>manage_users</code> role, it will respond with an HTTP 401 error. We can see these errors in the console of our web browser:</p><p><a href=#R-image-42a47eb3f44fce5ded58c67dbf405950 class=lightbox-link><img alt="Bad Connection" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/crud_2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-42a47eb3f44fce5ded58c67dbf405950><img alt="Bad Connection" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/crud_2.png></a></p><p>So, we need to add some additional code to our application to make sure that users only see the pages and links the are actually able to access.</p><h2 id=hiding-menu-items>Hiding Menu Items</h2><p>First, let&rsquo;s explore how we can hide various menu items from our top menu bar based on the roles assigned to our users. To enable this, we can tag each item in the menu that has restricted access with a list of roles that are able to access that page:</p><div class=tab-panel data-tab-group=71920a260565ea54c51f3808f974c4fe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentslayouttopmenuvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("71920a260565ea54c51f3808f974c4fe","srccomponentslayouttopmenuvue")'>
<span class=tab-nav-text>src/components/layout/TopMenu.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentslayouttopmenuvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Home&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-home&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;home&#39;</span> })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;About&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-info-circle&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;about&#39;</span> })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Roles&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-id-card&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;roles&#39;</span> })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>roles</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;manage_users&#39;</span>]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Then, we can create a <a href=https://vuejs.org/guide/essentials/computed.html rel=external target=_blank>Vue Computed Property</a> to filter the list of items used in the template:</p><div class=tab-panel data-tab-group=d2d8ce6c0e5e3be31621d1e2b4b7cb90><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentslayouttopmenuvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d2d8ce6c0e5e3be31621d1e2b4b7cb90","srccomponentslayouttopmenuvue")'>
<span class=tab-nav-text>src/components/layout/TopMenu.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentslayouttopmenuvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Top menu bar of the entire application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span>, <span style=color:#a6e22e>computed</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Components
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Menubar</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/menubar&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ThemeToggle</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./ThemeToggle.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UserProfile</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./UserProfile.vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Stores
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useTokenStore</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/stores/Token&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tokenStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useTokenStore</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>visible_items</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>item</span>) =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#75715e>// If the item lists any roles
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>roles</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#75715e>// Assume the user must be logged in to view it
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>tokenStore</span>.<span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#75715e>// If the roles is a string containing an asterisk
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>roles</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;*&#34;</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#75715e>// Allow all roles to view
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#75715e>// Otherwise, check if any role matches a role the user has
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>          <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>r</span>) =&gt; <span style=color:#a6e22e>tokenStore</span>.<span style=color:#a6e22e>has_role</span>(<span style=color:#a6e22e>r</span>))
</span></span><span style=display:flex;background-color:#3c3d38><span>        }
</span></span><span style=display:flex;background-color:#3c3d38><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#75715e>// If not logged in, hide item
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>      }
</span></span><span style=display:flex;background-color:#3c3d38><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#75715e>// If no roles listed, show item even if not logged in
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex;background-color:#3c3d38><span>})
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>In this function, we are filtering the the menu items based on the roles. If they have a set of roles listed, we check to see if it is an asterisk - if so, all roles are allowed. Otherwise, we assume that it is a list of roles, and check to see if at least one role matches a role that the user has by checking the <code>token</code> store&rsquo;s <code>has_role</code> getter method. Finally, if no roles are listed, we assume that the item should be visible to users even without logging in.</p><p>To use this new computed property, we just replace the <code>items</code> entry in the template with the new <code>computed_items</code> property:</p><div class=tab-panel data-tab-group=ffd0d446a62934f813aa192fe2153e6f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentslayouttopmenuvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("ffd0d446a62934f813aa192fe2153e6f","srccomponentslayouttopmenuvue")'>
<span class=tab-nav-text>src/components/layout/TopMenu.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentslayouttopmenuvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Menubar</span> <span style=color:#f92672>:model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;visible_items&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>start</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://placehold.co/40x40&#34;</span> <span style=color:#a6e22e>alt</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Placeholder Logo&#34;</span> /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>end</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex items-center gap-1&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>ThemeToggle</span> /&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>UserProfile</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Menubar</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>That should properly hide menu items from the user based on their roles. Feel free to try it out!</p><h2 id=protecting-routes>Protecting Routes</h2><p>Of course, hiding the item from the menu does not prevent the user from manually typing in the route path in the URL and trying to access the page that way. So, we must also add some additional logic to our router to ensure that user&rsquo;s can&rsquo;t access. For that, we can add a <a href=https://router.vuejs.org/guide/advanced/navigation-guards.html#Per-Route-Guard rel=external target=_blank>Per-Route Guard</a> following a very similar approach. In our <code>src/router/index.js</code> file, we can add a new generator function to create a route guard based on roles, and then apply that guard as the <code>beforeEnter</code> property for a route:</p><div class=tab-panel data-tab-group=24d1a295b2c65faca90d9cd741f6b139><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcrouterindexjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("24d1a295b2c65faca90d9cd741f6b139","srcrouterindexjs")'>
<span class=tab-nav-text>src/router/index.js</span></button></div><div class=tab-content-container><div data-tab-item=srcrouterindexjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> * Router Guard Function to check for role before entering route
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> * 
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> * @param roles a list of roles permitted to enter the route
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> * @return boolean true if the navigation is permitted, else returns to the home page
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>requireRoles</span> <span style=color:#f92672>=</span> (...<span style=color:#a6e22e>roles</span>) =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>return</span> () =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tokenStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useTokenStore</span>()
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>allow</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>r</span>) =&gt; <span style=color:#a6e22e>tokenStore</span>.<span style=color:#a6e22e>has_role</span>(<span style=color:#a6e22e>r</span>))
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>allow</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#75715e>// allow navigation
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#75715e>// redirect to home
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;home&#39;</span>}
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex;background-color:#3c3d38><span>  }
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRouter</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure History Mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>history</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createWebHistory</span>(<span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>BASE_URL</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure routes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>routes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;home&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>HomeView</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/about&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;about&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#75715e>// route level code-splitting
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// this generates a separate chunk (About.[hash].js) for this route
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// which is lazy-loaded when the route is visited.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/AboutView.vue&#39;</span>),
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/profile&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;profile&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/ProfileView.vue&#39;</span>),
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/roles&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;roles&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/RolesView.vue&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>beforeEnter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>requireRoles</span>(<span style=color:#e6db74>&#34;manage_users&#34;</span>)
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>Now, even if we try to type the <code>/roles</code> path into the address bar in our web browser, it won&rsquo;t allow us to reach that page unless we are logged in to a user account that has the correct role.</p><h2 id=reactive-style>Reactive Style</h2><p>We can also use Tailwind to add some reactive style to our components. For example, we can use the <a href=https://tailwindcss.com/docs/grid-template-columns rel=external target=_blank>Grid</a> layout options to place the components in a grid view:</p><div class=tab-panel data-tab-group=a781404b24f4a215185c83ba1f427e3b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsrolesroleslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a781404b24f4a215185c83ba1f427e3b","srccomponentsrolesroleslistvue")'>
<span class=tab-nav-text>src/components/roles/RolesList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsrolesroleslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grid grid-cols-1 xl:grid-cols-4 lg:grid-cols-3 sm:grid-cols-2 gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Card</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in roles&#34; :key=&#34;role.id&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>title</span>&gt;<span style=color:#a6e22e>Role</span><span style=color:#f92672>:</span> {{ <span style=color:#a6e22e>role</span>.<span style=color:#a6e22e>role</span> }}&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Card</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>This will give us a responsive layout that adjusts the number of columns based on the width of the screen:</p><p><a href=#R-image-636aac6406b8e147b95c88aba64ea6f4 class=lightbox-link><img alt="Responsive Layout" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-636aac6406b8e147b95c88aba64ea6f4><img alt="Responsive Layout" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_1.png></a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=users-table>Users Table</h1><a href="https://www.youtube.com/watch?v=0eO1E74fX5Y">YouTube Video</a><h2 id=users-table>Users Table</h2><p>Now that we have explored the basics of adding new menu items and routes to our application, let&rsquo;s start working on the components to view and edit the users available in our application. To begin, we&rsquo;ll work on the *<em>GET ALL</em> route, which will allow us to view all of the users on our system. For this, we&rsquo;ll use the <a href=https://primevue.org/datatable/ rel=external target=_blank>PrimeVue DataTable</a> component, which is one of the most powerful components available in the PrimeVue library.</p><p>First, before we can do that, we must set up our new view and a route to get there, as well as a menu option. So, let&rsquo;s go through that really quickly.</p><p>First, we&rsquo;ll add a new route to the Vue router:</p><div class=tab-panel data-tab-group=07e73a417e893615dddb64b1dc0c65eb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcrouterindexjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("07e73a417e893615dddb64b1dc0c65eb","srcrouterindexjs")'>
<span class=tab-nav-text>src/router/index.js</span></button></div><div class=tab-content-container><div data-tab-item=srcrouterindexjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRouter</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure History Mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>history</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createWebHistory</span>(<span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>BASE_URL</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure routes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>routes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/users&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;users&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/UsersListView.vue&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>beforeEnter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>requireRoles</span>(<span style=color:#e6db74>&#34;manage_users&#34;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>We&rsquo;ll also add that route as a menu item in our <code>TopMenu.vue</code> component:</p><div class=tab-panel data-tab-group=b388c5bf2388b63a16f15c40f96af635><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentslayouttopmenuvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b388c5bf2388b63a16f15c40f96af635","srccomponentslayouttopmenuvue")'>
<span class=tab-nav-text>src/components/layout/TopMenu.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentslayouttopmenuvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([
</span></span><span style=display:flex><span>  <span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Users&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-users&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>command</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;users&#39;</span> })
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>roles</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;manage_users&#39;</span>]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Then, we&rsquo;ll create a new view named <code>UsersListView.vue</code> that will contain our table component:</p><div class=tab-panel data-tab-group=725d7882fd9a037af4b441fde54c5be6><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcviewsuserslistviewvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("725d7882fd9a037af4b441fde54c5be6","srcviewsuserslistviewvue")'>
<span class=tab-nav-text>src/views/UsersListView.vue</span></button></div><div class=tab-content-container><div data-tab-item=srcviewsuserslistviewvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UsersList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../components/users/UsersList.vue&#39;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>UsersList</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Finally, we&rsquo;ll create a new <code>UsersList</code> component to store our code:</p><div class=tab-panel data-tab-group=f46dd6256f1278e4974d515c93d97665><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("f46dd6256f1278e4974d515c93d97665","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Users</span> <span style=color:#a6e22e>List</span> <span style=color:#a6e22e>Here</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With all of that in place, we should now be able to click on the <strong>Users</strong> button at the top of our page and get to the <code>UsersList</code> component on the appropriate view:</p><p><a href=#R-image-56ab71824a00892661e1dc8171f47fdc class=lightbox-link><img alt="Users Table" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-56ab71824a00892661e1dc8171f47fdc><img alt="Users Table" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_2.png></a></p><p>From here, we can start to build our table view.</p><h2 id=primevue-datatable>PrimeVue DataTable</h2><p>To use the <a href=https://primevue.org/datatable/ rel=external target=_blank>PrimeVue DataTable</a> component, we first need to get our data from the API so we can easily display it in our component. So, let&rsquo;s use the Axios api instance to query the API and get our list of users. This is nearly the exact same code we used previously to get the list of users:</p><div class=tab-panel data-tab-group=fc8de6ea787ca383955809a541858519><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fc8de6ea787ca383955809a541858519","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Create Reactive State
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>users</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex;background-color:#3c3d38><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Load Users
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/users&#39;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now that we have that list, we can start to construct our DataTable. First, we&rsquo;ll need to import the required components in our <code>&lt;script setup></code> section:</p><div class=tab-panel data-tab-group=4b0cb71c4d5605fb613142fdde2b2230><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("4b0cb71c4d5605fb613142fdde2b2230","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now, in the <code>&lt;template></code> section, we can build a basic DataTable by including the data we want to view and the columns that should be included:</p><div class=tab-panel data-tab-group=addaf3212e6fcdf89a4c05c0d7abedd5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("addaf3212e6fcdf89a4c05c0d7abedd5","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span> <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;createdAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Created&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updatedAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Updated&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Each <code>&lt;Column></code> component includes a field name for that column, as well as a header value. With that in place, we should see a simple page with lots of helpful information about our users:</p><p><a href=#R-image-106df3efa4c4ed1592dec80ddb64ad5a class=lightbox-link><img alt="Users Table with Columns" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-106df3efa4c4ed1592dec80ddb64ad5a><img alt="Users Table with Columns" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_3.png></a></p><p>This is a great start, but we can clean this up to make it much easier for our users to read and digest the information.</p><h2 id=custom-column-templates>Custom Column Templates</h2><p>First, let&rsquo;s create a couple of custom templates for columns. First, we notice that the <strong>Roles</strong> column is just outputting the entire JSON list of roles, but this is not very helpful. So, let&rsquo;s modify that column to present a list of <a href=https://primevue.org/chip/ rel=external target=_blank>Chips</a> representing the roles:</p><div class=tab-panel data-tab-group=3d7d440ea5e6279646ef782148c3e360><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3d7d440ea5e6279646ef782148c3e360","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Chip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/chip&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span> <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>Chip</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in data.roles&#34; :key=&#34;role.id&#34; :label=&#34;role.role&#34;</span>  /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;createdAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Created&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updatedAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Updated&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Inside of the <code>&lt;Column></code> component, we place a <code>&lt;template></code> for the <code>#body</code> slot, and we also provide a link to the <code>data</code> of the <code>&lt;Column></code> component so we can access that data.</p><p>With this change, our table now looks like this:</p><p><a href=#R-image-044dc7953cecb9c22fea56b816a65dd1 class=lightbox-link><img alt="Users Table with Chips for Roles" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-044dc7953cecb9c22fea56b816a65dd1><img alt="Users Table with Chips for Roles" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_4.png></a></p><p>However, we can improve on that a bit by adding some additional information to our application that helps us display these roles in a bit cleaner format. Let&rsquo;s create a new custom <code>RoleChip</code> component that will display the roles properly, along with some additional information.</p><div class=tab-panel data-tab-group=43e197a5d1cf05cc704e63810a8309da><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsrolesrolechipvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("43e197a5d1cf05cc704e63810a8309da","srccomponentsrolesrolechipvue")'>
<span class=tab-nav-text>src/components/roles/RoleChip.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsrolesrolechipvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Roles Chip
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Chip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/chip&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Incoming Props
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Role Object
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>role</span><span style=color:#f92672>:</span> Object
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Lookup Table
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roles</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Manage Users&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-user-edit&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Manage Documents&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-pen-to-square&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Add Documents&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-file-plus&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>4</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Manage Communities&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-pencil&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>5</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Add Communities&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-plus-circle&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>6</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;View Documents&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-file&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>7</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;View Communities&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;pi pi-building-columns&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Chip</span> <span style=color:#f92672>:label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles[props.role.id].name&#34;</span> <span style=color:#f92672>:icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles[props.role.id].icon&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>This component includes a constant lookup table that provides some additional information about each role, based on the role&rsquo;s ID. This allows us to assign a user-friendly name and icon to each role in our frontend application. In fact, if we are internationalizing this application, we could also use this component to translate the role names into localized forms here.</p><p>We are also seeing a great example of <a href=https://vuejs.org/guide/components/props.html rel=external target=_blank>Vue Props</a> in this component. Props allow us to pass data from one component down into another sub-component. It is a one-way data connection, which is very important to remember.</p><p>We can update our <code>UsersList.vue</code> component to use this new <code>RoleChip</code> component very easily:</p><div class=tab-panel data-tab-group=393c07821614f1c3f4d2d403c73319b5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("393c07821614f1c3f4d2d403c73319b5","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span> <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>RoleChip</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in data.roles&#34; :key=&#34;role.id&#34; :role=&#34;role&#34;</span>  /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;createdAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Created&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updatedAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Updated&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now we have a much cleaner view of the roles each user is assigned, with helpful icons to help us remember what each one does.</p><p><a href=#R-image-ea3945b376385ec3c2c6279ab1feb20a class=lightbox-link><img alt="Users Table with RoleChips" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ea3945b376385ec3c2c6279ab1feb20a><img alt="Users Table with RoleChips" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_5.png></a></p><h2 id=handling-dates>Handling Dates</h2><p>Let&rsquo;s also clean up the <strong>Created</strong> and <strong>Updated</strong> columns by rendering the dates into a more useful format. For this, we can use the <a href=https://date-fns.org/ rel=external target=_blank>date-fns</a> library to help us format and display times easily in our project. First, we&rsquo;ll need to install it:</p><div class=tab-panel data-tab-group=c8380203b4ffdacc8b929011a2fe1dc5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c8380203b4ffdacc8b929011a2fe1dc5","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install date-fns</span></span></code></pre></div></div></div></div></div><p>Then, in our component, we can use it to format our dates by computing the distance in the past that the event occurred:</p><div class=tab-panel data-tab-group=7e8f78ca9cfaf762e5c355d658658d9e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("7e8f78ca9cfaf762e5c355d658658d9e","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span> <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>RoleChip</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in data.roles&#34; :key=&#34;role.id&#34; :role=&#34;role&#34;</span>  /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;createdAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Created&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>data.createdAt</span><span style=color:#960050;background-color:#1e0010>)</span><span style=color:#a6e22e>.toLocaleString</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          {{ <span style=color:#a6e22e>formatDistance</span>(<span style=color:#66d9ef>new</span> Date(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>createdAt</span>), <span style=color:#66d9ef>new</span> Date(), { <span style=color:#a6e22e>addSuffix</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }) }}
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updatedAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Updated&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>data.updatedAt</span><span style=color:#960050;background-color:#1e0010>)</span><span style=color:#a6e22e>.toLocaleString</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          {{ <span style=color:#a6e22e>formatDistance</span>(<span style=color:#66d9ef>new</span> Date(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>updatedAt</span>), <span style=color:#66d9ef>new</span> Date(), { <span style=color:#a6e22e>addSuffix</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }) }}
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With that in place, we can more easily see how long ago each user&rsquo;s account was created or updated:</p><p><a href=#R-image-71440982a5e4841d22010dc76e56bd47 class=lightbox-link><img alt="Users Table with Times" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-71440982a5e4841d22010dc76e56bd47><img alt="Users Table with Times" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_6.png></a></p><p>We can even hover over one of the formatted dates to see the actual date in a tooltip.</p><h2 id=sorting>Sorting</h2><p>We can also enable <a href=https://primevue.org/datatable/#sort rel=external target=_blank>Sorting</a> in our PrimeVue DataTable by simply adding the <code>sortable</code> property to any columns we&rsquo;d like to sort. For this example, let&rsquo;s add that to the <code>username</code>, <code>createdAt</code> and <code>updatedAt</code> fields:</p><div class=tab-panel data-tab-group=50de052d12325d57d8ed78ddc95760c8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("50de052d12325d57d8ed78ddc95760c8","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span> <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span> <span style=color:#a6e22e>sortable</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>RoleChip</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in data.roles&#34; :key=&#34;role.id&#34; :role=&#34;role&#34;</span>  /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;createdAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Created&#34;</span> <span style=color:#a6e22e>sortable</span> &gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>data.createdAt</span><span style=color:#960050;background-color:#1e0010>)</span><span style=color:#a6e22e>.toLocaleString</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex><span>          {{ <span style=color:#a6e22e>formatDistance</span>(<span style=color:#66d9ef>new</span> Date(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>createdAt</span>), <span style=color:#66d9ef>new</span> Date(), { <span style=color:#a6e22e>addSuffix</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }) }}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;updatedAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Updated&#34;</span> <span style=color:#a6e22e>sortable</span> &gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>data.updatedAt</span><span style=color:#960050;background-color:#1e0010>)</span><span style=color:#a6e22e>.toLocaleString</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex><span>          {{ <span style=color:#a6e22e>formatDistance</span>(<span style=color:#66d9ef>new</span> Date(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>updatedAt</span>), <span style=color:#66d9ef>new</span> Date(), { <span style=color:#a6e22e>addSuffix</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }) }}
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p><a href=#R-image-d56276b270aba7a5d2f891782045e010 class=lightbox-link><img alt="Users Table Sorting" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_sort.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d56276b270aba7a5d2f891782045e010><img alt="Users Table Sorting" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_sort.gif></a></p><p>We can even define a default column and sort order for our table:</p><div class=tab-panel data-tab-group=0e017608f9bdd06ce0442418ffd0a924><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0e017608f9bdd06ce0442418ffd0a924","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>DataTable</span> <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span> <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><h2 id=global-filtering>Global Filtering</h2><p>Another great feature of PrimeVue&rsquo;s DataTable is the ability to quickly add <a href=https://primevue.org/datatable/#filter rel=external target=_blank>Filtering</a> features. We can define a global filter to allow us to search for a user by the username by simply defining a <code>global</code> filter set and a list of fields to search. We should also add a quick search box to the top of our DataTable template to accept this input.</p><div class=tab-panel data-tab-group=c0e53d7946220ca4161948e9f3972483><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c0e53d7946220ca4161948e9f3972483","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>InputText</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FilterMatchMode</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primevue/core/api&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Setup Filters
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>filters</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>global</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>matchMode</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>FilterMatchMode</span>.<span style=color:#a6e22e>CONTAINS</span> },
</span></span><span style=display:flex;background-color:#3c3d38><span>})
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#f92672>:globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  &gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>header</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex justify-end&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>InputIcon</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>              &lt;<span style=color:#f92672>i</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-search&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;/<span style=color:#f92672>InputIcon</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>InputText</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters[&#39;global&#39;].value&#34; placeholder=&#34;Keyword Search&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With this in place, we can now type in any username and filter the table for that username:</p><p><a href=#R-image-681dd7214bcc903a5d613b8c07ee257d class=lightbox-link><img alt="Users Table Filtering Usernames" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_filter1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-681dd7214bcc903a5d613b8c07ee257d><img alt="Users Table Filtering Usernames" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_filter1.gif></a></p><h2 id=column-filtering>Column Filtering</h2><p>We can also do more advanced filtering, such as allowing users to select roles that they&rsquo;d like to search for. This is a bit more complex, as it requires us to first write our own custom filter function, and then we also have to add a small template for setting the filter options.</p><p>First, let&rsquo;s create a new custom filter function in our <code>&lt;script setup></code> section. We&rsquo;ll also need to get a list of the available roles in our system, so we can add that to this section as well.:</p><div class=tab-panel data-tab-group=86504eeb776de61a4f5ea2c1e3ae88a9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("86504eeb776de61a4f5ea2c1e3ae88a9","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>InputText</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FilterMatchMode</span>, <span style=color:#a6e22e>FilterService</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primevue/core/api&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create Reactive State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>users</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roles</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Load Users
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/users&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Load Roles
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/roles&#39;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Custom Filter
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#a6e22e>FilterService</span>.<span style=color:#a6e22e>register</span>(<span style=color:#e6db74>&#34;filterArrayOfObjectsById&#34;</span>, (<span style=color:#a6e22e>targetArray</span>, <span style=color:#a6e22e>sourceArray</span>) =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>sourceArray</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>sourceArray</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  }
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>found</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>sourceArray</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>s</span>) =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>found</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>found</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>targetArray</span>.<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>o</span>) =&gt; <span style=color:#a6e22e>o</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>found</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Setup Filters
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>filters</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>global</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>matchMode</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>FilterMatchMode</span>.<span style=color:#a6e22e>CONTAINS</span> },
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>roles</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>matchMode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;filterArrayOfObjectsById&#34;</span>}
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>The <code>filterArrayOfObjectsById</code> function should look somewhat familiar - we have an array of roles we want to search for, and we want to ensure that the user has all of these roles (this is different than some of our other functions that look like this, where we want the user to have at least one of the roles).</p><p>Now, to make this visible in our template, we add a special <code>&lt;template #filter></code> slot to the <code>Column</code> that is displaying the roles. We also set the <code>filterDisplay</code> option on the top-level <code>DataTable</code> component to <code>"menu"</code> to allow us to have pop-up menus for filtering. For this menu, we&rsquo;re going to use the <a href=https://primevue.org/multiselect/ rel=external target=_blank>PrimeVue Multiselect</a> component, so we&rsquo;ll need to import it:</p><div class=tab-panel data-tab-group=598466a02dab18ba66101c03d901cdaa><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("598466a02dab18ba66101c03d901cdaa","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>InputText</span>, <span style=color:#a6e22e>MultiSelect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FilterMatchMode</span>, <span style=color:#a6e22e>FilterService</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primevue/core/api&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>  &gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>filterField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span> <span style=color:#f92672>:showFilterMatchModes</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;false&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>RoleChip</span> <span style=color:#f92672>v-for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role in data.roles&#34; :key=&#34;role.id&#34; :role=&#34;role&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ filterModel }&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>MultiSelect</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filterModel.value&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#f92672>:options</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>optionLabel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Any&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>        &gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>option</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;slotProps&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>            &lt;<span style=color:#f92672>RoleChip</span> <span style=color:#f92672>:role</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;slotProps.option&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;/<span style=color:#f92672>MultiSelect</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With all of this in place, we can now filter based on roles as well:</p><p><a href=#R-image-65aa8744efe697714af7933070ade87f class=lightbox-link><img alt="Users Table Filtering Roles" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_filter2.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-65aa8744efe697714af7933070ade87f><img alt="Users Table Filtering Roles" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_filter2.gif></a></p><h2 id=buttons>Buttons</h2><p>Finally, let&rsquo;s work on adding some buttons to our table that will allow us to create new users, edit existing users, and delete users.</p><p>First, let&rsquo;s add a simple button to create a new user at the top of our DataTable component. We&rsquo;ll use a <a href=https://primevue.org/button/ rel=external target=_blank>PrimeVue Button</a> component for this, and we&rsquo;ll also need to import the Vue Router so we can route to a different view when this is clicked.</p><div class=tab-panel data-tab-group=8262285b8c9cfcc40e1ddfc93929b4bb><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("8262285b8c9cfcc40e1ddfc93929b4bb","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>InputText</span>, <span style=color:#a6e22e>MultiSelect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FilterMatchMode</span>, <span style=color:#a6e22e>FilterService</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primevue/core/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Button</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/button&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>  &gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>header</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex justify-between&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;New User&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-user-plus&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;newuser&#39; })&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>        /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>InputIcon</span>&gt;
</span></span><span style=display:flex><span>            &lt;<span style=color:#f92672>i</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-search&#34;</span> /&gt;
</span></span><span style=display:flex><span>          &lt;/<span style=color:#f92672>InputIcon</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>InputText</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters[&#39;global&#39;].value&#34; placeholder=&#34;Keyword Search&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>When we click on this button, we&rsquo;ll be sent to the <code>newuser</code> route in our application. This route doesn&rsquo;t currently exist, but we&rsquo;ll add it later in this tutorial.</p><p>Likewise, we want to add buttons to allow us to edit and delete each user&rsquo;s account, so let&rsquo;s add a new column to our DataTable with those buttons as well.</p><div class=tab-panel data-tab-group=11faa82735b5153fe65a07bbe2a4381a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("11faa82735b5153fe65a07bbe2a4381a","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>  &gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Actions&#34;</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;min-width: 8rem&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;slotProps&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-pencil&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>outlined</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>rounded</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;edituser&#39;, params: { id: slotProps.data.id } })&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;&#39;</span><span style=color:#a6e22e>Edit</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>          &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-trash&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>outlined</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>rounded</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;danger&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;deleteuser&#39;, params: { id: slotProps.data.id } })&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;&#39;</span><span style=color:#a6e22e>Delete</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>These buttons will direct us to the <code>edituser</code> and <code>deleteuser</code> routes, and they even include the ID of the user to be edited or deleted in the route parameters. We&rsquo;ll work on adding these features as well later in this tutorial. With these changes in place, our final DataTable for our users should look something like this:</p><p><a href=#R-image-001a93cfc26e1177d78e8b9bafc54125 class=lightbox-link><img alt="Final Users Data Table" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-001a93cfc26e1177d78e8b9bafc54125><img alt="Final Users Data Table" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_7.png></a></p><p>For the rest of this tutorial, we&rsquo;ll work on adding additional functionality to handle creating, editing, and deleting user accounts.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=edit-user>Edit User</h1><a href="https://www.youtube.com/watch?v=o4VTjNvTVxk">YouTube Video</a><h2 id=editing-a-user>Editing a User</h2><p>The next major feature we can add to our frontend application is the ability to edit a user. To do this, we&rsquo;ll need to create a view and a component that contains the form fields for editing a user, as well as the logic to communicate any changes back to the API.</p><p>As always, we&rsquo;ll start by adding a route to our <code>src/router/index.js</code> file for this route:</p><div class=tab-panel data-tab-group=ec5fa3d999ee4410f0403a9c1a73d177><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcrouterindexjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("ec5fa3d999ee4410f0403a9c1a73d177","srcrouterindexjs")'>
<span class=tab-nav-text>src/router/index.js</span></button></div><div class=tab-content-container><div data-tab-item=srcrouterindexjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRouter</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure History Mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>history</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createWebHistory</span>(<span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>BASE_URL</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure routes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>routes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/users/:id/edit&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;edituser&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/UsersEditView.vue&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>beforeEnter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>requireRoles</span>(<span style=color:#e6db74>&#39;manage_users&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>props</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>In this route, we are using <code>:id</code> to represent a <a href=https://router.vuejs.org/guide/essentials/dynamic-matching.html rel=external target=_blank>Route Parameter</a>, which is the same syntax we saw earlier in our Express backend. Since we want that route parameter to be passed as a Vue prop to our view component, we also add the <code>props: true</code> entry to this route definition.</p><p>Next, we&rsquo;ll create a simple <code>UsersEditView.vue</code> component in our <code>src/views</code> folder to contain the new view:</p><div class=tab-panel data-tab-group=b137f3364282934033d8e6887b8293aa><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcviewsuserseditviewvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b137f3364282934033d8e6887b8293aa","srcviewsuserseditviewvue")'>
<span class=tab-nav-text>src/views/UsersEditView.vue</span></button></div><div class=tab-content-container><div data-tab-item=srcviewsuserseditviewvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UserEdit</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../components/users/UserEdit.vue&#39;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>UserEdit</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Finally, we&rsquo;ll create our new component in the <code>src/components/users/UserEdit.vue</code> file with the following default content:</p><div class=tab-panel data-tab-group=2e70dd79792346e90484917cc22933d0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2e70dd79792346e90484917cc22933d0","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file User Edit Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Edit</span> <span style=color:#a6e22e>User</span> <span style=color:#a6e22e>Here</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><h2 id=getting-user-data>Getting User Data</h2><p>To begin, let&rsquo;s get the user&rsquo;s data from our API. We know that this component will have a Vue prop for the user&rsquo;s <code>id</code> available, because it is the only element on the <code>UsersEditView</code> page, so the property will <a href=https://vuejs.org/guide/components/attrs.html rel=external target=_blank>Fallthrough</a> to this element. So, we can declare it at the top of our component, and use it to request data about a single user in our component as a reactive state variable.</p><div class=tab-panel data-tab-group=2c741c90563e0b68f9379a6b60f2b024><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2c741c90563e0b68f9379a6b60f2b024","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file User Edit Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Incoming Props
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// User ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Load Users
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/users/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With this data in hand, we can start building a form to allow us to edit our user.</p><h2 id=creating-a-text-field-component>Creating a Text Field Component</h2><p>Our User account has two fields that we want to be able to edit: the <code>username</code> field and the list of <code>roles</code> assigned to the user. Let&rsquo;s tackle the <code>username</code> field first. PrimeVue includes many different components that can be used in a form. One of the simplest is their <a href=https://primevue.org/inputtext/ rel=external target=_blank>InputText</a> field that accepts textual input from the user. However, we can also add things like an <a href=https://primevue.org/iconfield/ rel=external target=_blank>IconField</a> to show an icon inside of the field, and a <a href=https://primevue.org/floatlabel/ rel=external target=_blank>FloatLabel</a> to easily include a descriptive label that floats over our field. One really cool feature is the ability to combine several of these into an <a href=https://primevue.org/iconfield/#floatlabel rel=external target=_blank>Icon Field with a Floating Label</a> as shown in the PrimeVue examples. However, because we know we plan on creating multiple forms with text input fields, let&rsquo;s create our own custom component that combines all of these items together.</p><p>We&rsquo;ll create a new component in the <code>src/components/forms/TextField.vue</code> with the following content:</p><div class=tab-panel data-tab-group=7273ee800d05a9a5591db97b29f2a504><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsformstextfieldvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("7273ee800d05a9a5591db97b29f2a504","srccomponentsformstextfieldvue")'>
<span class=tab-nav-text>src/components/forms/TextField.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsformstextfieldvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Custom Text Form Field Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>FloatLabel</span>, <span style=color:#a6e22e>InputText</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Incoming Props
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Name
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>field</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Label
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Icon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Disable Editing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// V-model of the field to be edited
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>model</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineModel</span>()
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>FloatLabel</span> <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;on&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>InputIcon</span> <span style=color:#f92672>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.icon&#34;</span> /&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>InputText</span> <span style=color:#f92672>:id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span> <span style=color:#f92672>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.disabled&#34;</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;model&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>label</span> <span style=color:#f92672>:for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>&gt;{{ <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>label</span> }}&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>FloatLabel</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>This component includes a number of props that define the form field we want to create, and then puts them all together following the model provided in the PrimeVue documentation.</p><p>With that component in place, we can use it our <code>UserEdit</code> component to edit the user&rsquo;s username:</p><div class=tab-panel data-tab-group=df0bff6baf2b1bf4e9faadc07ecd102d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("df0bff6baf2b1bf4e9faadc07ecd102d","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file User Edit Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TextField</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../forms/TextField.vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>span</span>&gt;{{ <span style=color:#a6e22e>user</span> }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>TextField</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.username&#34; field=&#34;username&#34; label=&#34;Username&#34; icon=&#34;pi pi-user&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>For this example, we&rsquo;ve also added a <code>&lt;span></code> element showing the current contents of the <code>user</code> reactive state variable, just so we can see our form field in action. As we edit the data in the field, we can also see our <code>user</code> state variable update!</p><p><a href=#R-image-0e266ba54624b2ad92a217bfbedc8e60 class=lightbox-link><img alt="Editing Username" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_edit1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0e266ba54624b2ad92a217bfbedc8e60><img alt="Editing Username" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_edit1.gif></a></p><p>Since we can easily just edit the user&rsquo;s username without changing any other fields, we can test this by adding a <strong>Save</strong> and <strong>Cancel</strong> button to our page:</p><div class=tab-panel data-tab-group=8dc38119349e6dd476d5f58697b5ca3c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("8dc38119349e6dd476d5f58697b5ca3c","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file User Edit Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TextField</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../forms/TextField.vue&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>span</span>&gt;{{ <span style=color:#a6e22e>user</span> }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>TextField</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.username&#34; field=&#34;username&#34; label=&#34;Username&#34; icon=&#34;pi pi-user&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;save&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Save&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;secondary&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;users&#39; })&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Cancel&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>The functionality of the <strong>Cancel</strong> button is pretty straightforward; it just uses the Vue Router to send the user back to the <code>/users</code> route. For the <strong>Save</strong> button, however, we need to implement a custom <code>save</code> function in our component to save the updated user:</p><div class=tab-panel data-tab-group=b7389ec359e97f0e4e033a3aba70832e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b7389ec359e97f0e4e033a3aba70832e","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Save User
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>save</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#39;/api/v1/users/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>201</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;users&#34;</span>})
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex;background-color:#3c3d38><span>    })
</span></span><span style=display:flex;background-color:#3c3d38><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With that code in place, we can click the <strong>Save</strong> button, and it should save our edit to the user&rsquo;s username and redirect us back to the <code>/users</code> route.</p><h2 id=toast-messages>Toast Messages</h2><p>However, there is no obvious visual cue that shows us the user was successfully saved, so our users may not really know if it worked or not. For that, we can use the <a href=https://primevue.org/toast/#position rel=external target=_blank>PrimeVue Toast</a> component to display messages to our users. To install it, we have to add a few lines to our <code>src/main.js</code> file:</p><div class=tab-panel data-tab-group=7a277fea01ad6a50a4a360823a926708><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcmainjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("7a277fea01ad6a50a4a360823a926708","srcmainjs")'>
<span class=tab-nav-text>src/main.js</span></button></div><div class=tab-content-container><div data-tab-item=srcmainjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Main Vue application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createApp</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createPinia</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;pinia&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>PrimeVue</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/config&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Aura</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primeuix/themes/aura&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Tooltip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/tooltip&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ToastService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/toastservice&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import CSS
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;./assets/main.css&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Vue App
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./App.vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Configurations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>setupAxios</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./configs/api&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create Vue App
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createApp</span>(<span style=color:#a6e22e>App</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Install Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>createPinia</span>())
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>router</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>PrimeVue</span>, {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Theme Configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>preset</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Aura</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>darkModeSelector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;.app-dark-mode&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>ToastService</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Install Directives
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>directive</span>(<span style=color:#e6db74>&#39;tooltip&#39;</span>, <span style=color:#a6e22e>Tooltip</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Setup Interceptors
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>setupAxios</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Mount Vue App on page
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>mount</span>(<span style=color:#e6db74>&#39;#app&#39;</span>)</span></span></code></pre></div></div></div></div></div><p>Then, we can add our <code>&lt;Toast></code> element to the top-level <code>App.vue</code> page so it is available throughout our application:</p><div class=tab-panel data-tab-group=5d27e4174515383376b34c50dbb200b9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=appvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("5d27e4174515383376b34c50dbb200b9","appvue")'>
<span class=tab-nav-text>App.vue</span></button></div><div class=tab-content-container><div data-tab-item=appvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Main Vue Application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Components
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Toast</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/toast&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TopMenu</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./components/layout/TopMenu.vue&#39;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>header</span>&gt;&lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>nav</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>Navigation</span> <span style=color:#a6e22e>Menu</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>TopMenu</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>nav</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;m-2&#34;</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>Main</span> <span style=color:#a6e22e>Application</span> <span style=color:#a6e22e>View</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>RouterView</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>footer</span>&gt;&lt;/<span style=color:#f92672>footer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>Toast</span> <span style=color:#a6e22e>position</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bottom-right&#34;</span>/&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With that in place, we can use the <a href=https://primevue.org/toast/#toast-service rel=external target=_blank>ToastService</a> to display messages to our user from our <code>UserEdit</code> component:</p><div class=tab-panel data-tab-group=392aff5153aa75d98def3c9e82387de4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("392aff5153aa75d98def3c9e82387de4","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file User Edit Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TextField</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../forms/TextField.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useToast</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/usetoast&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toast</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useToast</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Save User
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>save</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#39;/api/v1/users/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>201</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Success&#34;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;users&#34;</span>})
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now, when we successfully edit a user, we&rsquo;ll see a pop-up message on the lower right of our screen showing that the user was successfully saved!</p><p><a href=#R-image-bedec3b5d37d3939ce9f572292400215 class=lightbox-link><img alt="Saving User shows Toast Message" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_edit2.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-bedec3b5d37d3939ce9f572292400215><img alt="Saving User shows Toast Message" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_edit2.gif></a></p><h2 id=handling-errors>Handling Errors</h2><p>What if we try to edit our user and end up receiving an error from the server? What should we do in that instance?</p><p>Thankfully, our backend RESTful API is already configured to send helpful, well-structured error messages when things go wrong. So, we can take advantage of that in our frontend application to display errors for the user.</p><p>To use these error messages, in our <code>UserEdit</code> component, we just need to grab them and store them in a new reactive state variable that we share with all of our form components:</p><div class=tab-panel data-tab-group=a2481c68967488e927bc7cc46f8638d8><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a2481c68967488e927bc7cc46f8638d8","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({})
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>errors</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Save User
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>save</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#39;/api/v1/users/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>201</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Success&#34;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>message</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;users&#34;</span>})
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex;background-color:#3c3d38><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>422</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warn&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Warning&#34;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>errors</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Error&#34;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex;background-color:#3c3d38><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>span</span>&gt;{{ <span style=color:#a6e22e>user</span> }}&lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>TextField</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.username&#34; field=&#34;username&#34; label=&#34;Username&#34; icon=&#34;pi pi-user&#34; :errors=&#34;errors&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;save&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Save&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;secondary&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;users&#39; })&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Cancel&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Recall that these errors will have a standard structure, such as this:</p><div class=tab-panel data-tab-group=62b82c4602df816b54033814df7f6bc4><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=validation-error-structure class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("62b82c4602df816b54033814df7f6bc4","validation-error-structure")'>
<span class=tab-nav-text>Validation Error Structure</span></button></div><div class=tab-content-container><div data-tab-item=validation-error-structure class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;Validation Error&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;errors&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;attribute&#34;</span>: <span style=color:#e6db74>&#34;username&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;username must be unique&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></div></div></div><p>So, in our <code>TextField.vue</code> component, we can look for any errors that match the <code>field</code> that the component is responsible for, and we can present those to the user.</p><div class=tab-panel data-tab-group=0f8035cd9b62b97e97f9216d09d0e6fe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsformtextfieldvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0f8035cd9b62b97e97f9216d09d0e6fe","srccomponentsformtextfieldvue")'>
<span class=tab-nav-text>src/components/form/TextField.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsformtextfieldvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Custom Text Form Field Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>computed</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>FloatLabel</span>, <span style=color:#a6e22e>InputText</span>, <span style=color:#a6e22e>Message</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Incoming Props
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Name
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>field</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Label
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Icon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Disable Editing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>errors</span><span style=color:#f92672>:</span> Array
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Find Error for Field
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>find</span>((<span style=color:#a6e22e>e</span>) =&gt; <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>attribute</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>field</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// V-model of the field to be edited
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>model</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineModel</span>()
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>FloatLabel</span> <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;on&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>InputIcon</span> <span style=color:#f92672>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.icon&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>        &lt;<span style=color:#f92672>InputText</span> <span style=color:#f92672>:id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span> <span style=color:#f92672>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.disabled&#34;</span> <span style=color:#f92672>:invalid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34;</span> <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;model&#34;</span> /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>label</span> <span style=color:#f92672>:for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>&gt;{{ <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>label</span> }}&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>FloatLabel</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#75715e>&lt;!--</span> Error <span style=color:#a6e22e>Text</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>Message</span> <span style=color:#f92672>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34; severity=&#34;error&#34; variant=&#34;simple&#34; size=&#34;small&#34;</span>&gt;{{ <span style=color:#a6e22e>error.message</span> }}&lt;/<span style=color:#f92672>Message</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now, when we enter an invalid username, we&rsquo;ll clearly see the error on our form:</p><p><a href=#R-image-4c2b511c2c9beebf85b14df12b7042c1 class=lightbox-link><img alt="Error Field" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4c2b511c2c9beebf85b14df12b7042c1><img alt="Error Field" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_8.png></a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=edit-roles>Edit Roles</h1><a href="https://www.youtube.com/watch?v=0S6RgnBxjDQ">YouTube Video</a><h2 id=editing-roles>Editing Roles</h2><p>There are many different ways to edit the list of roles assigned to each user as well. One of the smoothest ways to select from a list of options is the <a href=https://primevue.org/autocomplete/ rel=external target=_blank>PrimeVue AutoComplete</a> component. Just like before, we can build our own version of this component that includes everything we included previously:</p><div class=tab-panel data-tab-group=4977f8d0ebdf2e90233a908f2f622ee3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsformsautocompletemultiplefieldvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("4977f8d0ebdf2e90233a908f2f622ee3","srccomponentsformsautocompletemultiplefieldvue")'>
<span class=tab-nav-text>src/components/forms/AutoCompleteMultipleField.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsformsautocompletemultiplefieldvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Custom Autocomplete Multiple Field Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>computed</span>, <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>FloatLabel</span>, <span style=color:#a6e22e>AutoComplete</span>, <span style=color:#a6e22e>Message</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Incoming Props
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Name
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>field</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Label
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Field Icon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Disable Editing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>disabled</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> Boolean,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#75715e>//Values to choose from
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>values</span><span style=color:#f92672>:</span> Array,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Value Label
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>valueLabel</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;name&#39;</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>errors</span><span style=color:#f92672>:</span> Array,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Find Error for Field
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>find</span>((<span style=color:#a6e22e>e</span>) =&gt; <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>attribute</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>field</span>)
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// V-model of the field to be edited
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>model</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineModel</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// State variable for search results
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Search method
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>search</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>event</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>event</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>values</span>.<span style=color:#a6e22e>filter</span>((<span style=color:#a6e22e>v</span>) =&gt; <span style=color:#a6e22e>v</span>[<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>valueLabel</span>].<span style=color:#a6e22e>includes</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>query</span>))
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>FloatLabel</span> <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;on&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>InputIcon</span> <span style=color:#f92672>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.icon&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>AutoComplete</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:optionLabel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.valueLabel&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.disabled&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:invalid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;model&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>forceSelection</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>multiple</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>fluid</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:suggestions</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;items&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>@complete</span><span style=color:#e6db74>=&#34;search&#34;</span>
</span></span><span style=display:flex><span>        /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>label</span> <span style=color:#f92672>:for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>&gt;{{ <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>label</span> }}&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>FloatLabel</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> Error <span style=color:#a6e22e>Text</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Message</span> <span style=color:#f92672>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34; severity=&#34;error&#34; variant=&#34;simple&#34; size=&#34;small&#34;</span>&gt;{{
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>error.message</span>
</span></span><span style=display:flex><span>    }}&lt;/<span style=color:#f92672>Message</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>This component is very similar to the previous one, but it includes a couple of extra props to control the value that is displayed to the user as well as a function to help search through the list of values.</p><p>To use it, we&rsquo;ll need to load all of the available roles in our <code>UserEdit.vue</code> component so we can pass that along to the new <code>AutoCompleteMultipleField</code> component:</p><div class=tab-panel data-tab-group=4841f163f9d20e4b8b4c49c5ff8a83b3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("4841f163f9d20e4b8b4c49c5ff8a83b3","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file User Edit Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Button</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TextField</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../forms/TextField.vue&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AutoCompleteMultipleField</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../forms/AutoCompleteMultipleField.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useToast</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/usetoast&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toast</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useToast</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Incoming Props
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineProps</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// User ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> String,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Declare State
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({})
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roles</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>errors</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>([])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Load Roles
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#a6e22e>api</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/roles&#39;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex;background-color:#3c3d38><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  {{ <span style=color:#a6e22e>user</span> }}
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>TextField</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-user&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:errors</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;errors&#34;</span>
</span></span><span style=display:flex><span>  /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>AutoCompleteMultipleField</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.roles&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-id-card&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#f92672>:errors</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;errors&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#f92672>:values</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>valueLabel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;save&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Save&#34;</span> /&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;secondary&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;users&#39; })&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Cancel&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With that in place, we can now see a new field to edit a user&rsquo;s roles:</p><p><a href=#R-image-51e01ed59ad4aaf3039acd73b2f50162 class=lightbox-link><img alt=Roles class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_9.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-51e01ed59ad4aaf3039acd73b2f50162><img alt=Roles class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_9.png></a></p><p>As we can see, however, the AutoComplete field for PrimeVue doesn&rsquo;t quite support having an icon in front of it. Thankfully, we can easily fix that in our CSS by just finding the offset used in the other fields:</p><p><a href=#R-image-9e3f040b5e501f189170681d477a6614 class=lightbox-link><img alt="CSS Offset" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_10.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9e3f040b5e501f189170681d477a6614><img alt="CSS Offset" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_10.png></a></p><p>Once we have that, we can add it to our new AutoComplete component in a <code>&lt;style scoped></code> section that references the correct class:</p><div class=tab-panel data-tab-group=da4eda372f3a71441195ca0fb521b8a3><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsformsautocompletemultiplefieldvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("da4eda372f3a71441195ca0fb521b8a3","srccomponentsformsautocompletemultiplefieldvue")'>
<span class=tab-nav-text>src/components/forms/AutoCompleteMultipleField.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsformsautocompletemultiplefieldvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>style</span> <span style=color:#a6e22e>scoped</span>&gt;
</span></span><span style=display:flex><span><span style=color:#f92672>:</span><span style=color:#a6e22e>deep</span>(.<span style=color:#a6e22e>p</span><span style=color:#f92672>-</span><span style=color:#a6e22e>autocomplete</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>ul</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>padding</span><span style=color:#f92672>-</span><span style=color:#a6e22e>inline</span><span style=color:#f92672>-</span><span style=color:#a6e22e>start</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>calc</span>((<span style=color:#66d9ef>var</span>(<span style=color:#f92672>--</span><span style=color:#a6e22e>p</span><span style=color:#f92672>-</span><span style=color:#a6e22e>form</span><span style=color:#f92672>-</span><span style=color:#a6e22e>field</span><span style=color:#f92672>-</span><span style=color:#a6e22e>padding</span><span style=color:#f92672>-</span><span style=color:#a6e22e>x</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span> <span style=color:#66d9ef>var</span>(<span style=color:#f92672>--</span><span style=color:#a6e22e>p</span><span style=color:#f92672>-</span><span style=color:#a6e22e>icon</span><span style=color:#f92672>-</span><span style=color:#a6e22e>size</span>));
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>style</span>&gt;</span></span></code></pre></div></div></div></div></div><p>That will fix the padding for our icon to show up properly!</p><p><a href=#R-image-6bc34847ae291821cb2fc8d04027864c class=lightbox-link><img alt="CSS Offset" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_11.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6bc34847ae291821cb2fc8d04027864c><img alt="CSS Offset" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_11.png></a></p><p>At this point, we can easily add and remove roles for this user. We can even click the save button and it should work as intended! No extra code is needed. So, we can remove the extra line in the <code>&lt;template></code> of our <code>UserEdit.vue</code> component to remove the debugging information.</p><h2 id=styling>Styling</h2><p>Finally, we can use some quick CSS styling to update the content of our <code>UserEdit.vue</code> page to be a bit easier to follow.</p><div class=tab-panel data-tab-group=fd5b2131e71bca9699d2e3c987a9a58d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fd5b2131e71bca9699d2e3c987a9a58d","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex flex-col gap-3 max-w-xl justify-items-center&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>h1</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-xl text-center m-1&#34;</span>&gt;<span style=color:#a6e22e>Edit</span> <span style=color:#a6e22e>User</span>&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>TextField</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.username&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Username&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-user&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>:errors</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;errors&#34;</span>
</span></span><span style=display:flex><span>    /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>AutoCompleteMultipleField</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user.roles&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Roles&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-id-card&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>:errors</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;errors&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>:values</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;roles&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>valueLabel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;role&#34;</span>
</span></span><span style=display:flex><span>    /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;success&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;save&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Save&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Button</span> <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;secondary&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;users&#39; })&#34;</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Cancel&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>We can also add a <code>w-full</code> class to our <code>TextField</code> component to expand that field to fit the surrounding components:</p><div class=tab-panel data-tab-group=9ef0ab5954dde73f5ed313468ee33f1c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsformstextfieldvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("9ef0ab5954dde73f5ed313468ee33f1c","srccomponentsformstextfieldvue")'>
<span class=tab-nav-text>src/components/forms/TextField.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsformstextfieldvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>FloatLabel</span> <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;on&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>InputIcon</span> <span style=color:#f92672>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.icon&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>InputText</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.disabled&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:invalid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;model&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full&#34;</span>
</span></span><span style=display:flex><span>        /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>label</span> <span style=color:#f92672>:for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>&gt;{{ <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>label</span> }}&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>FloatLabel</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> Error <span style=color:#a6e22e>Text</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Message</span> <span style=color:#f92672>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34; severity=&#34;error&#34; variant=&#34;simple&#34; size=&#34;small&#34;</span>&gt;{{
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>error.message</span>
</span></span><span style=display:flex><span>    }}&lt;/<span style=color:#f92672>Message</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>With all of that in place, we have a nice looking form to edit our users!</p><p><a href=#R-image-68c46abb05ee6aa2383ecb92067a8f16 class=lightbox-link><img alt="CSS Offset" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_12.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-68c46abb05ee6aa2383ecb92067a8f16><img alt="CSS Offset" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_12.png></a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=new-user>New User</h1><a href="https://www.youtube.com/watch?v=CN1WxgR2ZQg">YouTube Video</a><h2 id=creating-a-new-user>Creating a New User</h2><p>Now that we have a nice way to edit a user account, we&rsquo;d like to also have a way to create a new user account. While we could easily duplicate our work in the <code>UserEdit</code> component and create a <code>UserNew</code> component, we can also add a bit more logic to our <code>UserEdit</code> component to handle both cases. So, let&rsquo;s look at how we can do that!</p><p>First, we&rsquo;ll need to add a route to our project to get us to the correct place. So, we&rsquo;ll update our Vue Router:</p><div class=tab-panel data-tab-group=3221080d7c445d92ad4b08547380e00a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcrouterindexjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3221080d7c445d92ad4b08547380e00a","srcrouterindexjs")'>
<span class=tab-nav-text>src/router/index.js</span></button></div><div class=tab-content-container><div data-tab-item=srcrouterindexjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRouter</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure History Mode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>history</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createWebHistory</span>(<span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>BASE_URL</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Configure routes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>routes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/users/new&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;newuser&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>component</span><span style=color:#f92672>:</span> () =&gt; <span style=color:#66d9ef>import</span>(<span style=color:#e6db74>&#39;../views/UsersEditView.vue&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>beforeEnter</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>requireRoles</span>(<span style=color:#e6db74>&#39;manage_users&#39;</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>This route will take us to the <code>UsersEditView</code> view, but without a prop giving the ID of the user to edit. When we get to that page without a prop, we&rsquo;ll assume that the user is intending to create a new user instead. So, we&rsquo;ll need to change some of our code in that component to handle this gracefully.</p><p>Thankfully, we can just look at the value of <code>props.id</code> for this - if it is a <em>falsy</em> value, then we know that it wasn&rsquo;t provided and we are creating a new user. If one is provided, then we are editing a user instead.</p><p>So, at the start, if we are creating a new user, we want to set our <code>user</code> reactive state variable to a reasonable default value for a user. If we are editing a user, we&rsquo;ll request that user&rsquo;s data from the server.</p><div class=tab-panel data-tab-group=adc94296bf83d1d94525ede0403dcf21><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("adc94296bf83d1d94525ede0403dcf21","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Load Users
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/users/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex;background-color:#3c3d38><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#75715e>// Empty Value for User Object
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>  <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>roles</span><span style=color:#f92672>:</span> []
</span></span><span style=display:flex;background-color:#3c3d38><span>  }
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Then, we need to change the code for saving a user to handle both situations. Thankfully, we can adjust both the method (either POST or PUT) as well as the URL easily in Axios using the <a href=https://axios-http.com/docs/api_intro rel=external target=_blank>Axios API</a>.</p><div class=tab-panel data-tab-group=0feefcbafbbb160a7ca65200317cf8ae><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0feefcbafbbb160a7ca65200317cf8ae","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Save User
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>save</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> []
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>method</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;post&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/api/v1/users&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>method</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;put&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  }
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>api</span>({
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>method</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>url</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>url</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>value</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>  }).<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>201</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Success&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>message</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>push</span>({ <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;users&#39;</span> })
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>422</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;warn&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Warning&#39;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>error</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span>,
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>errors</span>
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Error&#39;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Since both the POST and PUT operations will return the same style of errors, the rest of the code is identical!</p><p>Finally, in our template, we can include a bit of conditional rendering to display whether we are creating a new user or editing an existing user:</p><div class=tab-panel data-tab-group=d27a0bd91b3ddc3cb17bbbd0273ce5a2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersusereditvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d27a0bd91b3ddc3cb17bbbd0273ce5a2","srccomponentsusersusereditvue")'>
<span class=tab-nav-text>src/components/users/UserEdit.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersusereditvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex flex-col gap-3 max-w-xl justify-items-center&#34;</span>&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>    &lt;<span style=color:#f92672>h1</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-xl text-center m-1&#34;</span>&gt;{{ <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;Edit User&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;New User&#34;</span> }}&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>That&rsquo;s really all the changes we need to make to allow our <code>UserEdit</code> component to gracefully handle both editing existing users and creating new users!</p><p><a href=#R-image-a2e97fa1e6717e846b14c62c54dfc0bc class=lightbox-link><img alt="New User" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/vue_crud_13.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-a2e97fa1e6717e846b14c62c54dfc0bc><img alt="New User" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/vue_crud_13.png></a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=delete-user>Delete User</h1><a href="https://www.youtube.com/watch?v=ox0hGv7LRho">YouTube Video</a><h2 id=deleting-a-user>Deleting a User</h2><p>Finally, let&rsquo;s look at what it takes to delete a user. As with anything in frontend development, there are many different ways to go about this. We could follow the model we used for creating and editing users by adding a new view, route, and component for these actions. However, we can also just add a quick pop-up dialog directly to our <code>UsersList</code> component that will confirm the deletion before sending the request to the backend.</p><p>For this operation, we&rsquo;re going to use the <a href=https://primevue.org/confirmdialog/ rel=external target=_blank>PrimeVue ConfirmDialog</a> component. So, to begin, we need to install the <code>ConfirmationService</code> for these dialogs in our application by editing the <code>main.js</code> file:</p><div class=tab-panel data-tab-group=c955e25ec5b92a80c21cfb6a593b73de><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcmainjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c955e25ec5b92a80c21cfb6a593b73de","srcmainjs")'>
<span class=tab-nav-text>src/main.js</span></button></div><div class=tab-content-container><div data-tab-item=srcmainjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Main Vue application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createApp</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createPinia</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;pinia&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>PrimeVue</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/config&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Aura</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primeuix/themes/aura&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Tooltip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/tooltip&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ToastService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/toastservice&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ConfirmationService</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/confirmationservice&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import CSS
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#39;./assets/main.css&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Vue App
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./App.vue&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Configurations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>setupAxios</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./configs/api&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create Vue App
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createApp</span>(<span style=color:#a6e22e>App</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Install Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>createPinia</span>())
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>router</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>PrimeVue</span>, {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Theme Configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>preset</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Aura</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>darkModeSelector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;.app-dark-mode&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>ToastService</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>ConfirmationService</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Install Directives
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>directive</span>(<span style=color:#e6db74>&#39;tooltip&#39;</span>, <span style=color:#a6e22e>Tooltip</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Setup Interceptors
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>setupAxios</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Mount Vue App on page
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>mount</span>(<span style=color:#e6db74>&#39;#app&#39;</span>)</span></span></code></pre></div></div></div></div></div><p>In addition, we&rsquo;ll add the component itself to the <code>App.vue</code> top-level component alongside the <code>Toast</code> component, so it is visible throughout our application:</p><div class=tab-panel data-tab-group=0b7f39e53ab4cdaecbcb3fe512736d80><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcappvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0b7f39e53ab4cdaecbcb3fe512736d80","srcappvue")'>
<span class=tab-nav-text>src/App.vue</span></button></div><div class=tab-content-container><div data-tab-item=srcappvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Main Vue Application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Components
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Toast</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/toast&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ConfirmDialog</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/confirmdialog&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>TopMenu</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./components/layout/TopMenu.vue&#39;</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>header</span>&gt;&lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>nav</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>Navigation</span> <span style=color:#a6e22e>Menu</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>TopMenu</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>nav</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;m-2&#34;</span>&gt;
</span></span><span style=display:flex><span>      <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>Main</span> <span style=color:#a6e22e>Application</span> <span style=color:#a6e22e>View</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>RouterView</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>footer</span>&gt;&lt;/<span style=color:#f92672>footer</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Toast</span> <span style=color:#a6e22e>position</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bottom-right&#34;</span> /&gt;
</span></span><span style=display:flex;background-color:#3c3d38><span>  &lt;<span style=color:#f92672>ConfirmDialog</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now, in our <code>UsersList</code> component, we can configure a confirmation dialog in our <code>&lt;script setup></code> section along with a function to actually handle deleting the user from our data:</p><div class=tab-panel data-tab-group=105ff9f43b48357f9497c68bb9c860d7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("105ff9f43b48357f9497c68bb9c860d7","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Users List Component
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>api</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@/configs/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>formatDistance</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;date-fns&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>DataTable</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/datatable&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Column</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/column&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>IconField</span>, <span style=color:#a6e22e>InputIcon</span>, <span style=color:#a6e22e>InputText</span>, <span style=color:#a6e22e>MultiSelect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>FilterMatchMode</span>, <span style=color:#a6e22e>FilterService</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@primevue/core/api&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RoleChip</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../roles/RoleChip.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Button</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/button&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useRouter</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue-router&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useRouter</span>()
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useToast</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue/usetoast&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>toast</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useToast</span>()
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useConfirm</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;primevue&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useConfirm</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Delete User
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>deleteUser</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    .<span style=color:#66d9ef>delete</span>(<span style=color:#e6db74>&#39;/api/v1/users/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>    .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>200</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;success&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Success&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>message</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>        })
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#75715e>// Remove that element from the reactive array
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>        <span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>splice</span>(
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>findIndex</span>((<span style=color:#a6e22e>u</span>) =&gt; <span style=color:#a6e22e>u</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>id</span>),
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>        )
</span></span><span style=display:flex;background-color:#3c3d38><span>      }
</span></span><span style=display:flex;background-color:#3c3d38><span>    })
</span></span><span style=display:flex;background-color:#3c3d38><span>    .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>toast</span>.<span style=color:#a6e22e>add</span>({ <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>summary</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Error&#39;</span>, <span style=color:#a6e22e>detail</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>life</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5000</span> })
</span></span><span style=display:flex;background-color:#3c3d38><span>    })
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Confirmation Dialog
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirmDelete</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>confirm</span>.<span style=color:#a6e22e>require</span>({
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Are you sure you want to delete this user?&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Delete User&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-exclamation-triangle&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>rejectProps</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Cancel&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;secondary&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>outlined</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>acceptProps</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Delete&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>accept</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>deleteUser</span>(<span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>  })
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>In this code, the <code>deleteUser</code> function uses the Axios API instance to delete the user with the given ID. Below that, we have a function that will create a confirmation dialog that follows an example given in the <a href=https://primevue.org/confirmdialog/ rel=external target=_blank>PrimeVue ConfirmDialog</a> documentation for an easy to use dialog for deleting an element from a list.</p><p>Finally, to use this dialog, we can just update our button handler for the delete button in our template to call this <code>confirmDelete</code> function with the ID provided:</p><div class=tab-panel data-tab-group=2219d88b82c19b905e70587b86f6dd0b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("2219d88b82c19b905e70587b86f6dd0b","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;]&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>  &gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Actions&#34;</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;min-width: 8rem&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;slotProps&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;flex gap-2&#34;</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-pencil&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>outlined</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>rounded</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;router.push({ name: &#39;edituser&#39;, params: { id: slotProps.data.id } })&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;&#39;</span><span style=color:#a6e22e>Edit</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>
</span></span><span style=display:flex><span>          /&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>Button</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>icon</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pi pi-trash&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>outlined</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>rounded</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>severity</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;danger&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;confirmDelete(slotProps.data.id)&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;&#39;</span><span style=color:#a6e22e>Delete</span><span style=color:#960050;background-color:#1e0010>&#39;&#34;</span>
</span></span><span style=display:flex><span>          /&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>Column</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Now, we can easily delete users from our users list by clicking the Delete button and confirming the deletion in the popup dialog!</p><p><a href=#R-image-1a16ad5d1f573525541afe403203c7d9 class=lightbox-link><img alt="New User" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/crud_delete1.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-1a16ad5d1f573525541afe403203c7d9><img alt="New User" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/crud_delete1.gif></a></p><p>At this point, our application is now able to perform all of the basic CRUD operations for the users in our application. We can get a list of existing users, create new users, update the existing users, and delete any users we want to delete. All that is left at this point is to lint and format our code, then commit and push!</p><details open class="box cstyle notices warning"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-triangle"></i>
Be Careful about Functions vs. Lambdas</summary><div class=box-content><p>This particular example exposes one of the things we must be extremely careful about when working in JavaScript. Even though it may be more straightforward to use direct function calls in our code, there are times where we must use a lambda function that itself calls the function we want to use, especially when dealing with the event-driven design of many user interface libraries.</p><p>A great example is the confirmation dialog code in this component. The <code>accept</code> property lists the function that should be called when the user clicks the button to accept the change. Right now it is a lambda function that calls our <code>deleteUser</code> function, but what if we change it to just call the <code>deleteUser</code> function directly?</p><div class=tab-panel data-tab-group=df394976763d68a306b2012ea307aee7><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("df394976763d68a306b2012ea307aee7","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Confirmation Dialog
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirmDelete</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>confirm</span>.<span style=color:#a6e22e>require</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Are you sure you want to delete this user?&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Delete User&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-exclamation-triangle&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rejectProps</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Cancel&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;secondary&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>outlined</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>acceptProps</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Delete&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#75715e>// don&#39;t do this
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    <span style=color:#a6e22e>accept</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>deleteUser</span>(<span style=color:#a6e22e>id</span>),
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div><p>Unfortunately, what will happen is this function will be called as soon as the dialog is created, but <strong>BEFORE</strong> the user has clicked the button to accept the change. We can see this in the animation below - the user is deleted from the list even before we click the button in the popup dialog:</p><p><a href=#R-image-df55e3ffc721ee91e7c167af871b949d class=lightbox-link><img alt="New User" class="border lazy lightbox figure-image" loading=lazy src=/cis526/images/examples/06/crud_delete2.gif style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-df55e3ffc721ee91e7c167af871b949d><img alt="New User" class="border lazy lightbox lightbox-image" loading=lazy src=/cis526/images/examples/06/crud_delete2.gif></a></p><p>This happens because the <code>confirmDelete</code> function is trying to get a function <em>pointer</em> for the <code>accept</code> property, so it executes the code inside of that property, expecting it to return a function. Instead, however, it just deletes the user from the list!</p><p>So, we need to remember to wrap that function in a lambda function that will return a pointer to the function we want to use, complete with the parameter of <code>id</code> already populated.</p><div class=tab-panel data-tab-group=e7cf431aea5b32e2993868e74800cda5><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e7cf431aea5b32e2993868e74800cda5","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Confirmation Dialog
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>confirmDelete</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>id</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>confirm</span>.<span style=color:#a6e22e>require</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Are you sure you want to delete this user?&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>header</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Delete User&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>icon</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;pi pi-exclamation-triangle&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rejectProps</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Cancel&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;secondary&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>outlined</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>acceptProps</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>label</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Delete&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>severity</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;danger&#39;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#75715e>// use a lambda here
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    <span style=color:#a6e22e>accept</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>deleteUser</span>(<span style=color:#a6e22e>id</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;</span></span></code></pre></div></div></div></div></div></div></details><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>8.0.0</p><p>Last modified by:
<i class='fa-fw fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis526/commit/398d82ffaeb7826ffd75362eced7b8b105111937>Apr 12, 2025</a></p></div></div><script src=/cis526/js/clipboard/clipboard.min.js?1755561291 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1755561291 defer></script><script src=/cis526/js/theme.min.js?1755561291 defer></script></body></html>