<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="YouTube Video Automating Database Deployment One very helpful feature we can add to our application is the ability to automatically migrate and seed the database when the application first starts. This can be especially helpful when deploying this application in a container.
To do this, let’s add some additional code to our bin/www file that is executed when our project starts:
​ bin/www /** * @file Executable entrypoint for the web application * @author Russell Feldhausen <russfeld@ksu.edu> */ // Import libraries import http from 'http'; // Import Express application import app from '../app.js'; // Import configurations import database from '../configs/database.js'; import logger from '../configs/logger.js'; import migrations from '../configs/migrations.js'; import seeds from '../configs/seeds.js'; // Get port from environment and store in Express. var port = normalizePort(process.env.PORT || '3000'); app.set('port', port); // Create HTTP server. var server = http.createServer(app); // Attach event handlers server.on('error', onError); server.on('listening', onListening); // Call startup function startup(); /** * Server startup function */ function startup() { try { // Test database connection database.authenticate().then(() => { logger.debug(&#34;Database connection successful&#34;) // Run migrations migrations.up().then(() => { logger.debug(&#34;Database migrations complete&#34;) if (process.env.SEED_DATA === 'true') { logger.warn(&#34;Database data seeding is enabled!&#34;) seeds.up().then(() => { logger.debug(&#34;Database seeding complete&#34;) server.listen(port) }) } else { // Listen on provided port, on all network interfaces. server.listen(port) } }) }) } catch (error){ logger.error(error) } } // -=-=- other code omitted here -=-=- We now have a new startup function that will first test the database connection, then run the migrations, and finally it will seed the database if the SEED_DATA environment variable is set to true. Once all that is done, it will start the application by calling server.listen using the port."><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Automation :: CIS 526 Textbook"><meta name=twitter:description content="YouTube Video Automating Database Deployment One very helpful feature we can add to our application is the ability to automatically migrate and seed the database when the application first starts. This can be especially helpful when deploying this application in a container.
To do this, let’s add some additional code to our bin/www file that is executed when our project starts:
​ bin/www /** * @file Executable entrypoint for the web application * @author Russell Feldhausen <russfeld@ksu.edu> */ // Import libraries import http from 'http'; // Import Express application import app from '../app.js'; // Import configurations import database from '../configs/database.js'; import logger from '../configs/logger.js'; import migrations from '../configs/migrations.js'; import seeds from '../configs/seeds.js'; // Get port from environment and store in Express. var port = normalizePort(process.env.PORT || '3000'); app.set('port', port); // Create HTTP server. var server = http.createServer(app); // Attach event handlers server.on('error', onError); server.on('listening', onListening); // Call startup function startup(); /** * Server startup function */ function startup() { try { // Test database connection database.authenticate().then(() => { logger.debug(&#34;Database connection successful&#34;) // Run migrations migrations.up().then(() => { logger.debug(&#34;Database migrations complete&#34;) if (process.env.SEED_DATA === 'true') { logger.warn(&#34;Database data seeding is enabled!&#34;) seeds.up().then(() => { logger.debug(&#34;Database seeding complete&#34;) server.listen(port) }) } else { // Listen on provided port, on all network interfaces. server.listen(port) } }) }) } catch (error){ logger.error(error) } } // -=-=- other code omitted here -=-=- We now have a new startup function that will first test the database connection, then run the migrations, and finally it will seed the database if the SEED_DATA environment variable is set to true. Once all that is done, it will start the application by calling server.listen using the port."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/02-database/06-automation/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Automation :: CIS 526 Textbook"><meta property="og:description" content="YouTube Video Automating Database Deployment One very helpful feature we can add to our application is the ability to automatically migrate and seed the database when the application first starts. This can be especially helpful when deploying this application in a container.
To do this, let’s add some additional code to our bin/www file that is executed when our project starts:
​ bin/www /** * @file Executable entrypoint for the web application * @author Russell Feldhausen <russfeld@ksu.edu> */ // Import libraries import http from 'http'; // Import Express application import app from '../app.js'; // Import configurations import database from '../configs/database.js'; import logger from '../configs/logger.js'; import migrations from '../configs/migrations.js'; import seeds from '../configs/seeds.js'; // Get port from environment and store in Express. var port = normalizePort(process.env.PORT || '3000'); app.set('port', port); // Create HTTP server. var server = http.createServer(app); // Attach event handlers server.on('error', onError); server.on('listening', onListening); // Call startup function startup(); /** * Server startup function */ function startup() { try { // Test database connection database.authenticate().then(() => { logger.debug(&#34;Database connection successful&#34;) // Run migrations migrations.up().then(() => { logger.debug(&#34;Database migrations complete&#34;) if (process.env.SEED_DATA === 'true') { logger.warn(&#34;Database data seeding is enabled!&#34;) seeds.up().then(() => { logger.debug(&#34;Database seeding complete&#34;) server.listen(port) }) } else { // Listen on provided port, on all network interfaces. server.listen(port) } }) }) } catch (error){ logger.error(error) } } // -=-=- other code omitted here -=-=- We now have a new startup function that will first test the database connection, then run the migrations, and finally it will seed the database if the SEED_DATA environment variable is set to true. Once all that is done, it will start the application by calling server.listen using the port."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-03-06T15:49:16-06:00"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Automation :: CIS 526 Textbook"><meta itemprop=description content="YouTube Video Automating Database Deployment One very helpful feature we can add to our application is the ability to automatically migrate and seed the database when the application first starts. This can be especially helpful when deploying this application in a container.
To do this, let’s add some additional code to our bin/www file that is executed when our project starts:
​ bin/www /** * @file Executable entrypoint for the web application * @author Russell Feldhausen <russfeld@ksu.edu> */ // Import libraries import http from 'http'; // Import Express application import app from '../app.js'; // Import configurations import database from '../configs/database.js'; import logger from '../configs/logger.js'; import migrations from '../configs/migrations.js'; import seeds from '../configs/seeds.js'; // Get port from environment and store in Express. var port = normalizePort(process.env.PORT || '3000'); app.set('port', port); // Create HTTP server. var server = http.createServer(app); // Attach event handlers server.on('error', onError); server.on('listening', onListening); // Call startup function startup(); /** * Server startup function */ function startup() { try { // Test database connection database.authenticate().then(() => { logger.debug(&#34;Database connection successful&#34;) // Run migrations migrations.up().then(() => { logger.debug(&#34;Database migrations complete&#34;) if (process.env.SEED_DATA === 'true') { logger.warn(&#34;Database data seeding is enabled!&#34;) seeds.up().then(() => { logger.debug(&#34;Database seeding complete&#34;) server.listen(port) }) } else { // Listen on provided port, on all network interfaces. server.listen(port) } }) }) } catch (error){ logger.error(error) } } // -=-=- other code omitted here -=-=- We now have a new startup function that will first test the database connection, then run the migrations, and finally it will seed the database if the SEED_DATA environment variable is set to true. Once all that is done, it will start the application by calling server.listen using the port."><meta itemprop=dateModified content="2025-03-06T15:49:16-06:00"><meta itemprop=wordCount content="572"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Automation :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-examples/02-database/06-automation/index.html rel=canonical type=text/html title="Automation :: CIS 526 Textbook"><link href=/cis526/x-examples/02-database/06-automation/index.xml rel=alternate type=application/rss+xml title="Automation :: CIS 526 Textbook"><link href=/cis526/x-examples/02-database/06-automation/index.print.html rel=alternate type=text/html title="Automation :: CIS 526 Textbook"><link href=/cis526/x-examples/02-database/06-automation/embed.html rel=alternate type=text/html title="Automation :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1758047999 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1758047999 defer></script><script src=/cis526/js/search-lunr.min.js?1758047999 defer></script><script src=/cis526/js/search.min.js?1758047999 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1758047999"</script><script src=/cis526/js/lunr/lunr.min.js?1758047999 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1758047999 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1758047999 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1758047999 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1758047999 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1758047999 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1758047999 rel=stylesheet><link href=/cis526/css/theme.min.css?1758047999 rel=stylesheet><link href=/cis526/css/format-html.min.css?1758047999 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-examples/02-database/06-automation/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1758047999 rel=stylesheet></head><body class="mobile-support html" data-url=/cis526/x-examples/02-database/06-automation/index.html><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-examples" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=automation>Automation</h1><a href="https://www.youtube.com/watch?v=LMQZ6OXpzGU">YouTube Video</a><h2 id=automating-database-deployment>Automating Database Deployment</h2><p>One very helpful feature we can add to our application is the ability to automatically migrate and seed the database when the application first starts. This can be especially helpful when deploying this application in a container.</p><p>To do this, let&rsquo;s add some additional code to our <code>bin/www</code> file that is executed when our project starts:</p><div class=tab-panel data-tab-group=5b1940fa14832c40084c1b594397faea><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=binwww class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("5b1940fa14832c40084c1b594397faea","binwww")'>
<span class=tab-nav-text>bin/www</span></button></div><div class=tab-content-container><div data-tab-item=binwww class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Executable entrypoint for the web application
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>http</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;http&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Express application
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>app</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../app.js&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import configurations
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>database</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../configs/database.js&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>logger</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../configs/logger.js&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>migrations</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../configs/migrations.js&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>seeds</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;../configs/seeds.js&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Get port from environment and store in Express.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>normalizePort</span>(<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>PORT</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;3000&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;port&#39;</span>, <span style=color:#a6e22e>port</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create HTTP server.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>server</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>createServer</span>(<span style=color:#a6e22e>app</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Attach event handlers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;error&#39;</span>, <span style=color:#a6e22e>onError</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#39;listening&#39;</span>, <span style=color:#a6e22e>onListening</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Call startup function
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#a6e22e>startup</span>();
</span></span><span style=display:flex;background-color:#3c3d38><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> * Server startup function
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>startup</span>() {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#75715e>// Test database connection
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>    <span style=color:#a6e22e>database</span>.<span style=color:#a6e22e>authenticate</span>().<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>debug</span>(<span style=color:#e6db74>&#34;Database connection successful&#34;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#75715e>// Run migrations
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>      <span style=color:#a6e22e>migrations</span>.<span style=color:#a6e22e>up</span>().<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>debug</span>(<span style=color:#e6db74>&#34;Database migrations complete&#34;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>SEED_DATA</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;true&#39;</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>warn</span>(<span style=color:#e6db74>&#34;Database data seeding is enabled!&#34;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>seeds</span>.<span style=color:#a6e22e>up</span>().<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>debug</span>(<span style=color:#e6db74>&#34;Database seeding complete&#34;</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>            <span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>port</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>          })
</span></span><span style=display:flex;background-color:#3c3d38><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#75715e>// Listen on provided port, on all network interfaces.
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>          <span style=color:#a6e22e>server</span>.<span style=color:#a6e22e>listen</span>(<span style=color:#a6e22e>port</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>        }
</span></span><span style=display:flex;background-color:#3c3d38><span>      })
</span></span><span style=display:flex;background-color:#3c3d38><span>    })
</span></span><span style=display:flex;background-color:#3c3d38><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>){
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex;background-color:#3c3d38><span>  }
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// -=-=- other code omitted here -=-=-
</span></span></span></code></pre></div></div></div></div></div><p>We now have a new <code>startup</code> function that will first test the database connection, then run the migrations, and finally it will seed the database if the <code>SEED_DATA</code> environment variable is set to <code>true</code>. Once all that is done, it will start the application by calling <code>server.listen</code> using the port.</p><p>Notice that this code uses the <code>then()</code> function to resolve promises instead of the <code>async</code> and <code>await</code> keywords. This is because it is running at the top level, and cannot include any <code>await</code> keywords.</p><p>To enable this, let&rsquo;s add the <code>SEED_DATA</code> environment variable to both <code>.env</code> and <code>.env.example</code>:</p><div class=tab-panel data-tab-group=19e13e05ef8fc53f571c268ea4458aa0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=env class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("19e13e05ef8fc53f571c268ea4458aa0","env")'>
<span class=tab-nav-text>.env</span></button></div><div class=tab-content-container><div data-tab-item=env class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-env data-lang=env><span style=display:flex><span>LOG_LEVEL<span style=color:#f92672>=</span>debug
</span></span><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span>
</span></span><span style=display:flex><span>OPENAPI_HOST<span style=color:#f92672>=</span>https://$CODESPACE_NAME-$PORT.$GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN
</span></span><span style=display:flex><span>OPENAPI_VISIBLE<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>DATABASE_FILE<span style=color:#f92672>=</span>database.sqlite
</span></span><span style=display:flex;background-color:#3c3d38><span>SEED_DATA<span style=color:#f92672>=</span>true</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=30ae977860bade4920c793dfbb502b84><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=envexample class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("30ae977860bade4920c793dfbb502b84","envexample")'>
<span class=tab-nav-text>.env.example</span></button></div><div class=tab-content-container><div data-tab-item=envexample class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-env data-lang=env><span style=display:flex><span>LOG_LEVEL<span style=color:#f92672>=</span>debug
</span></span><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span>
</span></span><span style=display:flex><span>OPENAPI_HOST<span style=color:#f92672>=</span>http://localhost:3000
</span></span><span style=display:flex><span><span style=color:#75715e># For GitHub Codespaces</span>
</span></span><span style=display:flex><span><span style=color:#75715e># OPENAPI_HOST=https://$CODESPACE_NAME-$PORT.$GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN</span>
</span></span><span style=display:flex><span>OPENAPI_VISIBLE<span style=color:#f92672>=</span>false
</span></span><span style=display:flex><span>DATABASE_FILE<span style=color:#f92672>=</span>database.sqlite
</span></span><span style=display:flex;background-color:#3c3d38><span>SEED_DATA<span style=color:#f92672>=</span>false</span></span></code></pre></div></div></div></div></div><p>To test this, we can delete the <code>database.sqlite</code> file in our repository, then start our project:</p><div class=tab-panel data-tab-group=3ee80fc9188f7ace3817070a7963a2fe><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3ee80fc9188f7ace3817070a7963a2fe","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm run dev</span></span></code></pre></div></div></div></div></div><p>If it works correctly, we should see that our application is able to connect to the database, migrate the schema, and add the seed data, before fully starting:</p><div class=tab-panel data-tab-group=7286e22b7b095f29f5f83f985412f71d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("7286e22b7b095f29f5f83f985412f71d","output")'>
<span class=tab-nav-text>output</span></button></div><div class=tab-content-container><div data-tab-item=output class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto hl_lines=11-23><pre tabindex=0><code>&gt; example-project@0.0.1 dev
&gt; nodemon ./bin/www

[nodemon] 3.1.9
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,cjs,json
[nodemon] starting `node ./bin/www`
[dotenvx@1.34.0] injecting env (6) from .env
[2025-02-04 06:56:11.823 PM] warn:      OpenAPI documentation visible!
[2025-02-04 06:56:12.163 PM] debug:     Database connection successful
[2025-02-04 06:56:12.208 PM] info:      { event: &#39;migrating&#39;, name: &#39;00_users.js&#39; }
[2025-02-04 06:56:12.265 PM] info:      { event: &#39;migrated&#39;, name: &#39;00_users.js&#39;, durationSeconds: 0.058 }
[2025-02-04 06:56:12.266 PM] debug:     Database migrations complete
[2025-02-04 06:56:12.266 PM] warn:      Database data seeding is enabled!
[2025-02-04 06:56:12.296 PM] info:      { event: &#39;migrating&#39;, name: &#39;00_users.js&#39; }
[2025-02-04 06:56:12.321 PM] info:      { event: &#39;migrated&#39;, name: &#39;00_users.js&#39;, durationSeconds: 0.024 }
[2025-02-04 06:56:12.321 PM] debug:     Database seeding complete
[2025-02-04 06:56:12.323 PM] info:      Listening on port 3000</code></pre></div></div></div></div></div><p>There we go! Our application will now always make sure the database is properly migrated, and optionally seeded, before it starts. Now, when another developer or user starts our application, it will be sure to have a working database.</p><p>This is a good point to <strong>commit and push</strong> our work!</p><footer class=footline></footer></article></div></main></div><script src=/cis526/js/clipboard/clipboard.min.js?1758047999 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1758047999 defer></script><script src=/cis526/js/theme.min.js?1758047999 defer></script></div><script src=/cis526/js/tele-scroll.min.js?1758047999 defer></script></body></html>