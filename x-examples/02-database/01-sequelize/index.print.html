<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="YouTube Video Database Libraries To begin, we must first select a library to use when interfacing with our database. There are many different types of libraries, and many different options to choose from.
First and foremost, we can always just write raw SQL queries directly in our code. This is often very straightforward, but also can lead to very complex code and security issues. It also doesn’t offer many of the more advanced features such as mapping database results to object types and automatically managing database schemas."><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Sequelize :: CIS 526 Textbook"><meta name=twitter:description content="YouTube Video Database Libraries To begin, we must first select a library to use when interfacing with our database. There are many different types of libraries, and many different options to choose from.
First and foremost, we can always just write raw SQL queries directly in our code. This is often very straightforward, but also can lead to very complex code and security issues. It also doesn’t offer many of the more advanced features such as mapping database results to object types and automatically managing database schemas."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/02-database/01-sequelize/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Sequelize :: CIS 526 Textbook"><meta property="og:description" content="YouTube Video Database Libraries To begin, we must first select a library to use when interfacing with our database. There are many different types of libraries, and many different options to choose from.
First and foremost, we can always just write raw SQL queries directly in our code. This is often very straightforward, but also can lead to very complex code and security issues. It also doesn’t offer many of the more advanced features such as mapping database results to object types and automatically managing database schemas."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-04-11T12:49:10-05:00"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Sequelize :: CIS 526 Textbook"><meta itemprop=description content="YouTube Video Database Libraries To begin, we must first select a library to use when interfacing with our database. There are many different types of libraries, and many different options to choose from.
First and foremost, we can always just write raw SQL queries directly in our code. This is often very straightforward, but also can lead to very complex code and security issues. It also doesn’t offer many of the more advanced features such as mapping database results to object types and automatically managing database schemas."><meta itemprop=dateModified content="2025-04-11T12:49:10-05:00"><meta itemprop=wordCount content="1051"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Sequelize :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-examples/02-database/01-sequelize/index.html rel=canonical type=text/html title="Sequelize :: CIS 526 Textbook"><link href=/cis526/x-examples/02-database/01-sequelize/index.xml rel=alternate type=application/rss+xml title="Sequelize :: CIS 526 Textbook"><link href=/cis526/x-examples/02-database/01-sequelize/tele.html rel=alternate type=text/html title="Sequelize :: CIS 526 Textbook"><link href=/cis526/x-examples/02-database/01-sequelize/embed.html rel=alternate type=text/html title="Sequelize :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1769640562 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1769640562 defer></script><script src=/cis526/js/search-lunr.min.js?1769640562 defer></script><script src=/cis526/js/search.min.js?1769640562 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1769640562"</script><script src=/cis526/js/lunr/lunr.min.js?1769640562 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1769640562 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1769640562 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1769640562 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1769640562 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1769640562 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1769640562 rel=stylesheet><link href=/cis526/css/theme.min.css?1769640562 rel=stylesheet><link href=/cis526/css/format-print.min.css?1769640562 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-examples/02-database/01-sequelize/index.html",window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1769640562 rel=stylesheet></head><body class="mobile-support embed print" data-url=/cis526/x-examples/02-database/01-sequelize/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-examples" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=sequelize>Sequelize</h1><a href="https://www.youtube.com/watch?v=RN46EzaMHy0">YouTube Video</a><h2 id=database-libraries>Database Libraries</h2><p>To begin, we must first select a library to use when interfacing with our database. There are many different types of libraries, and many different options to choose from.</p><ol><li><p>First and foremost, we can always just write raw SQL queries directly in our code. This is often very straightforward, but also can lead to very complex code and security issues. It also doesn&rsquo;t offer many of the more advanced features such as mapping database results to object types and automatically managing database schemas.</p></li><li><p>Another option is an SQL query library, such as <a href=https://knexjs.org/ rel=external target=_blank>Knex.js</a> or <a href=https://kysely.dev/ rel=external target=_blank>Kysely</a>. These libraries provide a helpful abstraction on top of SQL, allowing developers to build queries using syntax that is more comfortable and familiar to them. These libraries also have additional features to manage database schemas and sample data</p></li><li><p>The final option is an <a href=https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping rel=external target=_blank>Object-Relational Mapping (ORM)</a> library such as <a href=https://vincit.github.io/objection.js/ rel=external target=_blank>Objection</a> or <a href=https://sequelize.org/ rel=external target=_blank>Sequelize</a>. These libraries provide the most abstraction away from raw SQL, often allowing developers to store and retrieve data in a database as if it were stored in a list or dictionary data structure.</p></li></ol><p>For this project, we&rsquo;re going to use the <a href=https://sequelize.org/ rel=external target=_blank>Sequelize</a> ORM, coupled with the <a href=https://github.com/sequelize/umzug rel=external target=_blank>Umzug</a> migration tool. Both of these libraries are very commonly used in Node.js projects, and are actively maintained.</p><details open class="box cstyle notices note"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-exclamation-circle"></i>
Database Engines</summary><div class=box-content><p>We also have many choices for the database engine we want to use for our web projects. Some common options include <a href=https://www.postgresql.org/ rel=external target=_blank>PostgreSQL</a>, <a href=https://www.mysql.com/ rel=external target=_blank>MySQL</a>, <a href=https://mariadb.org/ rel=external target=_blank>MariaDB</a>, <a href=https://www.mongodb.com/ rel=external target=_blank>MongoDB</a>, <a href=https://firebase.google.com/ rel=external target=_blank>Firebase</a>, and many more.</p><p>For this project, we&rsquo;re going to use <a href=https://www.sqlite.org/ rel=external target=_blank>SQLite</a>. SQLite is unique because it is a database engine that only requires a single file, so it is self-contained and easy to work with. It doesn&rsquo;t require any external database servers or software, making it perfect for a small development project. In fact, SQLite may be one of the most <a href=https://www.sqlite.org/mostdeployed.html rel=external target=_blank>widely deployed software modules</a> in the whole world!</p><p>Naturally, if wer plan on growing a web application beyond a simple hobby project with a few users, we should spend some time researching a reliable database solution. Thankfully, the Sequelize ORM supports <a href=https://sequelize.org/docs/v6/other-topics/dialect-specific-things/ rel=external target=_blank>many different database engines</a> so it is easy to switch.</p></div></details><h2 id=installing-sequelize>Installing Sequelize</h2><p>To begin, let&rsquo;s install both <code>sequelize</code> as well as the <code>sqlite3</code> library using <code>npm</code>:</p><div class=tab-panel data-tab-group=a2acccaae243cb16a7ae879205ed58f1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a2acccaae243cb16a7ae879205ed58f1","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ npm install sqlite3 sequelize</span></span></code></pre></div></div></div></div></div><p>Once those libraries are installed, we can now configure <code>sequelize</code> following the information in the <a href=https://sequelize.org/docs/v6/getting-started/ rel=external target=_blank>Sequelize Documentation</a>. Let&rsquo;s create a new file <code>configs/database.js</code> to store our database configuration:</p><div class=tab-panel data-tab-group=3ae3485023650b9926682b335139a271><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configsdatabasejs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3ae3485023650b9926682b335139a271","configsdatabasejs")'>
<span class=tab-nav-text>configs/database.js</span></button></div><div class=tab-content-container><div data-tab-item=configsdatabasejs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Configuration information for Sequelize database ORM
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @exports sequelize a Sequelize instance
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Sequelize</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;sequelize&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import logger configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>logger</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./logger.js&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create Sequelize instance
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sequelize</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Sequelize</span>({
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>dialect</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;sqlite&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>storage</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>DATABASE_FILE</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;:memory:&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>logging</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>sql</span>.<span style=color:#a6e22e>bind</span>(<span style=color:#a6e22e>logger</span>)
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>sequelize</span>;</span></span></code></pre></div></div></div></div></div><p>This file creates a very simple configuration for <code>sequelize</code> that uses the <code>sqlite</code> dialect. It uses the <code>DATABASE_FILE</code> environment variable to control the location of the database in the file system, and it also uses the <code>logger.sql</code> log level to log any data produced by the library. If a <code>DATABASE_FILE</code> environment variable is not provided, it will default to storing data in the SQLite <a href=https://www.sqlite.org/inmemorydb.html rel=external target=_blank>In-Memory Database</a>, which is great for testing and quick development.</p><p>Of course, a couple of those items don&rsquo;t actually exist yet, so let&rsquo;s add those in before we move on! First, we need to add a <code>DATABASE_FILE</code> environment variable to both our <code>.env</code> and <code>.env.example</code> files:</p><div class=tab-panel data-tab-group=1072dc4c8235b0e7513b1e19bf11e8e2><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=env class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1072dc4c8235b0e7513b1e19bf11e8e2","env")'>
<span class=tab-nav-text>.env</span></button></div><div class=tab-content-container><div data-tab-item=env class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-env data-lang=env><span style=display:flex><span>LOG_LEVEL<span style=color:#f92672>=</span>debug
</span></span><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span>
</span></span><span style=display:flex><span>OPENAPI_HOST<span style=color:#f92672>=</span>https://$CODESPACE_NAME-$PORT.$GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN
</span></span><span style=display:flex><span>OPENAPI_VISIBLE<span style=color:#f92672>=</span>true
</span></span><span style=display:flex;background-color:#3c3d38><span>DATABASE_FILE<span style=color:#f92672>=</span>database.sqlite</span></span></code></pre></div></div></div></div></div><div class=tab-panel data-tab-group=1058342d027474c3441d0e1bdd9013cc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=envexample class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1058342d027474c3441d0e1bdd9013cc","envexample")'>
<span class=tab-nav-text>.env.example</span></button></div><div class=tab-content-container><div data-tab-item=envexample class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-env data-lang=env><span style=display:flex><span>LOG_LEVEL<span style=color:#f92672>=</span>debug
</span></span><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span>
</span></span><span style=display:flex><span>OPENAPI_HOST<span style=color:#f92672>=</span>http://localhost:3000
</span></span><span style=display:flex><span><span style=color:#75715e># For GitHub Codespaces</span>
</span></span><span style=display:flex><span><span style=color:#75715e># OPENAPI_HOST=https://$CODESPACE_NAME-$PORT.$GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN</span>
</span></span><span style=display:flex><span>OPENAPI_VISIBLE<span style=color:#f92672>=</span>false
</span></span><span style=display:flex;background-color:#3c3d38><span>DATABASE_FILE<span style=color:#f92672>=</span>database.sqlite</span></span></code></pre></div></div></div></div></div><p>We also need to add a new logging level called <code>sql</code> to our logger configuration in <code>configs/logger.js</code>. This is a bit more involved, because it means we have to now list all intended logging levels explicitly. See the highlighted lines below for what has been changed, but the entire file is included for convenience:</p><div class=tab-panel data-tab-group=0ca76509b8e88fe9ead772cfd8dad80a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configsloggerjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0ca76509b8e88fe9ead772cfd8dad80a","configsloggerjs")'>
<span class=tab-nav-text>configs/logger.js</span></button></div><div class=tab-content-container><div data-tab-item=configsloggerjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file Configuration information for Winston logger
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @exports logger a Winston logger object
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>winston</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;winston&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Extract format options
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>combine</span>, <span style=color:#a6e22e>timestamp</span>, <span style=color:#a6e22e>printf</span>, <span style=color:#a6e22e>colorize</span>, <span style=color:#a6e22e>align</span>, <span style=color:#a6e22e>errors</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>format</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Determines the correct logging level based on the Node environment
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @returns {string} the desired log level
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>level</span> () {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;error&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;error&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;warn&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;warn&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;2&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;info&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;info&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;3&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;http&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;http&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;4&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;verbose&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;verbose&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;5&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;debug&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;debug&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;6&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;sql&#39;</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;sql&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;7&#39;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>LOG_LEVEL</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;silly&#39;</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;silly&#39;</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;http&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Custom logging levels for the application
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>levels</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>warn</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>http</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>verbose</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>4</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>debug</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>sql</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>6</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>silly</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>7</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex;background-color:#3c3d38><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e>// Custom colors
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>colors</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>error</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;red&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>warn</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;yellow&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>info</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;green&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>http</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;green&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>verbose</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;cyan&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>debug</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;blue&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>sql</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;gray&#39;</span>,
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>silly</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;magenta&#39;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>}
</span></span><span style=display:flex;background-color:#3c3d38><span>
</span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>addColors</span>(<span style=color:#a6e22e>colors</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Creates the Winston instance with the desired configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>logger</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>createLogger</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// call `level` function to get default log level
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>level</span>(),
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>levels</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>levels</span>,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Format configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// See https://github.com/winstonjs/logform
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>combine</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colorize</span>({ <span style=color:#a6e22e>all</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>errors</span>({ <span style=color:#a6e22e>stack</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>timestamp</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;YYYY-MM-DD hh:mm:ss.SSS A&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>align</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>info</span>) =&gt;
</span></span><span style=display:flex><span>        <span style=color:#e6db74>`[</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>timestamp</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>level</span><span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>stack</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;\n&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>stack</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>  ),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Output configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>transports</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>transports</span>.<span style=color:#a6e22e>Console</span>()],
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>logger</span>;</span></span></code></pre></div></div></div></div></div><p>We have added a new <code>sql</code> logging level that is now part of our logging setup. One of the unique features of <code>sequelize</code> is that it will actually allow us to log all SQL queries run against our database, so we can enable and disable that level of logging by adjusting the <code>LOG_LEVEL</code> environment variable as desired.</p><p>There! We now have a working database configuration. Before we can make use of it, however, we need to add additional code to create and populate our database. So, we&rsquo;ll need to continue on in this tutorial before we can actually test our application.</p><footer class=footline></footer></article></div></main></div><script src=/cis526/js/clipboard/clipboard.min.js?1769640562 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1769640562 defer></script><script src=/cis526/js/theme.min.js?1769640562 defer></script><script src=/cis526/js/embed-iframe.min.js?1769640562 defer></script></body></html>