<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="YouTube Video Other Useful Libraries Before we move on, let’s install a few other useful libraries that perform various tasks in our Express application.
Compression The compression middleware library does exactly what it says it will - it compresses any responses generated by the server and sent through the network. This can be helpful in many situations, but not all. Recall that compression is really just trading more processing time in exchange for less network bandwidth, so we may need to consider which of those we are more concerned about."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Other Libraries :: CIS 526 Textbook"><meta name=twitter:description content="YouTube Video Other Useful Libraries Before we move on, let’s install a few other useful libraries that perform various tasks in our Express application.
Compression The compression middleware library does exactly what it says it will - it compresses any responses generated by the server and sent through the network. This can be helpful in many situations, but not all. Recall that compression is really just trading more processing time in exchange for less network bandwidth, so we may need to consider which of those we are more concerned about."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/01-express-starter/06-other-libraries/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Other Libraries :: CIS 526 Textbook"><meta property="og:description" content="YouTube Video Other Useful Libraries Before we move on, let’s install a few other useful libraries that perform various tasks in our Express application.
Compression The compression middleware library does exactly what it says it will - it compresses any responses generated by the server and sent through the network. This can be helpful in many situations, but not all. Recall that compression is really just trading more processing time in exchange for less network bandwidth, so we may need to consider which of those we are more concerned about."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="Example Projects"><meta property="article:modified_time" content="2025-03-06T15:49:16-06:00"><meta itemprop=name content="Other Libraries :: CIS 526 Textbook"><meta itemprop=description content="YouTube Video Other Useful Libraries Before we move on, let’s install a few other useful libraries that perform various tasks in our Express application.
Compression The compression middleware library does exactly what it says it will - it compresses any responses generated by the server and sent through the network. This can be helpful in many situations, but not all. Recall that compression is really just trading more processing time in exchange for less network bandwidth, so we may need to consider which of those we are more concerned about."><meta itemprop=dateModified content="2025-03-06T15:49:16-06:00"><meta itemprop=wordCount content="1547"><title>Other Libraries :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/x-examples/01-express-starter/06-other-libraries/ rel=canonical type=text/html title="Other Libraries :: CIS 526 Textbook"><link href=/cis526/x-examples/01-express-starter/06-other-libraries/index.xml rel=alternate type=application/rss+xml title="Other Libraries :: CIS 526 Textbook"><link href=/cis526/x-examples/01-express-starter/06-other-libraries/index.print.html rel=alternate type=text/html title="Other Libraries :: CIS 526 Textbook"><link href=/cis526/x-examples/01-express-starter/06-other-libraries/embed.html rel=alternate type=text/html title="Other Libraries :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1744923631 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1744923631 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1744923631 rel=stylesheet><link href=/cis526/css/auto-complete.css?1744923631 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1744923631 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1744923631 rel=stylesheet><link href=/cis526/css/fonts.css?1744923631 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1744923631 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1744923631 rel=stylesheet><link href=/cis526/css/theme-auto.css?1744923631 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1744923631 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1744923631 rel=stylesheet><link href=/cis526/css/print.css?1744923631 rel=stylesheet media=print><script src=/cis526/js/variant.js?1744923631></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../..",window.relearn.relBaseUri="../../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1744923631 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis526/x-examples/01-express-starter/06-other-libraries/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=other-libraries>Other Libraries</h1><a href="https://www.youtube.com/watch?v=ntg2fQQ1FQ8">YouTube Video</a><h2 id=other-useful-libraries>Other Useful Libraries</h2><p>Before we move on, let&rsquo;s install a few other useful libraries that perform various tasks in our Express application.</p><h3 id=compression>Compression</h3><p>The <a href=https://www.npmjs.com/package/compression rel=external target=_blank>compression</a> middleware library does exactly what it says it will - it compresses any responses generated by the server and sent through the network. This can be helpful in many situations, but not all. Recall that compression is really just trading more processing time in exchange for less network bandwidth, so we may need to consider which of those we are more concerned about. Thankfully, adding or removing the <code>compression</code> middleware library is simple.</p><p>First, let&rsquo;s install it using <code>npm</code>:</p><div class=tab-panel data-tab-group=d6a48c442fcc044b520cb6475ec138a0><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d6a48c442fcc044b520cb6475ec138a0","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm install compression</span></span></code></pre></div></div></div></div></div><p>Then, we can add it to our <code>app.js</code> file, generally early in the chain of middlewares since it will impact all responses after that point in the chain.</p><div class=tab-panel data-tab-group=3c2cc4c6610f70cedf918a280662315a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=appjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3c2cc4c6610f70cedf918a280662315a","appjs")'>
<span class=tab-nav-text>app.js</span></button></div><div class=tab-content-container><div data-tab-item=appjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=nx>from</span> <span class=s1>&#39;express&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>path</span> <span class=nx>from</span> <span class=s1>&#39;path&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>cookieParser</span> <span class=nx>from</span> <span class=s1>&#39;cookie-parser&#39;</span><span class=p>;</span>
</span></span><span class="line hl"><span class=cl><span class=kr>import</span> <span class=nx>compression</span> <span class=nx>from</span> <span class=s1>&#39;compression&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>requestLogger</span> <span class=nx>from</span> <span class=s1>&#39;./middlewares/request-logger.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>indexRouter</span> <span class=nx>from</span> <span class=s1>&#39;./routes/index.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>usersRouter</span> <span class=nx>from</span> <span class=s1>&#39;./routes/users.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>compression</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>requestLogger</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>urlencoded</span><span class=p>({</span> <span class=nx>extended</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cookieParser</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=kr>static</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>dirname</span><span class=p>,</span> <span class=s1>&#39;public&#39;</span><span class=p>)));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=nx>indexRouter</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/users&#39;</span><span class=p>,</span> <span class=nx>usersRouter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>app</span><span class=p>;</span></span></span></code></pre></div></div></div></div></div><p>To test this library, we can run our application with all built-in debugging enabled through the <code>debug</code> library as documented in the <a href=https://expressjs.com/en/guide/debugging.html rel=external target=_blank>Express Documentation</a>:</p><div class=tab-panel data-tab-group=1e8e7cff819c8f6418af71878d999a79><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1e8e7cff819c8f6418af71878d999a79","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nv>DEBUG</span><span class=o>=</span>* npm run dev</span></span></code></pre></div></div></div></div></div><p>We&rsquo;ll see a bunch of output as our Express application is initialized. Once it is done, we can open the home page in our web browser to send an HTTP GET request to the server. This will produce the following log output:</p><div class=tab-panel data-tab-group=a10f0bb98d1145ca6f19260bb67c65cd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("a10f0bb98d1145ca6f19260bb67c65cd","output")'>
<span class=tab-nav-text>output</span></button></div><div class=tab-content-container><div data-tab-item=output class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>  express:router dispatching GET / +1m
</span></span><span class=line><span class=cl>  express:router query  : / +0ms
</span></span><span class=line><span class=cl>  express:router expressInit  : / +1ms
</span></span><span class=line><span class=cl>  express:router compression  : / +0ms
</span></span><span class=line><span class=cl>  express:router logger  : / +0ms
</span></span><span class=line><span class=cl>  express:router urlencodedParser  : / +0ms
</span></span><span class=line><span class=cl>  body-parser:urlencoded skip empty body +1ms
</span></span><span class=line><span class=cl>  express:router cookieParser  : / +0ms
</span></span><span class=line><span class=cl>  express:router serveStatic  : / +0ms
</span></span><span class=line><span class=cl>  send stat <span class=s2>&#34;/workspaces/example-project/server/public/index.html&#34;</span> +0ms
</span></span><span class=line><span class=cl>  send pipe <span class=s2>&#34;/workspaces/example-project/server/public/index.html&#34;</span> +1ms
</span></span><span class=line><span class=cl>  send accept ranges +0ms
</span></span><span class=line><span class=cl>  send cache-control public, max-age<span class=o>=</span><span class=m>0</span> +0ms
</span></span><span class=line><span class=cl>  send modified Thu, <span class=m>16</span> Jan <span class=m>2025</span> 23:17:14 GMT +0ms
</span></span><span class=line><span class=cl>  send etag W/<span class=s2>&#34;78-1947168173e&#34;</span> +1ms
</span></span><span class=line><span class=cl>  send content-type text/html +0ms
</span></span><span class="line hl"><span class=cl>  compression no compression: size below threshold +1ms
</span></span><span class=line><span class=cl>  morgan log request +2ms
</span></span><span class=line><span class=cl><span class=o>[</span>2025-01-25 07:00:35.013 PM<span class=o>]</span> http:      GET / <span class=m>200</span> 3.166 ms - <span class=m>120</span></span></span></code></pre></div></div></div></div></div><p>We can see in the highlighted line that the <code>compression</code> library did not apply any compression to the response because it was below the minium size threshold. This is set to 1kb by default according to the <a href=https://www.npmjs.com/package/compression rel=external target=_blank>compression</a> documentation.</p><p>So, to really see what it does, let&rsquo;s generate a much larger response by adding some additional text to our <code>public/index.html</code> file (this text was generated using <a href=https://www.lipsum.com/ rel=external target=_blank>Lorem Ipsum</a>):</p><div class=tab-panel data-tab-group=9aba90c339f3fc1b8737aee8bcbe3349><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=publicindexhtml class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("9aba90c339f3fc1b8737aee8bcbe3349","publicindexhtml")'>
<span class=tab-nav-text>public/index.html</span></button></div><div class=tab-content-container><div data-tab-item=publicindexhtml class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Express<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Express<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>Welcome to Express<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sed arcu tincidunt, porttitor diam a, porta nibh. Duis pretium tellus euismod, imperdiet elit id, gravida turpis. Fusce vitae pulvinar tellus. Donec cursus pretium justo, sed vehicula erat iaculis lobortis. Mauris dapibus scelerisque aliquet. Nullam posuere, magna vitae viverra lacinia, sapien magna imperdiet erat, ac sagittis ante ante tristique eros. Phasellus eget fermentum mauris. Integer justo lorem, finibus a ullamcorper in, feugiat in nunc. Etiam ut felis a magna aliquam consectetur. Duis eu mauris ut leo vehicula fringilla scelerisque vel mi. Donec placerat quam nulla, at commodo orci maximus sit amet. Curabitur tincidunt euismod enim, non feugiat nulla eleifend sed. Sed finibus metus sit amet metus congue commodo. Cras ullamcorper turpis sed mi scelerisque porta.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>Sed maximus diam in blandit elementum. Integer diam ante, tincidunt in pulvinar at, luctus in dui. Fusce tincidunt hendrerit dolor in suscipit. Nullam vitae tellus at justo bibendum blandit a vel ligula. Nunc sed augue blandit, finibus nisi nec, posuere orci. Maecenas ut egestas diam. Donec non orci nec ex rhoncus malesuada at eget ante. Proin ultricies cursus nunc eu mollis. Donec vel ligula vel eros luctus pulvinar. Proin vitae dui imperdiet, rutrum risus non, maximus purus. Vivamus fringilla augue tincidunt, venenatis arcu eu, dictum nunc. Mauris eu ullamcorper orci. Cras efficitur egestas ligula. Maecenas a nisl bibendum turpis tristique lobortis.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span></span></span></code></pre></div></div></div></div></div><p>Now, when we request that file, we should see this line in our debug output:</p><div class=tab-panel data-tab-group=e534b4f5d6bdefafe6248dca2c11784e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("e534b4f5d6bdefafe6248dca2c11784e","output")'>
<span class=tab-nav-text>output</span></button></div><div class=tab-content-container><div data-tab-item=output class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>express:router dispatching GET / +24s
</span></span><span class=line><span class=cl>  express:router query  : / +1ms
</span></span><span class=line><span class=cl>  express:router expressInit  : / +0ms
</span></span><span class=line><span class=cl>  express:router compression  : / +0ms
</span></span><span class=line><span class=cl>  express:router logger  : / +0ms
</span></span><span class=line><span class=cl>  express:router urlencodedParser  : / +0ms
</span></span><span class=line><span class=cl>  body-parser:urlencoded skip empty body +0ms
</span></span><span class=line><span class=cl>  express:router cookieParser  : / +1ms
</span></span><span class=line><span class=cl>  express:router serveStatic  : / +0ms
</span></span><span class=line><span class=cl>  send stat <span class=s2>&#34;/workspaces/example-project/server/public/index.html&#34;</span> +0ms
</span></span><span class=line><span class=cl>  send pipe <span class=s2>&#34;/workspaces/example-project/server/public/index.html&#34;</span> +0ms
</span></span><span class=line><span class=cl>  send accept ranges +0ms
</span></span><span class=line><span class=cl>  send cache-control public, max-age<span class=o>=</span><span class=m>0</span> +0ms
</span></span><span class=line><span class=cl>  send modified Sat, <span class=m>25</span> Jan <span class=m>2025</span> 19:05:18 GMT +0ms
</span></span><span class=line><span class=cl>  send etag W/<span class=s2>&#34;678-1949edaaa4c&#34;</span> +0ms
</span></span><span class=line><span class=cl>  send content-type text/html +0ms
</span></span><span class="line hl"><span class=cl>  compression gzip compression +1ms
</span></span><span class=line><span class=cl>  morgan log request +1ms
</span></span><span class=line><span class=cl><span class=o>[</span>2025-01-25 07:05:20.234 PM<span class=o>]</span> http:      GET / <span class=m>200</span> 1.232 ms - -</span></span></code></pre></div></div></div></div></div><p>As we can see, the <code>compression</code> middleware is now compressing the response before it is sent to the server using the <a href=https://en.wikipedia.org/wiki/Gzip rel=external target=_blank>gzip</a> compression algorithm. We can also see this in our web browser&rsquo;s debugging tools - in Google Chrome, we notice that the <code>Content-Encoding</code> header is set to <code>gzip</code> as shown below:</p><p><a href=#R-image-afda19567762c580c55a4ab06a9548ee class=lightbox-link><img alt="Compressed Server Response" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/other_1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-afda19567762c580c55a4ab06a9548ee><img alt="Compressed Server Response" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/other_1.png></a></p><p>We&rsquo;ll go ahead and integrate the <code>compression</code> middleware into our project for this course, but as discussed above, it is always worth considering whether the tradeoff of additional processing time to save network bandwidth is truly worth it.</p><h3 id=helmet>Helmet</h3><p>Another very useful Express library is <a href=https://www.npmjs.com/package/helmet rel=external target=_blank>helmet</a>. Helmet sets several headers in the HTTP response from an Express application to help improve security. This includes things such as setting an appropriate <a href=https://helmetjs.github.io/#content-security-policy rel=external target=_blank>Content-Security-Policy</a> and removing information about the web server that could be leaked in the <a href=https://helmetjs.github.io/#x-powered-by rel=external target=_blank>X-Powered-By</a> header.</p><p>To install <code>helmet</code> we can simply use <code>npm</code> as always:</p><div class=tab-panel data-tab-group=d1b161e26a86912b8832ae6a33e0815f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("d1b161e26a86912b8832ae6a33e0815f","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm install helmet</span></span></code></pre></div></div></div></div></div><p>Similar to the <code>compression</code> library above, we can simply add <code>helmet</code> to our Express application&rsquo;s <code>app.js</code> file:</p><div class=tab-panel data-tab-group=b8f6922d9301286529e8865de6117eed><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=appjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b8f6922d9301286529e8865de6117eed","appjs")'>
<span class=tab-nav-text>app.js</span></button></div><div class=tab-content-container><div data-tab-item=appjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=nx>express</span> <span class=nx>from</span> <span class=s1>&#39;express&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>path</span> <span class=nx>from</span> <span class=s1>&#39;path&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>cookieParser</span> <span class=nx>from</span> <span class=s1>&#39;cookie-parser&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>compression</span> <span class=nx>from</span> <span class=s1>&#39;compression&#39;</span><span class=p>;</span>
</span></span><span class="line hl"><span class=cl><span class=kr>import</span> <span class=nx>helmet</span> <span class=nx>from</span> <span class=s1>&#39;helmet&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>requestLogger</span> <span class=nx>from</span> <span class=s1>&#39;./middlewares/request-logger.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>indexRouter</span> <span class=nx>from</span> <span class=s1>&#39;./routes/index.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>usersRouter</span> <span class=nx>from</span> <span class=s1>&#39;./routes/users.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class="line hl"><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>helmet</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>compression</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>requestLogger</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>urlencoded</span><span class=p>({</span> <span class=nx>extended</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cookieParser</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=kr>static</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=kr>import</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>dirname</span><span class=p>,</span> <span class=s1>&#39;public&#39;</span><span class=p>)));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=nx>indexRouter</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/users&#39;</span><span class=p>,</span> <span class=nx>usersRouter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>app</span><span class=p>;</span></span></span></code></pre></div></div></div></div></div><p>To really see what the <code>helmet</code> library does, we can examine the headers sent by the server with and without <code>helmet</code> enabled.</p><p>First, here are the headers sent by the server without <code>helmet</code> enabled:</p><p><a href=#R-image-8913cafc82d43770245761ea000d9952 class=lightbox-link><img alt="Insecure Headers" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/other_2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8913cafc82d43770245761ea000d9952><img alt="Insecure Headers" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/other_2.png></a></p><p>When <code>helmet</code> is enabled, we see an entirely different set of headers:</p><p><a href=#R-image-6ebd8d8956b2b997ac485d3c4865b4c2 class=lightbox-link><img alt="Secure Headers" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/other_3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6ebd8d8956b2b997ac485d3c4865b4c2><img alt="Secure Headers" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/other_3.png></a></p><p>In the second screenshot, notice that the <code>Content-Security-Policy</code> header is now present, but the <code>X-Powered-By</code> header is not? Those changes, along with many others, are provided by the <code>helmet</code> library.</p><p>In general, it is always a good idea to review the security of the headers sent by our application. Installing <code>helmet</code> is a good start, but as we continue to develop applications we may learn additional ways we can configure <code>helmet</code> to provide even more security for our applications.</p><h3 id=nodemon>Nodemon</h3><p>Finally, let&rsquo;s also install the <a href=https://www.npmjs.com/package/nodemon rel=external target=_blank>nodemon</a> package to make developing our application a bit easier. At its core, <code>nodemon</code> is a simple tool that will auotmatically restart our application anytime it detects that a file has changed. In this way, we can just leave our application running in the background, and any changes we make to the code will immediately be availbale for us to test without having to manually restart the server.</p><p>To begin, let&rsquo;s install <code>nodemon</code> as a development dependency using <code>npm</code> with the <code>--save-dev</code> flag:</p><div class=tab-panel data-tab-group=c9eeb1a402714df0c343f21d4801acc1><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c9eeb1a402714df0c343f21d4801acc1","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm install nodemon --save-dev</span></span></code></pre></div></div></div></div></div><p>Notice that this will cause that library to be installed in a new section of our <code>package.json</code> file called <code>devDependencies</code>:</p><div class=tab-panel data-tab-group=1674be3136f778095ef7403f57237f8f><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=packagejson class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1674be3136f778095ef7403f57237f8f","packagejson")'>
<span class=tab-nav-text>package.json</span></button></div><div class=tab-content-container><div data-tab-item=packagejson class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;compression&#34;</span><span class=p>:</span> <span class=s2>&#34;^1.7.5&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cookie-parser&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.4.7&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;express&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.21.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;helmet&#34;</span><span class=p>:</span> <span class=s2>&#34;^8.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;morgan&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.10.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;winston&#34;</span><span class=p>:</span> <span class=s2>&#34;^3.17.0&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;devDependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;nodemon&#34;</span><span class=p>:</span> <span class=s2>&#34;^3.1.9&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>These dependencies are only installed by <code>npm</code> when we are developing our application. The default <code>npm install</code> command will install all dependencies, including development dependencies. However, we can instead either use <code>npm install --omit=dev</code> or set the <code>NODE_ENV</code> environment variable to <code>production</code> to avoid installing development dependencies.</p><p>Next, we can simply update our <code>package.json</code> file to use the <code>nodemon</code> command instead of <code>node</code> in the <code>dev</code> script:</p><div class=tab-panel data-tab-group=9446613280bbb6e361dc6e812437ff31><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=packagejson class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("9446613280bbb6e361dc6e812437ff31","packagejson")'>
<span class=tab-nav-text>package.json</span></button></div><div class=tab-content-container><div data-tab-item=packagejson class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;example-project&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.0.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;module&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;private&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;start&#34;</span><span class=p>:</span> <span class=s2>&#34;LOG_LEVEL=http node ./bin/www&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;dev&#34;</span><span class=p>:</span> <span class=s2>&#34;LOG_LEVEL=debug nodemon ./bin/www&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div></div></div><p>Now, when we execute our application:</p><div class=tab-panel data-tab-group=c872890cd1de78ed437480204e36c647><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=terminal class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c872890cd1de78ed437480204e36c647","terminal")'>
<span class=tab-nav-text>terminal</span></button></div><div class=tab-content-container><div data-tab-item=terminal class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm run dev</span></span></code></pre></div></div></div></div></div><p>We should see additional output from <code>nodemon</code> to see that it is working:</p><div class=tab-panel data-tab-group=384cca412cac5a6839bd8bc8d5bdfa7c><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("384cca412cac5a6839bd8bc8d5bdfa7c","output")'>
<span class=tab-nav-text>output</span></button></div><div class=tab-content-container><div data-tab-item=output class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0><code>&gt; example-project@0.0.1 dev
&gt; LOG_LEVEL=debug nodemon ./bin/www

[nodemon] 3.1.9
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,cjs,json
[nodemon] starting `node ./bin/www`
[2025-01-25 09:37:24.734 PM] info:      Listening on port 3000</code></pre></div></div></div></div></div><p>Now, with our application running, we can make any change to a file in our application, such as <code>app.js</code>, and it will automatically restart our application:</p><div class=tab-panel data-tab-group=91aa0afc72e890ad1adbeb1bb3be5172><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=output class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("91aa0afc72e890ad1adbeb1bb3be5172","output")'>
<span class=tab-nav-text>output</span></button></div><div class=tab-content-container><div data-tab-item=output class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight><pre tabindex=0><code>[nodemon] restarting due to changes...
[nodemon] starting `node ./bin/www`
[2025-01-25 09:39:02.858 PM] info:      Listening on port 3000</code></pre></div></div></div></div></div><p>We can also always manually type <code>rs</code> in the terminal to restart the application when it is running inside of <code>nodemon</code>.</p><p>In general, using <code>nodemon</code> to develop a Node.js application is recommended, but we don&rsquo;t want to use that in a production environment. So, we are careful to install <code>nodemon</code> as a development dependency only.</p><p>This is a good point to <strong>commit and push</strong> our work!</p><footer class=footline></footer></article></div></main></div></div><script src=/cis526/js/clipboard.min.js?1744923631 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1744923631 defer></script><script src=/cis526/js/theme.js?1744923631 defer></script><script src=/cis526/js/tele-scroll.js?1744923631 defer></script></body></html>