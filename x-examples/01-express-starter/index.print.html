<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="This example project is the first in a series toward building a complete full-stack web application using Node.js and Express to create a RESTful API on the backend that connects to a database, and then a Vue single page application on the frontend.
In doing so, we’ll explore some of the standard ways web developers use existing tools, frameworks, and libraries to perform many of the operations we’ve learned how to do manually throughout this course."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="Express Starter Project :: CIS 526 Textbook"><meta name=twitter:description content="This example project is the first in a series toward building a complete full-stack web application using Node.js and Express to create a RESTful API on the backend that connects to a database, and then a Vue single page application on the frontend.
In doing so, we’ll explore some of the standard ways web developers use existing tools, frameworks, and libraries to perform many of the operations we’ve learned how to do manually throughout this course."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/01-express-starter/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Express Starter Project :: CIS 526 Textbook"><meta property="og:description" content="This example project is the first in a series toward building a complete full-stack web application using Node.js and Express to create a RESTful API on the backend that connects to a database, and then a Vue single page application on the frontend.
In doing so, we’ll explore some of the standard ways web developers use existing tools, frameworks, and libraries to perform many of the operations we’ve learned how to do manually throughout this course."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="Express Starter Project :: CIS 526 Textbook"><meta itemprop=description content="This example project is the first in a series toward building a complete full-stack web application using Node.js and Express to create a RESTful API on the backend that connects to a database, and then a Vue single page application on the frontend.
In doing so, we’ll explore some of the standard ways web developers use existing tools, frameworks, and libraries to perform many of the operations we’ve learned how to do manually throughout this course."><meta itemprop=dateModified content="2025-01-15T15:29:58-06:00"><meta itemprop=wordCount content="237"><title>Express Starter Project :: CIS 526 Textbook</title>
<link href=/cis526/css/fontawesome-all.min.css?1737074484 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1737074484 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1737074484 rel=stylesheet><link href=/cis526/css/auto-complete.css?1737074484 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1737074484 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1737074484 rel=stylesheet><link href=/cis526/css/fonts.css?1737074484 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1737074484 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1737074484 rel=stylesheet><link href=/cis526/css/theme-auto.css?1737074484 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1737074484 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1737074484 rel=stylesheet><link href=/cis526/css/print.css?1737074484 rel=stylesheet media=print><link href=/cis526/css/format-print.css?1737074484 rel=stylesheet><script src=/cis526/js/variant.js?1737074484></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1737074484 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis526/x-examples/01-express-starter/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/cis526/x-examples/><span itemprop=name>Example Projects</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Express Starter Project</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/ title="Example Projects (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/x-examples/01-express-starter/01-codespace/ title="GitHub Codespace (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=express-starter-project>Express Starter Project</h1><p>This example project is the first in a series toward building a complete full-stack web application using <a href=https://nodejs.org/en rel=external target=_blank>Node.js</a> and <a href=https://expressjs.com/ rel=external target=_blank>Express</a> to create a RESTful API on the backend that connects to a database, and then a <a href=https://vuejs.org/ rel=external target=_blank>Vue</a> single page application on the frontend.</p><p>In doing so, we&rsquo;ll explore some of the standard ways web developers use existing tools, frameworks, and libraries to perform many of the operations we&rsquo;ve learned how to do manually throughout this course. In essence, you&rsquo;ve already learned how to build these things <em>from scratch</em>, but now we&rsquo;ll look at how professionals use <em>dependencies</em> to accomplish many of the same things.</p><p>We&rsquo;ll also explore techniques for writing good, clean JavaScript code that includes documentation and API information, unit testing, and more.</p><p>Finally, we&rsquo;ll learn how to do all of this using <a href=https://github.com/features/codespaces rel=external target=_blank>GitHub Codespaces</a>, so everything runs directly in the web browser with no additional software or hardware needed. Of course, you can also do everything locally using <a href=https://www.docker.com/products/docker-desktop/ rel=external target=_blank>Docker Desktop</a> and <a href=https://code.visualstudio.com/ rel=external target=_blank>Visual Studio Code</a> as well.</p><h2 id=project-deliverables>Project Deliverables</h2><p>At the end of this example, we will have a project with the following features:</p><ol><li>A working GitHub Codespace containing Node.js</li><li>A bare-bones Express application</li><li>Update Express application from CommonJS to ES Modules</li><li>Application logs with Winston and Morgan</li><li>A better development server using Nodemon</li><li>Install other useful Express libraries</li><li>Code documentation with JSDoc and OpenAPI comments</li><li>Linting and Formatting with ESLint and Prettier</li></ol><p>Let&rsquo;s get started!</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Express Starter Project</h1><article class=default><header class=headline></header><h1 id=github-codespace>GitHub Codespace</h1><a href="https://www.youtube.com/watch?v=id">YouTube Video</a><h2 id=creating-a-codespace>Creating a Codespace</h2><p>To begin, we will start with an empty GitHub repository. You can either create one yourself, or you may be working from a repository provided through GitHub Classroom.</p><p>At the top of the page, you may see either a <strong>Create a Codespace</strong> button in an empty repository, or a <strong>Code</strong> button that opens a panel with a <strong>Codespaces</strong> tab and a <strong>Create Codespace on main</strong> button in an initialized repository. Go ahead and click that button.</p><p><a href=#R-image-ce50cf51b5e8a44f8281e4d3c5921ae5 class=lightbox-link><img alt="Codespace in Empty Repository" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/codespace_1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-ce50cf51b5e8a44f8281e4d3c5921ae5><img alt="Codespace in Empty Repository" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/codespace_1.png></a></p><p><a href=#R-image-3cf577b2905a3fbdbd4c9706c71dc3f3 class=lightbox-link><img alt="Codespace in Initialized Repository" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/codespace_2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3cf577b2905a3fbdbd4c9706c71dc3f3><img alt="Codespace in Initialized Repository" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/codespace_2.png></a></p><p>Once you do, GitHub will start creating a new <a href=https://github.com/features/codespaces rel=external target=_blank>GitHub Codespace</a> for your project. This process may take a few moments.</p><p>Once it is done, you&rsquo;ll be presented with a window that looks very similar to Visual Studio Code&rsquo;s main interface. In fact - it is! It is just a version of Visual Studio Code running directly in a web browser. Pretty neat!</p><p>For the rest of this project, we&rsquo;ll do all of our work here in GitHub Codespaces directly in our web browser.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Working Locally?</div><div class=box-content><p>If you would rather do this work on your own computer, you&rsquo;ll need to install the following prerequisites:</p><ul><li><a href=https://code.visualstudio.com/ rel=external target=_blank>Visual Studio Code</a></li><li><a href=https://www.docker.com/products/docker-desktop/ rel=external target=_blank>Docker Desktop</a></li><li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel=external target=_blank>Dev Containers Extension</a></li></ul><p>For now, you&rsquo;ll start by cloning your GitHub repository to your local computer, and opening it in Visual Studio Code. We&rsquo;ll create some configuration files, and then reopen the project using a Dev Container in Docker. When looking in the Command Palette, just swap the &ldquo;Codespaces&rdquo; prefix with the &ldquo;Dev Containers&rdquo; prefix in the command names.</p></div></div><p>Once you&rsquo;ve created your GitHub Codespace, you can always find it again by visiting the repository in your web browser, clicking the <strong>Code</strong> button and choosing the <strong>Codespaces</strong> tab.</p><p><a href=#R-image-f99a4d8c873db9c2b913fc181a75c420 class=lightbox-link><img alt="Existing Codespace" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/codespace_3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f99a4d8c873db9c2b913fc181a75c420><img alt="Existing Codespace" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/codespace_3.png></a></p><h2 id=configuring-the-codespace>Configuring the Codespace</h2><p>When we first create a GitHub Codespace, GitHub will use a <a href=https://docs.github.com/en/codespaces/setting-up-your-project-for-codespaces/adding-a-dev-container-configuration/introduction-to-dev-containers#using-the-default-dev-container-configuration rel=external target=_blank>default dev container</a> configuration. It includes many tools that are preinstalled for working on a wide variety of projects. Inside of the Codespace, you can run the following command in the terminal to get a URL that contains a list of all tools installed and their versions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ devcontainer-info content-url</span></span></code></pre></div><p>The current default configuration as of this writing can be found <a href=https://github.com/devcontainers/images/blob/main/src/universal/history/2.12.6.md rel=external target=_blank>here</a>.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Documenting Terminal Commands</div><div class=box-content><p>In these example projects, we&rsquo;ll prefix any terminal commands with a dollar sign <code>$</code> symbol, representing the standard Linux terminal command prompt. You <strong>should not</strong> enter this character into the terminal, just the content after it. This makes it easy to see individual commands in the documentation, and also makes it easy to tell the difference between commands to be executed and the output produced by that command.</p><p>You can learn more in the <a href=https://developers.google.com/style/code-syntax rel=external target=_blank>Google Developer Documentation Style Guide</a>.</p></div></div><p>For this project, we are going to configure our own <a href=https://containers.dev/ rel=external target=_blank>dev container</a> that just contains the tools we need for this project. This also allows us to use the same configuration both in GitHub Codespaces as well as locally on our own systems using Docker.</p><p>To configure our own dev container, we first must open the <a href=https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette rel=external target=_blank>Visual Studio Code Command Palette</a>. We can do this by pressing <kbd>CTRL</kbd>+<kbd>SHIFT</kbd>+<kbd>P</kbd>, or by clicking the top search bar on the page and choosing <strong>Show and Run Commands ></strong>.</p><p>In the Command Palette, search for and choose the <strong>Codespaces: Add Dev Container Configuration Files&mldr;</strong> option, then choose <strong>Create a new configuration&mldr;</strong>. In the list that appears, search for &ldquo;node&rdquo; to find the container titled &ldquo;Node.js & TypeScript&rdquo; and choose that option.</p><p><a href=#R-image-74311eee7a6f97a7ad0cba6a8e6dab1a class=lightbox-link><img alt="Choosing a Dev Container Configuration" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/codespace_4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-74311eee7a6f97a7ad0cba6a8e6dab1a><img alt="Choosing a Dev Container Configuration" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/codespace_4.png></a></p><p>You&rsquo;ll then be prompted to choose a version to use. We&rsquo;ll use <code>22-bookworm</code> for this project. That refers to <a href=https://nodejs.org/en/blog/release/v22.11.0 rel=external target=_blank>Node version 22 LTS</a> running on a <a href=https://www.debian.org/releases/bookworm/ rel=external target=_blank>Debian Bookworm LTS</a> Linux image. Both of these are current, long term supported (LTS) versions of the software, making them an excellent choice for a new project.</p><p>Finally, the last question will ask if we&rsquo;d like to add any additional features to our dev container configuration. We&rsquo;ll leave this blank for now, but in the future you may find some of these additional features useful and choose to add them here.</p><p>Once that is done, a <code>.devcontainer</code> folder will be created, with a <code>devcontainer.json</code> file inside of it. The content of that file should match what is shown below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// For format details, see https://aka.ms/devcontainer.json. For config options, see the
</span></span></span><span class=line><span class=cl><span class=c1>// README at: https://github.com/devcontainers/templates/tree/main/src/typescript-node
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Node.js &amp; TypeScript&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=s2>&#34;image&#34;</span><span class=o>:</span> <span class=s2>&#34;mcr.microsoft.com/devcontainers/typescript-node:1-22-bookworm&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Features to add to the dev container. More info: https://containers.dev/features.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// &#34;features&#34;: {},
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// Use &#39;forwardPorts&#39; to make a list of ports inside the container available locally.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// &#34;forwardPorts&#34;: [],
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// Use &#39;postCreateCommand&#39; to run commands after the container is created.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// &#34;postCreateCommand&#34;: &#34;yarn install&#34;,
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// Configure tool-specific properties.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// &#34;customizations&#34;: {},
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// &#34;remoteUser&#34;: &#34;root&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div><p>Over time, we&rsquo;ll come back to this file to add additional features to our dev container. For now, we&rsquo;ll just leave it as-is.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Dependabot</div><div class=box-content><p>You may also see a second file, <code>.github/dependabot.yml</code> that is also created. This file is used by the <a href=https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide rel=external target=_blank>GitHub Dependabot</a> to keep your dev container configuration up to date. You may get occasional notices from GitHub in the future if there are any updates to software included in your dev container configuration.</p></div></div><p>At this point, we are ready to rebuilt our GitHub Codespace to use our new dev container configuration. To do this, open the Command Palette once again and look for the <strong>Codespaces: Rebuild Container</strong> option. Click that option, then select the <strong>Full Rebuild</strong> option in the popup window since we have completely changed our dev container configuration.</p><p>Now, we can sit back and be patient while GitHub Codespaces rebuilds our environment using the new configuration. This may take several minutes.</p><p>Once it is complete, we can confirm that Node.js is installed and running the correct version by running the following command and checking the output matches our expected version of Node.js:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ node --version
</span></span><span class=line><span class=cl>v22.12.0</span></span></code></pre></div><p>If that works, then our dev container environment in GitHub Codespaces should be set up and ready to go!</p><p>Now is a good time to commit our current work to git and push it to GitHub. Even though we are working in a GitHub Codespace, we still have to commit and push our work to get it saved. You can do this using the Source Control sidebar tab on the page, or using the classic terminal commands as shown below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git add .
</span></span><span class=line><span class=cl>$ git commit -m <span class=s2>&#34;Dev Container&#34;</span>
</span></span><span class=line><span class=cl>$ git push -u origin main</span></span></code></pre></div><p>For the rest of this exercise, we&rsquo;ll assume that you are comfortable with git and GitHub and can take care of committing and pushing your work yourself, but we&rsquo;ll give you several hints showing when we hit a good opportunity to save your work.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=express-starter>Express Starter</h1><a href="https://www.youtube.com/watch?v=id">YouTube Video</a><h2 id=generating-an-express-application>Generating an Express Application</h2><p>Now that we have our dev container configured, we can start setting up an Express application. The recommended method in the documentation is to use the <a href=https://expressjs.com/en/starter/generator.html rel=external target=_blank>Express application generator</a>, so we&rsquo;ll use that method. You may want to refer to the documentation for this command to see what options are available.</p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Express Documentation</div><div class=box-content><p>You may also want to bookmark the <a href=https://expressjs.com/ rel=external target=_blank>Express Documentation</a> website as well, since it contains lots of helpful information about how Express works that may not be covered in this tutorial.</p></div></div><p>For this project, we&rsquo;ll use the following command to build our application:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npx express-generator --no-view --git server</span></span></code></pre></div><p>Let&rsquo;s break down that command to see what it is doing:</p><ul><li><code>npx</code> - The [npx] command is included with Node.js and <code>npm</code> and allows us to run a command from an <code>npm</code> package, including packages that <em>aren&rsquo;t currently installed!</em>. This is the preferred way to run commands that are available in any <code>npm</code> packages.</li><li><code>express-generator</code> - This is the <a href=https://www.npmjs.com/package/express-generator rel=external target=_blank>express-generator</a> package in <code>npm</code> that contains the command we are using to build our Express application.</li><li><code>--no-view</code> - This option will generate a project without a built-in view engine.</li><li><code>--git</code> - This option will add a <code>.gitignore</code> file to our project</li><li><code>server</code> - This is the name of the directory where we would like to create our application.</li></ul><p>When we run that command, we may be prompted to install the <code>express-generator</code> package, so we can press <code>y</code> to install it.</p><p>That command will produce a large amount of output, similar to what is shown below:</p><div class=highlight><pre tabindex=0><code>Need to install the following packages:
express-generator@4.16.1
Ok to proceed? (y) y

npm warn deprecated mkdirp@0.5.1: Legacy versions of mkdirp are no longer supported. Please update to mkdirp 1.x. (Note that the API surface has changed to use Promises in 1.x.)

   create : server/
   create : server/public/
   create : server/public/javascripts/
   create : server/public/images/
   create : server/public/stylesheets/
   create : server/public/stylesheets/style.css
   create : server/routes/
   create : server/routes/index.js
   create : server/routes/users.js
   create : server/public/index.html
   create : server/.gitignore
   create : server/app.js
   create : server/package.json
   create : server/bin/
   create : server/bin/www

   change directory:
     $ cd server

   install dependencies:
     $ npm install

   run the app:
     $ DEBUG=server:* npm start</code></pre></div><p>As we can see, it created quite a few files for us! Let&rsquo;s briefly review what each of these files and folders are for:</p><ul><li><code>public</code> - this folder contains the static HTML, CSS, and JavaScript files that will be served from our application. Much later down the road, we&rsquo;ll place the compiled version of our Vue frontend application in this folder. For now, it just serves as a placeholder for where those files will be placed.</li><li><code>routes</code> - this folder contains the Express application routers for our application. There are currently only two routers, the <code>index.js</code> router connected to the <code>/</code> path, and the <code>users.js</code> router connected to the <code>/users</code> path.</li><li><code>.gitignore</code> - this file tells git which files or folders can be ignored when committing to the repository. We&rsquo;ll discuss this file in detail below.</li><li><code>app.js</code> - this is the main file for our Express application. It loads all of the libraries, configurations, and routers and puts them all together into a single Express application.</li><li><code>package.json</code> - this file contains information about the project, including some metadata, scripts, and the list of external dependencies. More information on the structure and content of that file can be found in the <a href=https://docs.npmjs.com/cli/v11/configuring-npm/package-json rel=external target=_blank>documentation</a>.</li><li><code>bin/www</code> - this file is the actual entrypoint for our web application. It loads the Express application defined in <code>app.js</code>, and then creates an <code>http</code> server to listen for incoming connections and sends them to the Express application. It also handles figuring out which port the application should listen on, as well as some common errors.</li></ul><p>Since we are only building a RESTful API application, there are a few files that we can delete or quickly modify:</p><ul><li>Delete everything in the <code>public</code> folder <strong>except</strong> the file <code>index.html</code></li><li>Inside of the <code>public/index.html</code> file, remove the line referencing the stylesheet: <code>&lt;link rel="stylesheet" href="/stylesheets/style.css"></code> since it has been deleted.</li></ul><p>At this point, we should also update the contents of the <code>package.json</code> file to describe our project. It currently contains information similar to this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;server&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;private&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;start&#34;</span><span class=p>:</span> <span class=s2>&#34;node ./bin/www&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cookie-parser&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.4.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;debug&#34;</span><span class=p>:</span> <span class=s2>&#34;~2.6.9&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;express&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.16.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;morgan&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.9.1&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>For now, let&rsquo;s update the <code>name</code> and <code>version</code> entries to match our project:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;example-project&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.0.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;private&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;start&#34;</span><span class=p>:</span> <span class=s2>&#34;node ./bin/www&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cookie-parser&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.4.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;debug&#34;</span><span class=p>:</span> <span class=s2>&#34;~2.6.9&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;express&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.16.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;morgan&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.9.1&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>In a stand-alone application like ours, these values really don&rsquo;t matter, but if we do decide to publish this application as an <code>npm</code> module in the future, these values will be used to build the module itself.</p><h2 id=exploring-appjs>Exploring App.js</h2><p>Let&rsquo;s quickly take a look at the contents of the <code>app.js</code> file to get an idea of what this application does:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cookieParser</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;cookie-parser&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>logger</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;morgan&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>indexRouter</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./routes/index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>usersRouter</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./routes/users&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>logger</span><span class=p>(</span><span class=s1>&#39;dev&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>urlencoded</span><span class=p>({</span> <span class=nx>extended</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cookieParser</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=kr>static</span><span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;public&#39;</span><span class=p>)));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=nx>indexRouter</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/users&#39;</span><span class=p>,</span> <span class=nx>usersRouter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>app</span><span class=p>;</span></span></span></code></pre></div><p>At the top, the file loads several libraries, including <a href=https://www.npmjs.com/package/cookie-parser rel=external target=_blank>cookie-parser</a> for parsing cookies sent from the browser, and <a href=https://www.npmjs.com/package/morgan rel=external target=_blank>morgan</a> for logging requests. It then also loads the two routers, <code>index</code> and <code>users</code>.</p><p>Next, we see the line <code>var app = express()</code> - this line actually creates the Express application and stores a reference to it in the <code>app</code> variable.</p><p>The next few lines add various middlewares to the Express application using the <code>app.use()</code> function. Each of these is effectively a function that is called each time the application receives a request, one after the other, until a response is generated and sent. See <a href=https://expressjs.com/en/guide/using-middleware.html rel=external target=_blank>Using middleware</a> in the Express documentation for more details.</p><p>After that, the two routers are added as well. Each router is given a base path - the <code>index</code> router is given the <code>/</code> path, then the <code>users</code> router is given the <code>/users</code> path. These are the URL paths that are used to determine where each incoming request should be sent in the application. See <a href=https://expressjs.com/en/guide/routing.html rel=external target=_blank>routing</a> in the Express documentation for more details.</p><p>Finally, the Express application referenced in <code>app</code> is exported from this file. It is used by the <code>bin/www</code> file and attached to an <code>http</code> server to listen for incoming requests.</p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Order Matters</div><div class=box-content><p>Because Express is a routing and middleware framework, the order in which you add middlewares and routers determines how the application functions. So, we must be very thoughtful about the order in which we add middlewares and routers to our application. In this example, notice, that we add the logger first, then parse any incoming JSON requests, then decode any URL encoded requests, then parse any cookies, before doing anything else.</p><p>This is a common error that trips up many first-time Express developers, so be mindful as you add and adjust content in this file!</p></div></div><h2 id=installing-dependencies>Installing Dependencies</h2><p>Now that we&rsquo;ve generated a basic Express web application, we need to install all of the dependencies. This is also the first step we&rsquo;ll need to do anytime we clone this project for the first time or if we rebuild our GitHub codespace or dev container.</p><p>To do this, we need to go to the terminal and change directory to the <code>server</code> folder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> server</span></span></code></pre></div><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Working Directory</div><div class=box-content><p>Remember that we can always see the current working directory by looking at the command prompt in the terminal, or by typing the <code>pwd</code> command:</p><p><a href=#R-image-be958ee01ae9ff707c652671ca1482c5 class=lightbox-link><img alt="Working Directory in Terminal" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-be958ee01ae9ff707c652671ca1482c5><img alt="Working Directory in Terminal" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_1.png></a></p><p><a href=#R-image-8e50d4878d42a47e16ecd389116b5938 class=lightbox-link><img alt="Present Working Directory" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-8e50d4878d42a47e16ecd389116b5938><img alt="Present Working Directory" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_2.png></a></p></div></div><p>Once inside of the <code>server</code> folder, we can install all our dependencies using the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm install</span></span></code></pre></div><p>When we run that command, we&rsquo;ll see output similar to the following:</p><div class=highlight><pre tabindex=0><code>added 53 packages, and audited 54 packages in 4s

7 vulnerabilities (3 low, 4 high)

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details.</code></pre></div><p>It looks like we have some out of date packages and vulnerabilities to fix!</p><h2 id=updating-dependencies>Updating Dependencies</h2><p>Thankfully, there is a very useful command called <a href=https://www.npmjs.com/package/npm-check-updates rel=external target=_blank>npm-check-updates</a> that we can use to update our dependencies anytime there is a problem. We can run that package&rsquo;s command using <code>npx</code> as we saw earlier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npx npm-check-updates</span></span></code></pre></div><p>As before, we&rsquo;ll be prompted to install the package if it isn&rsquo;t installed already. Once it is done, we&rsquo;ll see output like this:</p><div class=highlight><pre tabindex=0><code>Need to install the following packages:
npm-check-updates@17.1.14
Ok to proceed? (y) y

Checking /workspaces/example-project/server/package.json
[====================] 4/4 100%

 cookie-parser   ~1.4.4  →   ~1.4.7
 debug           ~2.6.9  →   ~4.4.0
 express        ~4.16.1  →  ~4.21.2
 morgan          ~1.9.1  →  ~1.10.0

Run npx npm-check-updates -u to upgrade package.json</code></pre></div><p>When we run the command, it tells us which packages are out of date and lists a newer version of the package we can install.</p><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Tread Carefully!</div><div class=box-content><p>In an actual production application, it is important to make sure your dependencies are kept up to date. At the same time, you&rsquo;ll want to carefully read the documentation for these dependencies and test your project after any dependency updates, just to ensure that your application works correctly using the new versions.</p><p>For example, in the output above, we see this:</p><div class=highlight><pre tabindex=0><code> debug           ~2.6.9  →   ~4.4.0</code></pre></div><p>This means that the <code>debug</code> library is <strong>two major versions</strong> out of date (see <a href=https://semver.org/ rel=external target=_blank>Semantic Versioning</a> for more information on how to interpret version numbers)! If we check the <a href="https://www.npmjs.com/package/debug?activeTab=versions" rel=external target=_blank><code>debug</code> versions list</a> on npm, we can see that version <code>2.6.9</code> was released in September 2017 - a very long time ago.</p><p>When a package undergoes a major version change, it often comes with incompatible API changes. So, we may want to consult the documentation for each major version or find release notes or upgrade guides to refer to. In this case, we can refer to the release notes for each version on GitHub:</p><ul><li>3.0.0: <a href=https://github.com/debug-js/debug/releases/tag/3.0.0 rel=external target=_blank>https://github.com/debug-js/debug/releases/tag/3.0.0</a></li><li>4.0.0: <a href=https://github.com/debug-js/debug/releases/tag/4.0.0 rel=external target=_blank>https://github.com/debug-js/debug/releases/tag/4.0.0</a></li></ul><p>We may even need to check some of the release notes for minor releases as well.</p><p>Thankfully, the latest version of the <code>debug</code> library is compatible with our existing code, and later in this project we&rsquo;ll replace it with a better logging infrastructure anyway.</p></div></div><p>Now that we know which dependencies can be updated, we can use the same command with the <code>-u</code> option to update our <code>package.json</code> file easily:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npx npm-check-updates -u</span></span></code></pre></div><p>We should see output similar to this:</p><div class=highlight><pre tabindex=0><code>Upgrading /workspaces/example-project/server/package.json
[====================] 4/4 100%

 cookie-parser   ~1.4.4  →   ~1.4.7
 debug           ~2.6.9  →   ~4.4.0
 express        ~4.16.1  →  ~4.21.2
 morgan          ~1.9.1  →  ~1.10.0

Run npm install to install new versions.</code></pre></div><p>We can also check our <code>package.json</code> file to see the changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;example-project&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.0.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;private&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;start&#34;</span><span class=p>:</span> <span class=s2>&#34;node ./bin/www&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cookie-parser&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.4.7&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;debug&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.4.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;express&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.21.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;morgan&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.10.0&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Finally, we can install those dependencies:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm install</span></span></code></pre></div><p>Now when we run that command, we should see that everything is up to date!</p><div class=highlight><pre tabindex=0><code>added 36 packages, changed 24 packages, and audited 90 packages in 4s

14 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities</code></pre></div><p>There we go! We now have a sample Express application configured with updated dependencies.</p><h2 id=testing-the-application>Testing the Application</h2><p>At this point, we are ready to actually test our application. To do this, we can run the following command from within the <code>server</code> directory in our project:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm start</span></span></code></pre></div><p>When we do, we&rsquo;ll see a bit of information on the terminal:</p><div class=highlight><pre tabindex=0><code>&gt; example-project@0.0.1 start
&gt; node ./bin/www</code></pre></div><p>We&rsquo;ll also see a small popup in the bottom right corner of the screen, telling us that it has detected that our application is listening on port <code>3000</code>.</p><p><a href=#R-image-0c7077f141a8450511b3772eeca3a867 class=lightbox-link><img alt="Listening Port Popup" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-0c7077f141a8450511b3772eeca3a867><img alt="Listening Port Popup" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_3.png></a></p><p>So, to access our application, we can click on the <strong>Open in Browser</strong> button on that popup. If everything works correctly, we should be able to see our application running in our web browser:</p><p><a href=#R-image-f32c797a196e4b3325d0c10a7c7483d7 class=lightbox-link><img alt="Running Example Application" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f32c797a196e4b3325d0c10a7c7483d7><img alt="Running Example Application" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_4.png></a></p><p>Take a look at the long URL in the browser - that URL includes the name of the GitHub Codespace (<code>laughing-computing-machine</code> in this example), followed by a random Codespace ID (<code>jj5j9p97vx435jqj</code>), followed by the port our application is listening on (<code>3000</code>). We&rsquo;ll look at ways we can build this URL inside of our application in the future, but for now it is just worth noting.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Finding Listening Ports</div><div class=box-content><p>If you didn&rsquo;t see the popup appear, or you cannot find where your application is running, check the <strong>PORTS</strong> tab above the console in GitHub Codespaces:</p><p><a href=#R-image-c3ca34cb52ad02e55df1c6f775769947 class=lightbox-link><img alt="Listening Port List" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c3ca34cb52ad02e55df1c6f775769947><img alt="Listening Port List" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_5.png></a></p><p>We can click on the URL under the <strong>Forwarded Addresses</strong> heading to access the port in our web browser. We can also use this interface to configure additional ports that we want to be able to access outside of the GitHub Codespace.</p></div></div><p>We can also access any routes that are configured in our application. For example, the default Express application includes a <code>/users</code> route, so we can just add <code>/users</code> to the end of the URL in our web browser to access it. We should see this page when we do:</p><p><a href=#R-image-9973ce4e3670bcc2a507b3b9e54c81ee class=lightbox-link><img alt="Running Example Users Path" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9973ce4e3670bcc2a507b3b9e54c81ee><img alt="Running Example Users Path" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_6.png></a></p><p>Great! It looks like our example application in running correctly.</p><h2 id=committing-to-github>Committing to GitHub</h2><p>Now is a great time to commit our project to GitHub. Before we do, however, we should double-check that our project has a proper <code>server/.gitignore</code> file. It should have been created by the Express application generator if we used the <code>--git</code> option, but it is always important to double-check that it is there before trying to commit a new project.</p><p><a href=#R-image-d5c4cc7ec8be74cb5ff9925846136454 class=lightbox-link><img alt="Gitignore File" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/examples/01/express_7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d5c4cc7ec8be74cb5ff9925846136454><img alt="Gitignore File" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/examples/01/express_7.png></a></p><p>A <a href=https://docs.github.com/en/get-started/getting-started-with-git/ignoring-files rel=external target=_blank>.gitignore</a> file is used to tell git which files should not be committed to a repository. For a project using Node.js, we especially don&rsquo;t want to commit our <code>node_modules</code> folder. This folder contains all of the dependencies for our project, and can often be very large.</p><p>Why don&rsquo;t we want to commit it? Because it contains lots of code that isn&rsquo;t ours, and it is much better to just install the dependencies locally whenever we develop or use our application. That is the whole function of the <code>package.json</code> file and the <code>npm</code> command - it lets us focus on only developing our own code, and it will find and manage all other external dependencies for us.</p><p>So, as a general rule of thumb, we should <strong>NEVER</strong> commit the <code>node_modules</code> folder to our repository.</p><div class="box notices cstyle tip"><div class=box-label><i class="fa-fw fas fa-lightbulb"></i> Missing gitignore file?</div><div class=box-content><p>If your project does not have a <code>.gitignore</code> file, you can usually find one for the language or framework you are using in the excellent <a href=https://github.com/github/gitignore rel=external target=_blank>gitignore GitHub Repository</a>. Just look for the appropriate file and add the contents to a <code>.gitignore</code> file in your project. For example, you can find a <a href=https://github.com/github/gitignore/blob/main/Node.gitignore rel=external target=_blank>Node.gitignore</a> file to use in this project.</p></div></div><p>At long last, we are ready to commit and push all of our changes to this project. If it works correctly, it should only commit the code files we&rsquo;ve created, but none of the files that are ignored in the <code>.gitignore</code> file.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=convert-to-es-modules>Convert to ES Modules</h1><a href="https://www.youtube.com/watch?v=id">YouTube Video</a><h2 id=commonjs-vs-es-modules>CommonJS vs ES Modules</h2><p>By default, the Express application generator creates an application using the <a href=https://nodejs.org/api/modules.html#modules-commonjs-modules rel=external target=_blank>CommonJS module format</a>. This is the original way that JavaScript modules were packaged. However, many libraries and frameworks have been moving to the new <a href=https://nodejs.org/api/esm.html rel=external target=_blank>ECMAScript module format</a> (commonly referred to as ES modules), which is current official standard way of packaging JavaScript modules.</p><p>Since we want to build an industry-grade application, it would be best to update our application to use the new ES module format. This format will become more and more common over time, and many dependencies on npm have already started to shift to only supporting the ES module format. So, let&rsquo;s take the time now to update our application to use that new format before we go any further.</p><h2 id=enabling-es-module-support>Enabling ES Module Support</h2><p>To enable ES module support in our application, we must simply add <code>"type": "module",</code> to the <code>package.json</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;example-project&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.0.1&#34;</span><span class=p>,</span>
</span></span><span class="line hl"><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;module&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;private&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;start&#34;</span><span class=p>:</span> <span class=s2>&#34;node ./bin/www&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dependencies&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cookie-parser&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.4.7&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;debug&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.4.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;express&#34;</span><span class=p>:</span> <span class=s2>&#34;~4.21.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;morgan&#34;</span><span class=p>:</span> <span class=s2>&#34;~1.10.0&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Now, let&rsquo;s try to run our application:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ npm start</span></span></code></pre></div><p>When we do, we&rsquo;ll get some errors:</p><div class=highlight><pre tabindex=0><code>&gt; example-project@0.0.1 start
&gt; node ./bin/www

file:///workspaces/example-project/server/bin/www:7
var app = require(&#39;../app&#39;);
          ^

ReferenceError: require is not defined in ES module scope, you can use import instead
    at file:///workspaces/example-project/server/bin/www:7:11
    at ModuleJob.run (node:internal/modules/esm/module_job:271:25)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:547:26)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:116:5)

Node.js v22.12.0</code></pre></div><p>By changing that one line in <code>package.json</code>, the Node.js runtime is trying to load our project using ES modules instead of CommonJS modules, and it causes all sorts of errors. Thankfully, most of them are easy to fix! Let&rsquo;s go file by file and make these updates.</p><ul><li><code>/bin/www</code></li></ul><h2 id=references>References</h2><ul><li><a href=https://electerious.medium.com/from-commonjs-to-es-modules-how-to-modernize-your-node-js-app-ad8cdd4fb662 rel=external target=_blank>From CommonJS to ES Modules: How to modernize your Node.js app</a></li></ul><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis526/commit/9dfbe87af5eb8f7409101e631bcab7c38aac4ea7>Jan 15, 2025</a></p></div></div><script src=/cis526/js/clipboard.min.js?1737074484 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1737074484 defer></script><script src=/cis526/js/theme.js?1737074484 defer></script></body></html>