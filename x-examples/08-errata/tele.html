<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.148.1"><meta name=generator content="Relearn 8.0.0"><meta name=description content="This page lists all of the errors found and updates I have made to the basic project since this was released.
Client Update Token Store In my Vue code, I was often using tokenStore.token.length > 0 to determine if a user was logged in. This is a bit fragile - better to just make a computed value for this:
​ client/src/stores/Token.js // Getters const loggedIn = computed(() => token.value.length > 0 ) This requires changing several other places in ths code where this is used - mainly I just searched for token.length and went from there."><meta name=author content="Nathan Bean & Russell Feldhausen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta name=twitter:title content="Errata :: CIS 526 Textbook"><meta name=twitter:description content="This page lists all of the errors found and updates I have made to the basic project since this was released.
Client Update Token Store In my Vue code, I was often using tokenStore.token.length > 0 to determine if a user was logged in. This is a bit fragile - better to just make a computed value for this:
​ client/src/stores/Token.js // Getters const loggedIn = computed(() => token.value.length > 0 ) This requires changing several other places in ths code where this is used - mainly I just searched for token.length and went from there."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/x-examples/08-errata/index.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="Errata :: CIS 526 Textbook"><meta property="og:description" content="This page lists all of the errors found and updates I have made to the basic project since this was released.
Client Update Token Store In my Vue code, I was often using tokenStore.token.length > 0 to determine if a user was logged in. This is a bit fragile - better to just make a computed value for this:
​ client/src/stores/Token.js // Getters const loggedIn = computed(() => token.value.length > 0 ) This requires changing several other places in ths code where this is used - mainly I just searched for token.length and went from there."><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta property="og:image" content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><meta itemprop=name content="Errata :: CIS 526 Textbook"><meta itemprop=description content="This page lists all of the errors found and updates I have made to the basic project since this was released.
Client Update Token Store In my Vue code, I was often using tokenStore.token.length > 0 to determine if a user was logged in. This is a bit fragile - better to just make a computed value for this:
​ client/src/stores/Token.js // Getters const loggedIn = computed(() => token.value.length > 0 ) This requires changing several other places in ths code where this is used - mainly I just searched for token.length and went from there."><meta itemprop=dateModified content="2025-09-16T13:39:24-05:00"><meta itemprop=wordCount content="1845"><meta itemprop=image content="https://textbooks.cs.ksu.edu/cis526/images/hero.png"><title>Errata :: CIS 526 Textbook</title><link href=https://textbooks.cs.ksu.edu/cis526/x-examples/08-errata/index.html rel=canonical type=text/html title="Errata :: CIS 526 Textbook"><link href=/cis526/x-examples/08-errata/index.xml rel=alternate type=application/rss+xml title="Errata :: CIS 526 Textbook"><link href=/cis526/x-examples/08-errata/index.print.html rel=alternate type=text/html title="Errata :: CIS 526 Textbook"><link href=/cis526/x-examples/08-errata/embed.html rel=alternate type=text/html title="Errata :: CIS 526 Textbook"><link href=/cis526/css/auto-complete/auto-complete.min.css?1769117712 rel=stylesheet><script src=/cis526/js/auto-complete/auto-complete.min.js?1769117712 defer></script><script src=/cis526/js/search-lunr.min.js?1769117712 defer></script><script src=/cis526/js/search.min.js?1769117712 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/cis526/searchindex.en.js?1769117712"</script><script src=/cis526/js/lunr/lunr.min.js?1769117712 defer></script><script src=/cis526/js/lunr/lunr.stemmer.support.min.js?1769117712 defer></script><script src=/cis526/js/lunr/lunr.multi.min.js?1769117712 defer></script><script src=/cis526/js/lunr/lunr.en.min.js?1769117712 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1769117712 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/fonts/fontawesome/css/fontawesome-all.min.css?1769117712 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar/perfect-scrollbar.min.css?1769117712 rel=stylesheet><link href=/cis526/css/theme.min.css?1769117712 rel=stylesheet><link href=/cis526/css/format-html.min.css?1769117712 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/x-examples/08-errata/index.html",window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!1,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.relearn.themevariants=["light-theme"],window.relearn.customvariantname="my-custom-variant",window.relearn.writeVariant=!1,window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.writeVariant&&window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><link href=/cis526/css/custom.css?1769117712 rel=stylesheet></head><body class="mobile-support html" data-url=/cis526/x-examples/08-errata/index.html><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable x-examples" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=errata>Errata</h1><p>This page lists all of the errors found and updates I have made to the basic project since this was released.</p><h2 id=client>Client</h2><h3 id=update-token-store>Update Token Store</h3><p>In my Vue code, I was often using <code>tokenStore.token.length > 0</code> to determine if a user was logged in. This is a bit fragile - better to just make a computed value for this:</p><div class=tab-panel data-tab-group=c118d1ede9b10bcfa0d6bd7f0ac027a9><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=clientsrcstorestokenjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("c118d1ede9b10bcfa0d6bd7f0ac027a9","clientsrcstorestokenjs")'>
<span class=tab-nav-text>client/src/stores/Token.js</span></button></div><div class=tab-content-container><div data-tab-item=clientsrcstorestokenjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#75715e>// Getters
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loggedIn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  )</span></span></code></pre></div></div></div></div></div><p>This requires changing several other places in ths code where this is used - mainly I just searched for <code>token.length</code> and went from there.</p><p>I also chose to update it to store the decoded value directly as a state property, just to avoid decoding it multiple times. Finally, I fixed a bug where users with no role would cause issues. Here is the fully updated token store.</p><div class=tab-panel data-tab-group=9237ebe76d5d3416e873dd202ae8b94d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=clientsrcstorestokenjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("9237ebe76d5d3416e873dd202ae8b94d","clientsrcstorestokenjs")'>
<span class=tab-nav-text>client/src/stores/Token.js</span></button></div><div class=tab-content-container><div data-tab-item=clientsrcstorestokenjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @file JWT Token Store
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author Russell Feldhausen &lt;russfeld@ksu.edu&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Import Libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span>, <span style=color:#a6e22e>computed</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>defineStore</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;pinia&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>jwtDecode</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;jwt-decode&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>axios</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;axios&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Define Store
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useTokenStore</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>defineStore</span>(<span style=color:#e6db74>&#39;token&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// State properties
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>(<span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>decoded</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>({})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Getters
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loggedIn</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>username</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>username</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>username</span>  <span style=color:#f92672>:</span> <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>email</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>has_role</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(
</span></span><span style=display:flex><span>    () =&gt; (<span style=color:#a6e22e>role</span>) =&gt;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>roles</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>r</span>) =&gt; <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>role</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>role</span>) <span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Actions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Get a token for the user.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   *
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * If this fails, redirect to authentication page if parameter is true
</span></span></span><span style=display:flex><span><span style=color:#75715e>   *
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * @param redirect if true, redirect user to login page on failure
</span></span></span><span style=display:flex><span><span style=color:#75715e>   */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getToken</span>(<span style=color:#a6e22e>redirect</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;token:get&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>axios</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/auth/token&#39;</span>, { <span style=color:#a6e22e>withCredentials</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> })
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>token</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>jwtDecode</span>(<span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>      <span style=color:#75715e>// If the response is a 401, the user is not logged in
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>401</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;token:get user not logged in&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>redirect</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;token:get redirecting to login page&#39;</span>)
</span></span><span style=display:flex><span>          window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/auth/cas&#39;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;token:get error&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Log the user out and clear the token
</span></span></span><span style=display:flex><span><span style=color:#75715e>   */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>logout</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>decoded</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>    window.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/auth/logout&#39;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Return all state, getters, and actions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>token</span>, <span style=color:#a6e22e>loggedIn</span>, <span style=color:#a6e22e>username</span>, <span style=color:#a6e22e>has_role</span>, <span style=color:#a6e22e>getToken</span>, <span style=color:#a6e22e>logout</span> }
</span></span><span style=display:flex><span>})</span></span></code></pre></div></div></div></div></div><h3 id=switch-from-date-fns-to-dayjs>Switch from date-fns to Day.js</h3><p>The <a href=https://date-fns.org/ rel=external target=_blank>date-fns</a> library has an issue where an invalid date will cause an uncaught exception in the browser, which crashes the Vue application. This can happen when the date is rendered <em>before</em> the data is loaded, as would be the case anytime the data is loaded asynchronously when visiting the page. This was causing all sorts of strange errors in my code upon a refresh of specific pages.</p><p>I swapped to using <a href=https://day.js.org/en/ rel=external target=_blank>Day.js</a> instead, which provides many of the same features as <code>date-fns</code> but <strong>without</strong> unhandled exceptions. I especially use the <a href=https://day.js.org/docs/en/display/from-now rel=external target=_blank>Time from now</a> feature in many places, such as my <code>UsersList.vue</code> component:</p><div class=tab-panel data-tab-group=b4d35b6f2eb9e5ed487eb9918a0b7794><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=clientsrccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("b4d35b6f2eb9e5ed487eb9918a0b7794","clientsrccomponentsusersuserslistvue")'>
<span class=tab-nav-text>client/src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=clientsrccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>Column</span> <span style=color:#a6e22e>field</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;createdAt&#34;</span> <span style=color:#a6e22e>header</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Created&#34;</span> <span style=color:#a6e22e>sortable</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>template</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>body</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{ data }&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>span</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-tooltip</span><span style=color:#a6e22e>.bottom</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span><span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>data.createdAt</span><span style=color:#960050;background-color:#1e0010>)</span><span style=color:#a6e22e>.toLocaleString</span><span style=color:#960050;background-color:#1e0010>()&#34;</span>&gt;
</span></span><span style=display:flex><span>      {{ <span style=color:#a6e22e>dayjs</span>(<span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>createdAt</span>).<span style=color:#a6e22e>fromNow</span>() }}
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>span</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>Column</span>&gt;</span></span></code></pre></div></div></div></div></div><h3 id=loading-icons-on-data-tables>Loading Icons on Data Tables</h3><p>On most of the data tables, I added a loading icon implementation, such as the <code>UsersList.vue</code> component:</p><div class=tab-panel data-tab-group=fad40b4c703e832042e29e8dcb44d791><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srccomponentsusersuserslistvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("fad40b4c703e832042e29e8dcb44d791","srccomponentsusersuserslistvue")'>
<span class=tab-nav-text>src/components/users/UsersList.vue</span></button></div><div class=tab-content-container><div data-tab-item=srccomponentsusersuserslistvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>//  -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Loading State
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>loading</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>(<span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Hydrate Store
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span><span style=color:#a6e22e>userStore</span>.<span style=color:#a6e22e>hydrate</span>().<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex;background-color:#3c3d38><span>  <span style=color:#a6e22e>loading</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//  -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>DataTable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:filters</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filters&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:</span><span style=color:#a6e22e>globalFilterFields</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[&#39;username&#39;, &#39;email&#39;, &#39;name&#39;]&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filterDisplay</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;menu&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sortField</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:sortOrder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>:loading</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;loading&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>    <span style=color:#a6e22e>loading</span><span style=color:#f92672>-icon</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>pi</span> <span style=color:#a6e22e>pi</span><span style=color:#f92672>-spin</span> <span style=color:#a6e22e>pi</span><span style=color:#f92672>-spinner</span><span style=color:#960050;background-color:#1e0010>&#34;</span>
</span></span><span style=display:flex><span>  &gt;
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!--</span> <span style=color:#f92672>-=-=-</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>omitted</span> <span style=color:#a6e22e>here</span> <span style=color:#f92672>-=-=-</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>DataTable</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><p>This also requires the store to return the appropriate type so it can be handled asyncrhonously (in this case, the user store returns the promise from getting the user&rsquo;s list, but the roles list can happen in the background):</p><div class=tab-panel data-tab-group=0ad9ff55d543c54e02190d248e26c52b><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=srcstoresuserjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0ad9ff55d543c54e02190d248e26c52b","srcstoresuserjs")'>
<span class=tab-nav-text>src/stores/user.js</span></button></div><div class=tab-content-container><div data-tab-item=srcstoresuserjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>hydrate</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/roles&#39;</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/v1/users&#39;</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>  }</span></span></code></pre></div></div></div></div></div><h3 id=fix-data-type-errors-in-form-components>Fix Data Type Errors in Form Components</h3><p>In several of the form components, I set the <code>invalid</code> attribute based on the <code>error</code> computed value. In theory, if <code>error</code> is <code>null</code>, then the <code>invalid</code> attribute will not be set. However, Vue properly tries to parse the <code>error</code> value into a Boolean, which will cause errors in the browser console.</p><p>To fix this, we can convert the presence (or absence) of the <code>error</code> object into a boolean using <code>!!error</code>. It works like this:</p><ul><li>If <code>error</code> is <code>null</code>, then <code>!error</code> is <code>true</code>, therefore <code>!!error</code> is <code>false</code>.</li><li>If <code>error</code> is not <code>null</code>, then <code>!error</code> is <code>false</code>, therefore <code>!!error</code> is <code>true</code>.</li></ul><p>To fix this, update the template in any <code>form</code> components in <code>client/src/components/forms</code> that use the <code>invalid</code> attribute as shown here, taken from the <code>TextField.vue</code> component:</p><div class=tab-panel data-tab-group=cb72e0ac2f8f1fb11aeadf65e373fc4d><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=componentsformstextfieldvue class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("cb72e0ac2f8f1fb11aeadf65e373fc4d","componentsformstextfieldvue")'>
<span class=tab-nav-text>components/forms/TextField.vue</span></button></div><div class=tab-content-container><div data-tab-item=componentsformstextfieldvue class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>FloatLabel</span> <span style=color:#a6e22e>variant</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;on&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>InputIcon</span> <span style=color:#f92672>:class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.icon&#34;</span> /&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>InputText</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.disabled&#34;</span>
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#f92672>:invalid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;!!error&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;model&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w-full&#34;</span>
</span></span><span style=display:flex><span>        /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>IconField</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>label</span> <span style=color:#f92672>:for</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;props.field&#34;</span>&gt;{{ <span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>label</span> }}&lt;/<span style=color:#f92672>label</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>FloatLabel</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--</span> Error <span style=color:#a6e22e>Text</span> <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Message</span> <span style=color:#f92672>v-if</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;error&#34; severity=&#34;error&#34; variant=&#34;simple&#34; size=&#34;small&#34;</span>&gt;{{
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>error.message</span>
</span></span><span style=display:flex><span>    }}&lt;/<span style=color:#f92672>Message</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;</span></span></code></pre></div></div></div></div></div><h2 id=server>Server</h2><h3 id=use-default-express-error-handlers>Use Default Express Error Handlers</h3><p>In my code, I added a <code>try...catch</code> block to each route handler. This can be good practice, but it is also inefficient. I have since removed all of them and switched to using this global error handler at the very end of my <code>app.js</code> code:</p><div class=tab-panel data-tab-group=95f1c14ad1fd19df3a4ff144de15b8ac><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=serverappjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("95f1c14ad1fd19df3a4ff144de15b8ac","serverappjs")'>
<span class=tab-nav-text>server/app.js</span></button></div><div class=tab-content-container><div data-tab-item=serverappjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Default Error Handler
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>((<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// If error already sent, disregard
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>headersSent</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>err</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Handle Validation Errors
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>ValidationError</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>handleValidationError</span>(<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>res</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>logger</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>err</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>500</span>).<span style=color:#a6e22e>end</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});</span></span></code></pre></div></div></div></div></div><p>This greatly shortens and simplifies the code for each route, and makes coverage testing a bit more straightforward (since each route no longer has an error path that cannot be easily tested)</p><h3 id=better-sequelize-error-handler>Better Sequelize Error Handler</h3><p>I also added a custom format to the Winston logger to better handle the exceptions generated by Sequelize. At the same time, I enabled Winston&rsquo;s ability to catch and log unahndled exceptions and rejected promises:</p><div class=tab-panel data-tab-group=8b726d7c99ef2b8c0453889abe12f482><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configsloggerjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("8b726d7c99ef2b8c0453889abe12f482","configsloggerjs")'>
<span class=tab-nav-text>configs/logger.js</span></button></div><div class=tab-content-container><div data-tab-item=configsloggerjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Import libraries
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>winston</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;winston&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>format</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;winston&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Custom formatter for Sequelize Logs
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sequelizeErrors</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>format</span>((<span style=color:#a6e22e>info</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Adapted from https://github.com/sequelize/sequelize/issues/14807#issuecomment-1853514339
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>info</span> <span style=color:#66d9ef>instanceof</span> Error <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>name</span>.<span style=color:#a6e22e>startsWith</span>(<span style=color:#e6db74>&#34;Sequelize&#34;</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> { <span style=color:#a6e22e>message</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>parent</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>sql</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>message</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;\nSQL: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>sql</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>parameters</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>stringifiedParameters</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>parameters</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stringifiedParameters</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#34;undefined&#34;</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stringifiedParameters</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#34;{}&#34;</span>
</span></span><span style=display:flex><span>      ) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;\nParameters: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>stringifiedParameters</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Stack is already included in the error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// message += &#34;\n&#34; + info.stack;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Update the message
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;\n&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>message</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>info</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//  -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Creates the Winston instance with the desired configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>logger</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>createLogger</span>({
</span></span><span style=display:flex><span>  <span style=color:#75715e>// call `level` function to get default log level
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>level</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>levels</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>levels</span>,
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Format configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// See https://github.com/winstonjs/logform
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>combine</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sequelizeErrors</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>errors</span>({ <span style=color:#a6e22e>stack</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colorize</span>({ <span style=color:#a6e22e>all</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> }),
</span></span><span style=display:flex><span>    <span style=color:#75715e>//shortFormat(),
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>timestamp</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>format</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;YYYY-MM-DD hh:mm:ss.SSS A&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>align</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>printf</span>(
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>info</span>) =&gt;
</span></span><span style=display:flex><span>        <span style=color:#e6db74>`[</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>timestamp</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>level</span><span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>stack</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>message</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;\n&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>stack</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>info</span>.<span style=color:#a6e22e>message</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>  ),
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Output configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>transports</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>transports</span>.<span style=color:#a6e22e>Console</span>()],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>exceptionHandlers</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>transports</span>.<span style=color:#a6e22e>Console</span>()],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rejectionHandlers</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>winston</span>.<span style=color:#a6e22e>transports</span>.<span style=color:#a6e22e>Console</span>()],
</span></span><span style=display:flex><span>});</span></span></code></pre></div></div></div></div></div><p>This provides much more useful output whenever there are unhandled SQL exceptions such as violated validation constraints.</p><h3 id=better-passport-user-sessions>Better Passport User Sessions</h3><p>I updated the Passport user sessions to only store a user&rsquo;s ID instead of a full user object. This is because we are only using the Passport sessions to issue a JWT (at least at this point), so a full user session is not needed. It also fixes issues where user data was not updated properly in the session after editing.</p><div class=tab-panel data-tab-group=3450d9e49c3e74a978240c32d4c40710><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=configsauthjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("3450d9e49c3e74a978240c32d4c40710","configsauthjs")'>
<span class=tab-nav-text>configs/auth.js</span></button></div><div class=tab-content-container><div data-tab-item=configsauthjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>//  -=-=- other code omitted here -=-=-
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Default functions to serialize and deserialize a session
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>passport</span>.<span style=color:#a6e22e>serializeUser</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>user</span>, <span style=color:#a6e22e>done</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>done</span>(<span style=color:#66d9ef>null</span>, <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>id</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>passport</span>.<span style=color:#a6e22e>deserializeUser</span>(<span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>user_id</span>, <span style=color:#a6e22e>done</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// We could change this to look up the user in the database here in the future
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// Instead, we make a dummy object that just contains the user&#39;s ID as a stand-in
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>done</span>(<span style=color:#66d9ef>null</span>, {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>user_id</span>
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});</span></span></code></pre></div></div></div></div></div><p>With this change, we now have to look up the user in the database each time we issue a token. This is preferred, as it will get the current user&rsquo;s profile information and roles each time a token is issued.</p><div class=tab-panel data-tab-group=31a306bf2560e917b9a3f7eacc47eecc><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=routesauthjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("31a306bf2560e917b9a3f7eacc47eecc","routesauthjs")'>
<span class=tab-nav-text>routes/auth.js</span></button></div><div class=tab-content-container><div data-tab-item=routesauthjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/token&#34;</span>, <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// If user is logged in
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>user</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Load user from database
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>User</span>.<span style=color:#a6e22e>findByPk</span>(<span style=color:#a6e22e>id</span>, {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>attributes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;id&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;username&#34;</span>,
</span></span><span style=display:flex><span>      ],
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>include</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>model</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Role</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>as</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;roles&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>attributes</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;id&#34;</span>, <span style=color:#e6db74>&#34;role&#34;</span>],
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>through</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>attributes</span><span style=color:#f92672>:</span> [],
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>user</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>token</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>jsonwebtoken</span>.<span style=color:#a6e22e>sign</span>(<span style=color:#a6e22e>user</span>, <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>JWT_SECRET_KEY</span>, {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>expiresIn</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;6h&#34;</span>,
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>({
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>token</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>token</span>,
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// user not found - probably deleted recently
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>404</span>).<span style=color:#a6e22e>end</span>()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Send unauthorized response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>401</span>).<span style=color:#a6e22e>end</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>});</span></span></code></pre></div></div></div></div></div><h3 id=fix-authorized-roles-middleware>Fix Authorized Roles Middleware</h3><p>The original <code>authorized-roles.js</code> middleware would accidentally call the <code>next()</code> handler for each matching role, instead of just the first one. The fix is to wrap the call in an <code>if</code> statement to confirm that a match has not already been found.</p><div class=tab-panel data-tab-group=1cb6fe89d1a83ca9a22328b4de41c18a><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=middlewaresauthorized-rolesjs class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("1cb6fe89d1a83ca9a22328b4de41c18a","middlewaresauthorized-rolesjs")'>
<span class=tab-nav-text>middlewares/authorized-roles.js</span></button></div><div class=tab-content-container><div data-tab-item=middlewaresauthorized-rolesjs class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>roleBasedAuth</span> <span style=color:#f92672>=</span> (...<span style=color:#a6e22e>roles</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>roleAuthMiddleware</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// logger.debug(&#34;Route requires roles: &#34; + roles);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// logger.debug(
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//   &#34;User &#34; +
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//     req.token.username +
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//     &#34; has roles: &#34; +
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//     req.token.roles.map((r) =&gt; r.role).join(&#34;,&#34;),
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// );
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>match</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>// loop through each role given
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>role</span>) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// if the user has that role, then they can proceed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>token</span>.<span style=color:#a6e22e>roles</span>.<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>r</span>) =&gt; <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>role</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>role</span>)) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// logger.debug(&#34;Role match!&#34;);
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>match</span>) {
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#a6e22e>match</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex;background-color:#3c3d38><span>          <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>next</span>();
</span></span><span style=display:flex;background-color:#3c3d38><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>match</span>) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// if no roles match, send an unauthenticated response
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// logger.debug(&#34;No role match!&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>401</span>).<span style=color:#a6e22e>send</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>};</span></span></code></pre></div></div></div></div></div><h3 id=docker-outside-docker-devcontainer-feature>Docker Outside Docker Devcontainer Feature</h3><p>If you plan on developing this application in GitHub Codespaces with a secondary PostgreSQL container, you may also want to add the <code>docker-outside-of-docker</code> feature to your <code>devcontainer.json</code> file - this allows you to see and control containers that are created as part of the GitHub codespace:</p><div class=tab-panel data-tab-group=0f7ed17f55d3671f9dac5a45813f79bd><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item=devcontainerdevcontainerjson class="tab-nav-button tab-panel-style cstyle initial active" tabindex=-1 onclick='switchTab("0f7ed17f55d3671f9dac5a45813f79bd","devcontainerdevcontainerjson")'>
<span class=tab-nav-text>.devcontainer/devcontainer.json</span></button></div><div class=tab-content-container><div data-tab-item=devcontainerdevcontainerjson class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class=highlight dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#75715e>// For format details, see https://aka.ms/devcontainer.json. For config options, see the
</span></span></span><span style=display:flex><span><span style=color:#75715e>// README at: https://github.com/devcontainers/templates/tree/main/src/typescript-node
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span>	<span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Node.js &amp; TypeScript&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#f92672>&#34;image&#34;</span>: <span style=color:#e6db74>&#34;mcr.microsoft.com/devcontainers/typescript-node:1-22-bookworm&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#f92672>&#34;customizations&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#f92672>&#34;vscode&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#f92672>&#34;extensions&#34;</span>: [
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;qwtel.sqlite-viewer&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;ms-vscode.live-server&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#34;Vue.volar&#34;</span>
</span></span><span style=display:flex><span>			]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Features to add to the dev container. More info: https://containers.dev/features.
</span></span></span><span style=display:flex;background-color:#3c3d38><span><span style=color:#75715e></span>	<span style=color:#f92672>&#34;features&#34;</span>: {
</span></span><span style=display:flex;background-color:#3c3d38><span>      <span style=color:#f92672>&#34;ghcr.io/devcontainers/features/docker-outside-of-docker&#34;</span>: {}
</span></span><span style=display:flex;background-color:#3c3d38><span>    },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Use &#39;forwardPorts&#39; to make a list of ports inside the container available locally.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#f92672>&#34;forwardPorts&#34;</span>: [<span style=color:#ae81ff>3000</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Use &#39;postCreateCommand&#39; to run commands after the container is created.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// &#34;postCreateCommand&#34;: &#34;yarn install&#34;,
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Configure tool-specific properties.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// &#34;customizations&#34;: {},
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#75715e>// &#34;remoteUser&#34;: &#34;root&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div></div></div></div><p>After adding that line, rebuild the codespace, and then use <code>docker ps</code> to see running containers. All other <code>docker</code> commands should work for managing or restarting other containers.</p><footer class=footline></footer></article></div></main></div><script src=/cis526/js/clipboard/clipboard.min.js?1769117712 defer></script><script src=/cis526/js/perfect-scrollbar/perfect-scrollbar.min.js?1769117712 defer></script><script src=/cis526/js/theme.min.js?1769117712 defer></script></div><script src=/cis526/js/tele-scroll.min.js?1769117712 defer></script></body></html>