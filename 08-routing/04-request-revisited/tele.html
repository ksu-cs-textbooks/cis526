<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="generator" content="Relearn 5.0.3+tip">




	
	
			

	
	
			

	
	
			

	
	
			
			

	
	
			

	
	
			
			
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			

	
	
			

	
	
			
			
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			

	
	
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			
			
			

	
	
			

	
	
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			

	
	
			
			
			
			

    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Request Revisted :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/08-routing/04-request-revisited/" rel="canonical" type="text/html" title="CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/08-routing/04-request-revisited/index.xml" rel="alternate" type="application/rss+xml" title="CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/_print/08-routing/04-request-revisited/" rel="alternate" type="text/html" title="CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/08-routing/04-request-revisited/embed.html" rel="alternate" type="text/html" title="CIS 526 Textbook">
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1659468287" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/featherlight.min.css?1659468287" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1659468287" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;">
    <noscript>
      <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1659468287" rel="stylesheet">
      <link href="https://ksu-cs-textbooks.github.io/cis526/css/featherlight.min.css?1659468287" rel="stylesheet">
      <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1659468287" rel="stylesheet">
    </noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1659468287" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1659468287" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1659468287" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1659468287" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-light-theme.css?1659468287" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1659468287" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1659468287" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1659468287" rel="stylesheet" media="print">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1659468287"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://ksu-cs-textbooks.github.io/cis526/index.json";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1659468287" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/jquery.min.js?1659468287" defer></script>

  </head>
  <body class="mobile-support disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/08-routing/04-request-revisited/">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="default">
    
    
<h1>Request Revisted</h1>
    
    
<p>We&rsquo;ve seen then how the request conveys information useful to selecting the appropriate endpoint with the path, and also the query string.  But there is more information available in our request than just those two tidbits.  And we have <em>all</em> of that information available to us for determining the correct response to send.  With that in mind, let&rsquo;s revisit the parts of the request in terms of what kinds of information they can convey.</p>
<h2 id="the-url-revisited">The URL, Revisited</h2>
<p>Now that we&rsquo;re thinking of the URL as a tool for passing information to the server, let&rsquo;s reexamine its parts:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cis526/images/6.3.1.png" alt="A diagram of a URL"></p>
<p>The <strong>protocol</strong> is the protocol used for communication, and the <strong>host</strong> is the domain or IP address of the server.  Note that these are <em>not</em> included in Node&rsquo;s <code>req.url</code> parameter, as these are used to find the right server and talk to it using the right protocol - by the time your Node server is generating the <code>req</code> object, the request has already found your server and is communicating with the protocol.</p>
<p>This is also why when we&rsquo;ve been parsing <code>req.url</code> with the 

<a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener">URL</a> object, we&rsquo;ve supplied a host and protocol of <code>http://localhost</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">URL</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">url</span>, <span style="color:#e6db74">&#34;http://localhost&#34;</span>);
</span></span></code></pre></div><p>This gives the URL object a placeholder for the missing protocol and host, so that it can parse the supplied URL without error.  Just keep in mind that by doing so the <code>url.protocol</code> and <code>url.host</code> properties of <code>url</code> equal this &ldquo;fake&rdquo; host and protocol.</p>
<p>The <strong>path</strong> is the path to the virtual resource requested, accessible in our parsed URL as <code>url.pathname</code>.  Traditionally, this corresponded to a file path, which is how we used it in our fileserver examples.  But as we have seen with Placeholder.com, it can also be used to convey other information - in that case, the size of the image, its background color, and foreground color.</p>
<p>The <strong>query</strong> or <strong>querystring</strong> is a list of key-value pairs, proceeded by the <code>?</code>.  Traditionally this would be used to modify some aspect of the request, such as requesting a particular data format or portion of a dataset.  It is also how forms are submitted with a GET request - the form data is encoded into the query string.</p>
<p>The <strong>hash</strong> or <strong>fragment</strong> is proceeded by a <code>#</code>, and traditionally indicates an element on the page that the browser should auto-scroll to.  This element should have an <code>id</code> attribute that matches the one supplied by the hash.  For example, clicking this link: 

<a href="#the-url-revisited">#the-url-revisited</a> will scroll back to the header for this section (note we left the path blank, so the browser assumes we want to stay on this page).</p>
<p>Clearly our URL can clearly convey a lot of data to our server. But that&rsquo;s not the only information that we can use in deciding how to respond to a request.</p>
<h2 id="request-method-revisited">Request Method, Revisited</h2>
<p>In addition, we also receive the HTTP Method used for the request, i.e. GET, POST, PATCH, PUT, or DELETE. These again map back to the traditional role of a web server as a file server - GET retrieves a resource, POST uploads one, PATCH and PUT modify one, and DELETE removes it. But we can also create, read, update, and destroy <em>virtual</em> resources, i.e. resources generated and stored on the server that are <em>not</em> files.  These play an especially important role in RESTful routes, which we&rsquo;ll discuss soon.</p>
<h2 id="headers-revisited">Headers, Revisited</h2>
<p>We can also convey additional information for the server to consider as part of the request headers.  This is usually used to convey information tangential to the request, like authentication and cookies.  We&rsquo;ll also discuss this a bit further on.</p>

            <footer class="footline">
            </footer>
          </article>

        </div>
      </main>
    
    
    </div>
    
  </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1659468287" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1659468287" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/featherlight.min.js?1659468287" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1659468287" defer></script>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/tele-scroll.js?1659468287 defer"></script>
    
  </body>
</html>
