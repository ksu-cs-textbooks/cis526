




	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Relational Databases :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/07-persistent-storage/04-relational-databases/index.html" rel="canonical" type="text/html" title="Relational Databases :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/07-persistent-storage/04-relational-databases/index.xml" rel="alternate" type="application/rss+xml" title="Relational Databases :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/07-persistent-storage/04-relational-databases/index.print.html" rel="alternate" type="text/html" title="Relational Databases :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/07-persistent-storage/04-relational-databases/embed.html" rel="alternate" type="text/html" title="Relational Databases :: CIS 526 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705960763" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705960763" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1705960763" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705960763" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705960763" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1705960763" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705960763" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705960763" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1705960763" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-auto.css?1705960763" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1705960763" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1705960763" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1705960763" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/url.js?1705960763"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1705960763"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis526/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1705960763" rel="stylesheet">

  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/07-persistent-storage/04-relational-databases/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="relational-databases">Relational Databases</h1>

<p>Relational databases (also called SQL databases) provide a highly-structured storage mechanism.  Data is organized into <em>tables</em>, with each column representing a single value and data type, and each row representing one entry.  Conceptually, this organization is similar to tables you have seen in Excel and on the web.  An example <em>persons</em> table is listed below:</p>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>First</th>
      <th>Last</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Lisa</td>
      <td>Merkowsky</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Frank</td>
      <td>Stiles</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Mary</td>
      <td>Cotts</td>
    </tr>
  </tbody>
</table>
<p>Relational databases are often called SQL databases as we use <em>Structured Query Language (SQL)</em> to communicate with them.  This is a domain-specific language similar to the LINQ you may have learned about in CIS 400 (actually, LINQ derives much of its syntax from SQL).  Queries are streamed to a relational database across a socket or other connection, much like HTTP requests and responses are.  The response is received also as text which must be parsed to be used.</p>
<p>SQL is used to construct the structure of the database.  For example, we could create the above table with the SQL command:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> persons (
</span></span><span style="display:flex;"><span>    id <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">Last</span> TEXT,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">First</span> TEXT,
</span></span><span style="display:flex;"><span>);</span></span></code></pre></div><p>SQL is also used to <em>query</em> the database.  For example, to find all people with the last name &ldquo;Smith&rdquo;, we would use the query:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> persons <span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">last</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Smith&#39;</span>;</span></span></code></pre></div><p>You will learn more about writing SQL queries in the CIS 560 or CC 520 course.  You can also find an excellent guide on <a href="https://www.w3schools.com/sql/" target="_blank">W3C schools</a>
, with interactive tutorials.  We&rsquo;ll briefly cover some of the most important aspects of relational databases for web developers here, but you would be wise to seek out additional learning opportunities.  Understanding relational databases well can make a great deal of difference in how performant your web applications are.</p>
<p>The key to performance in relational databases is the use of <em>keys</em> and <em>indices</em>.  A key is a column whose values are unique (not allowed to be repeated).  For example, the <code>id</code> column in the table above is a key.  Specifically, it is a sequential primary key - for each row we add to the table it increases, and its value is determined by the database.  Note the jump from <code>1</code> to <code>3</code> - there is no guarantee the keys will always be exactly one more than the previous one (though it commonly is), and if we delete rows from a table, the keys remain the same.</p>
<h3 id="indices">Indices</h3>
<p>An index is a specialized data structure that makes searching for data faster.  Consider the above table.  If we wanted to find all people with the last name &ldquo;Smith&rdquo;, we&rsquo;d need to iterate over each row, looking for &ldquo;Smith&rdquo;.  That is a linear $O(n)$ complexity.  It would work quickly in our example, but when our table has thousands or millions of rows (not uncommon for large web apps), it would be painfully slow.</p>
<p>Remember learning about dictionaries or hash tables in your data structures course?  The lookup time for one of those structures is constant $O(1)$.  Indices work like this - we create a specialized data structure that can provide the index we are looking for, i.e. an index built on the <code>Last</code> column would map <code>last =&gt; id</code>.  Then we could retrieve all &ldquo;Smith&rdquo; last names from this structure in constant time $O(1)$.  Since we know the primary key is unique and ordered, we can use some kind of divide-and-conquer search strategy to find all rows with a primary key in our set of matches, with a complexity of $O(log(n))$.  Thus, the complete lookup would be $O(log(n)) + O(1)$, which we would simplify to $O(log(n))$, much faster for a large $n$ than $O(n)$.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>In truth, most SQL databases use <a href="https://en.wikipedia.org/wiki/B-tree" target="_blank">Balanced Trees (B-Trees)</a>
 for their indices; but the exact data structure is unimportant to us as web developers, as long as retrieval is efficient.</p>
</div>
</div>
<p>We can create an index using SQL.  For example, to create an index on the column <code>last</code> in our example, we would use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> last_index <span style="color:#66d9ef">ON</span> persons (<span style="color:#66d9ef">last</span>);</span></span></code></pre></div><p>An index can involve more than one row - for example, if we expected to search by both first and last name, we&rsquo;d probably create an index that used both as the key. The SQL to do so for both first and last names would be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> both_names <span style="color:#66d9ef">ON</span> persons (<span style="color:#66d9ef">last</span>, <span style="color:#66d9ef">first</span>);</span></span></code></pre></div><p>Each index effectively creates a new data structure consuming additional memory, so you should consider which indices are really necessary.  Any column or column you frequently look up values by (i.e. are part of the WHERE clause of a query) should be indexed.  Columns that are only rarely or never used this way should not be included in indices.</p>
<h3 id="relationships">Relationships</h3>
<p>The second important idea behind a relational database is that we can define relationships <em>between</em> tables.  Let&rsquo;s add a second table to our example, <em>addresses</em>:</p>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>person_id</th>
      <th>street</th>
      <th>city</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>Anderson Ave.</td>
      <td>Manhattan</td>
      <td>KS</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>Sesame St.</td>
      <td>Baltimore</td>
      <td>ML</td>
    </tr>
    <tr>
      <td>2</td>
      <td>1</td>
      <td>Moholland Dr.</td>
      <td>Hollywood</td>
      <td>CA</td>
    </tr>
    <tr>
      <td>3</td>
      <td>3</td>
      <td>Cooper Street</td>
      <td>Silver City</td>
      <td>NM</td>
    </tr>
  </tbody>
</table>
<p>Here <code>person_id</code> is a <em>foreign key</em>, and corresponds to the <code>id</code> in the <em>persons</em> table.  Thus, we can look up the address of Lisa Merkowsky by her <code>id</code> of 0.  The row in the <em>addresses</em> table with the value of 0 for <code>person_id</code> is &ldquo;Anderson Ave., Manhattan KS&rdquo;.</p>
<p>Note too that it is possible for one row in one table to correspond to more than one row in another - in this example Frank Styles has <em>two</em> addresses, one in Baltimore and one in Hollywood.</p>
<p>If one row in one table corresponds to a single row in another table, we often call this a <em>one-to-one</em> relationship.  If one row corresponds to more than one row in another table, we call this a <em>one-to-many</em> relationship.  We retrieve these values using a query with a JOIN clause, i.e. to get each person with their addresses, we might use:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">last</span>, <span style="color:#66d9ef">first</span>, street, city, <span style="color:#66d9ef">state</span> <span style="color:#66d9ef">FROM</span> persons <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> addresses <span style="color:#66d9ef">ON</span> persons.id <span style="color:#f92672">=</span> addresses.person_id;</span></span></code></pre></div><p>The result will also be structured as a table with columns <code>last</code>, <code>first</code>, <code>street</code>, <code>city</code>, and <code>state</code> containing a row for each person.  Actually, there will be <em>two</em> rows for Frank, one containing each of his two addresses.</p>
<p>Finally, it is possible to have a <em>many-to-many</em> relationship, which requires a special table to sit in between the two called a <em>join</em> table.  Consider if we had a <em>jobs</em> table:</p>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Doctor</td>
      <td>A qualified practitioner of medicine; a physician.</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Lawyer</td>
      <td>A person who practices or studies law; an attorney or a counselor.</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Producer</td>
      <td>A person responsible for the financial and managerial aspects of making of a movie or broadcast or for staging a play, opera, etc.</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Detective</td>
      <td>A person, especially a police officer, whose occupation is to investigate and solve crimes.</td>
    </tr>
  </tbody>
</table>
(definitions provided by Oxford Languages)
<p>Because more than one person can have the same job, and we might want to look up people by their jobs, or a list of jobs that a specific person has, we would need a join table to connect the two.  This could be named <em>persons_jobs</em> and would have a foreign key to both:</p>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>person_id</th>
      <th>job_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <td>2</td>
      <td>3</td>
      <td>1</td>
    </tr>
    <tr>
      <td>3</td>
      <td>3</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>Thus Lisa is a doctor, Frank a producer, and Mary is both a doctor and detective!  We could query for every doctor using a SQL statement with two joins, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">first</span>, <span style="color:#66d9ef">last</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> jobs 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> persons_jobs <span style="color:#66d9ef">ON</span> jobs.id <span style="color:#f92672">=</span> persons_jobs.job_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> persons <span style="color:#66d9ef">ON</span> jobs_persons.person_id <span style="color:#f92672">=</span> person.id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> jobs.name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Doctor&#39;</span>;</span></span></code></pre></div><p>As suggested before, this is just scraping the surface of relational databases.  You&rsquo;ll definitely want to spend more time studying them, as they remain the most common form of persistent storage used on the web and in other industries as well.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    </div>
    
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1705960763" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1705960763" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1705960763" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/tele-scroll.js?1705960763 defer"></script>
    
  </body>
</html>
