<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="HTML, CSS, and JavaScript in the Browser"><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Document Object Model :: CIS 526 Textbook"><meta name=twitter:description content="HTML, CSS, and JavaScript in the Browser"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/01-the-dom/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="The Document Object Model :: CIS 526 Textbook"><meta property="og:description" content="HTML, CSS, and JavaScript in the Browser"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta itemprop=name content="The Document Object Model :: CIS 526 Textbook"><meta itemprop=description content="HTML, CSS, and JavaScript in the Browser"><meta itemprop=datePublished content="2018-08-24T10:53:05-05:00"><meta itemprop=dateModified content="2023-08-10T16:48:12-05:00"><meta itemprop=wordCount content="7"><title>The Document Object Model :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/01-the-dom/ rel=canonical type=text/html title="The Document Object Model :: CIS 526 Textbook"><link href=/cis526/01-the-dom/index.xml rel=alternate type=application/rss+xml title="The Document Object Model :: CIS 526 Textbook"><link href=/cis526/01-the-dom/tele.html rel=alternate type=text/html title="The Document Object Model :: CIS 526 Textbook"><link href=/cis526/01-the-dom/embed.html rel=alternate type=text/html title="The Document Object Model :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1741019921 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1741019921 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1741019921 rel=stylesheet><link href=/cis526/css/auto-complete.css?1741019921 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1741019921 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1741019921 rel=stylesheet><link href=/cis526/css/fonts.css?1741019921 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1741019921 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1741019921 rel=stylesheet><link href=/cis526/css/theme-auto.css?1741019921 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1741019921 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1741019921 rel=stylesheet><link href=/cis526/css/print.css?1741019921 rel=stylesheet media=print><link href=/cis526/css/format-print.css?1741019921 rel=stylesheet><script src=/cis526/js/variant.js?1741019921></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1741019921 rel=stylesheet></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/cis526/01-the-dom/><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>The Document Object Model</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/00-forward/06-syllabus/ title="Spring 2025 Syllabus (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/cis526/01-the-dom/01-introduction/ title="Introduction (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 1</div><h1 id=the-document-object-model>The Document Object Model</h1><p>HTML, CSS, and JavaScript in the Browser</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of The Document Object Model</h1><article class=default><header class=headline></header><h1 id=introduction>Introduction</h1><p>At this point, you should be familiar with the big three technologies of the world-wide-web <em>HTML</em>, <em>CSS</em>, and <em>JavaScript</em> (Feel free to visit the appendices for a quick review). These three technologies work together to create the web pages you interact with every day. Each has a role to play in defining the final appearance of a web page:</p><ul><li>Hyper-Text Markup Language (HTML) provides the structure and content</li><li>Cascading Style Sheets (CSS) determine how that content should appear visually</li><li>JavaScript provides interactivity, allowing both the structure and appearance of the page to change dynamically</li></ul><p>We often refer to this division of responsibility as the <a href=https://en.wikipedia.org/wiki/Separation_of_concerns rel=external target=_blank>separation of concerns</a>. By placing all responsibility for appearance on a CSS file, we can refresh the look of a web application simply by replacing the old CSS file with a new one. Similarly, we can create a new page in our site that looks and feels like the rest of the site by creating a new HTML page that links to the site&rsquo;s existing CSS files.</p><p>While you have written HTML, CSS, and JavaScript files in your prior learning experiences, you might not have thought about just how these files are processed, and those styling rules applied. In this chapter we will explore this topic in detail, while introducing some more advanced uses for each.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=document-object-model>Document Object Model</h1><p>The Document Object Model (or DOM) is a data structure representing the content of a web page, created by the browser as it parses the website. The browser then makes this data structure accessible to scripts running on the page. The DOM is essentially a tree composed of objects representing the HTML elements and text on the page.</p><p>Consider this HTML:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Hello DOM!<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;site.css&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;banner&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Hello DOM!<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                The Document Object Model (DOM) is a programming API for HTML and XML documents. It defines the logical structure of documents and the way a document is accessed and manipulated. In the DOM specification, the term &#34;document&#34; is used in the broad sense - increasingly, XML is being used as a way of representing many different kinds of information that may be stored in diverse systems, and much of this would traditionally be seen as data rather than as documents. Nevertheless, XML presents this data as documents, and the DOM may be used to manage this data.
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://www.w3.org/TR/WD-DOM/introduction.html&#34;</span><span class=p>&gt;</span>From w3.org&#39;s What is the Document Object Model?<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span></span></span></code></pre></div><p>When it is parsed by the browser, it is transformed into this tree:</p><p><a href=#R-image-15abeceeee55b0360e03e2a5823157ac class=lightbox-link><img alt="The DOM for the supplied HTML" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.2.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-15abeceeee55b0360e03e2a5823157ac><img alt="The DOM for the supplied HTML" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.2.1.png></a></p><h3 id=the-dom-tree-and-developer-tools>The DOM Tree and Developer Tools</h3><p>Most browsers also expose the DOM tree through their developer tools. Try opening the example page in Chrome or your favorite browser using <a href=/cis526/01-the-dom/02-document-object-model/../../examples/1.2.1/index.html target=_blank>this link</a>.</p><p>Now open the developer tools for your browser:</p><ul><li><strong>Chrome</strong> <code>CTRL + SHIFT + i</code> or right-click and select &lsquo;Inspect&rsquo; from the context menu.</li><li><strong>Edge</strong> <code>CTRL + SHIFT + i</code> or right-click and select &lsquo;Inspect element&rsquo; from the context menu.</li><li><strong>Firefox</strong> <code>CTRL + SHIFT + i</code> or right-click and select &lsquo;Inspect Element&rsquo; from the context menu.</li><li><strong>Safari</strong> Developer tools must be enabled. See the <a href=https://support.apple.com/guide/safari/use-the-developer-tools-in-the-develop-menu-sfri20948/mac rel=external target=_blank>Safari User Guide</a></li></ul><p>You should see a new panel open in your browser, and under its &rsquo;elements&rsquo; tab the DOM tree is displayed:</p><p><a href=#R-image-74b03256d696d27b0b5fe80be95e3a98 class=lightbox-link><img alt="The Elements tab of the Chrome Developer Tools" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.2.2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-74b03256d696d27b0b5fe80be95e3a98><img alt="The Elements tab of the Chrome Developer Tools" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.2.2.png></a></p><p>Collapsed nodes can be expanded by clicking on the arrow next to them. Try moving your mouse around the nodes in the DOM tree, and you&rsquo;ll see the corresponding element highlighted in the page. You can also <em>dynamically edit</em> the DOM tree from the elements tab by right-clicking on a node.</p><p>Try right-clicking on the <code>&lt;h1></code> node and selecting &rsquo;edit text&rsquo;. Change the text to &ldquo;Hello Browser DOM&rdquo;. See how it changes the page?</p><p>The page is rendered from the DOM, so editing the DOM changes how the page appears. However, the initial structure of the DOM is derived from the loaded HTML. This means if we refresh the page, any changes we made to the DOM using the developer tools will be lost, and the page will return to its original state. Give it a try - hit the refresh button.</p><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>For convenience, this textbook will use the <a href=https://www.google.com/chrome rel=external target=_blank>Chrome browser</a> for all developer tool reference images and discussions, but the other browsers offer much of the same functionality. If you prefer to use a different browser&rsquo;s web tools, look up the details in that browser&rsquo;s documentation.</p></div></div><p>You&rsquo;ve now seen how the browser creates the DOM tree by parsing the HTML document and that DOM tree is used to render the page. Next, we&rsquo;ll look at how styles interact with the DOM to modify how it is displayed.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=css-and-the-dom>CSS and the DOM</h1><p>Cascading style sheets (CSS) also interact with the DOM. Consider this CSS code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>banner</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>border</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span> <span class=kc>solid</span> <span class=kc>gold</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-radius</span><span class=p>:</span> <span class=mi>5</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>background-color</span><span class=p>:</span> <span class=kc>goldenrod</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>padding</span><span class=p>:</span> <span class=mi>5</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>color</span><span class=p>:</span> <span class=kc>brown</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>banner</span> <span class=o>&gt;</span> <span class=nt>h1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>font-style</span><span class=p>:</span> <span class=kc>italic</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>banner</span> <span class=nt>p</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>text-decoration</span><span class=p>:</span> <span class=kc>line-through</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>font-size</span><span class=p>:</span> <span class=mf>1.2</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>When it is placed in the <em>site.css</em> file referenced by the HTML we discussed in the last section, the rules it defines are evaluated in terms of the DOM tree. The result is the page now looks like this:</p><p><a href=#R-image-3e7a8fb0c8eb3eed3bbf80f7d9fe8bcc class=lightbox-link><img alt="The styled example page" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-3e7a8fb0c8eb3eed3bbf80f7d9fe8bcc><img alt="The styled example page" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.1.png></a></p><p>Now let&rsquo;s talk about how this CSS code and the DOM interact.</p><p>Consider the selector <code>.banner</code>. It looks for any element whose class attribute includes the string <code>"banner"</code>. Hence, it matches the <code>&lt;div></code> element, adding a color, background color, border, and padding. This visualization of the DOM tree indicates the selected node in yellow:</p><p><a href=#R-image-5acda13c63ff18f88f5f647bbe369ec6 class=lightbox-link><img alt="DOM tree visualization with marked .banner node" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-5acda13c63ff18f88f5f647bbe369ec6><img alt="DOM tree visualization with marked .banner node" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.2.png></a></p><p>Notice how the text in both the <code>&lt;h1></code> element and the <code>&lt;p></code> element are a reddish color? That color is the one defined in the <code>.banner</code> rule: <code>color: #754907</code>. The rule applies not only to the selected node, but to <em>all its descendants in the DOM tree</em>. This is the &lsquo;cascading&rsquo; part of cascading style sheets - the rules flow down the DOM tree until they are overridden by more specific css rules in descendant nodes.</p><p>The second way CSS interacts with the DOM tree is through the CSS selectors themselves.</p><p>For example, the selector <code>.banner > h1</code> uses the <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator rel=external target=_blank>child combinator</a> - the <code>></code> symbol between <code>.banner</code> and <code>h1</code>. This indicates that the rule will be applied to any <code>&lt;h1></code> nodes that are <em>direct children</em> of the node with the class of <code>"banner"</code>. As we can see from the DOM tree, the sole <code>&lt;h1></code> tag is a child of the <code>&lt;div.banner></code> node, so this rule is applied to it:</p><p><a href=#R-image-f7cb8c8c896cad2c3f8fe790550d77b0 class=lightbox-link><img alt="DOM tree visualization with marked .banner > h1 node" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f7cb8c8c896cad2c3f8fe790550d77b0><img alt="DOM tree visualization with marked .banner > h1 node" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.3.png></a></p><p>Similarly, the <code>.banner p</code> tag uses the <a href=https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors/Combinators rel=external target=_blank>descendant combinator</a> - the space between the <code>.banner</code> and <code>p</code>. This indicates that the rule will be applied to any <code>&lt;p></code> nodes that are <em>descended from</em> the node with the class of <code>"banner"</code>. This will apply no matter how far down the tree those nodes appear. Thus, if we added more <code>&lt;p></code> elements inside of a <code>&lt;div></code> that was a child of the <code>&lt;div.banner></code> node, it would apply to them as well.</p><p><a href=#R-image-cf340530c2b545488c1a3e874a18f809 class=lightbox-link><img alt="DOM tree visualization with marked .banner p nodes" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-cf340530c2b545488c1a3e874a18f809><img alt="DOM tree visualization with marked .banner p nodes" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.4.png></a></p><p>You can see the example with the styling applied by following <a href=/cis526/01-the-dom/03-css-and-the-dom/../../examples/1.3.1/index.html target=_blank>this link</a>. Try adding the div and two paragraphs with the developer tools. See how the styles are automatically applied to the new nodes in the DOM tree?</p><h3 id=css-and-developer-tools>CSS and Developer Tools</h3><p>Speaking of developer tools, there is another handy tab that deals with CSS, the &lsquo;Styles&rsquo; tab. It displays <em>all</em> the css rules applied to a specific node. Select one of your new <code>&lt;p></code> elements. Notice how the styles tab shows the css rule <code>.banner p</code> that we&rsquo;ve been discussing? Moreover, it tells you which CSS file and which line in that file the rule is found on.</p><p><a href=#R-image-77a4a1154baadb73f986c45b29ef1997 class=lightbox-link><img alt="Styles tab in developer tools" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-77a4a1154baadb73f986c45b29ef1997><img alt="Styles tab in developer tools" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.5.png></a></p><p>If you scroll down, it also shows you the rules inherited (cascaded) from the <code>.banner</code> rule:</p><p><a href=#R-image-f4cae51e8059179404c7eb38dbc5c63b class=lightbox-link><img alt="Inherited rules" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f4cae51e8059179404c7eb38dbc5c63b><img alt="Inherited rules" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.6.png></a></p><p>If you scroll clear to the bottom, you will also see a visualization of the <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model rel=external target=_blank>box model</a> as it is applied to this element.</p><p><a href=#R-image-d71970572d44497eae023801ea00ba62 class=lightbox-link><img alt="Custom style in developer tools" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.7.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-d71970572d44497eae023801ea00ba62><img alt="Custom style in developer tools" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.7.png></a></p><p>This can be very handy for debugging margin/padding/border issues.</p><p>Now scroll back up to the top of the styles tab. Notice the <code>element.style {}</code> rule? This displays inline CSS on the element, and we can also add our own inline CSS directly from the developer tools. Add the property key/value pair <code>text-decoration: none</code>. Notice what happens to the paragraph&rsquo;s text? Also, notice how the <em>now overridden</em> rule has been struck through in the rule below.</p><p><a href=#R-image-697a9906672cdf429409ad8dc2b502a8 class=lightbox-link><img alt="Custom style in developer tools" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.3.8.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-697a9906672cdf429409ad8dc2b502a8><img alt="Custom style in developer tools" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.3.8.png></a></p><p>This can be very handy for quickly trying out different style combinations without needing to add them to the CSS file. Much like changes to the DOM, these are not saved - refresh the page and they are gone.</p><p>Finally, notice that when the mouse hovers over a CSS property key/value pair, a checkbox appears next to it? If you uncheck the box, the property ceases to be applied. This can also be very handy for debugging CSS problems.</p><p>Now that we&rsquo;ve seen how CSS interacts with the DOM tree, it&rsquo;s time to turn our attention to the third web technology - JavaScript.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=javascript-and-the-dom>JavaScript and the DOM</h1><p>The DOM tree is also accessible from JavaScript running in the page. It is accessed through the global <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window rel=external target=_blank>window</a> object, i.e. <code>window.document</code> or <code>document</code>.</p><p>Let&rsquo;s use the &lsquo;Console&rsquo; tab of the developer tools to access this object. Open the previous example page again from <a href=/cis526/01-the-dom/04-js-and-the-dom/../../examples/1.3.1/index.html target=_blank>this link</a>. Click the console tab to open the expanded console, or use the console area in the bottom panel of the elements tab:</p><p><a href=#R-image-4689dbaa048278d95c69b22d2e72fb42 class=lightbox-link><img alt="The console tab in the developer tools" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.4.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-4689dbaa048278d95c69b22d2e72fb42><img alt="The console tab in the developer tools" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.4.1.png></a></p><p>With the console open, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=nb>document</span></span></span></code></pre></div><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>When instructed to type something into the console, I will use the <code>></code> symbol to represent the cursor prompt. You do <em>not</em> need to type it.</p></div></div><p>Once you hit the enter key, the console will report the value of the expression <code>document</code>, which exposes the document object. You can click the arrow next to the <code>#document</code> to expose its properties:</p><p><a href=#R-image-b3b2c5a84f3a557b78d5dce13132a341 class=lightbox-link><img alt="The reported document object" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.4.2.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b3b2c5a84f3a557b78d5dce13132a341><img alt="The reported document object" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.4.2.png></a></p><p>The document is an instance of the <a href=https://developer.mozilla.org/en-US/docs/Web/API/document rel=external target=_blank>Document</a> class. It is the entry point (and the root) of the DOM tree data structure. It also implements the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Node rel=external target=_blank>Node</a> and <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventTarget rel=external target=_blank>EventTarget</a> interfaces, which we&rsquo;ll discuss next.</p><h2 id=the-node-interface>The Node Interface</h2><p>All nodes in the DOM tree implement the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Node rel=external target=_blank>Node</a> interface. This interface provides methods for traversing and manipulating the DOM tree. For example, each node has a property <code>parentElement</code> that references is parent in the DOM tree, a property <code>childNodes</code> that returns a <a href=https://developer.mozilla.org/en-US/docs/Web/API/NodeList rel=external target=_blank>NodeList</a> of all the Node&rsquo;s children, as well as properties referencing the <code>firstChild</code>, <code>lastChild</code>, <code>previousSibling</code>, and <code>nextSibling</code>.</p><p>Let&rsquo;s try walking the tree manually. In the console, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>firstElementChild</span><span class=p>.</span><span class=nx>firstElementChild</span></span></span></code></pre></div><p>The <code>body</code> property of the document directly references the <code>&lt;body></code> element of the webpage, which also implements the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Node rel=external target=_blank>Node</a> interface. The <code>firstElementChild</code> references the first HTML element that is a child of the node, so in using that twice, we are drilling down to the <code>&lt;h1></code> element.</p><p><a href=#R-image-f7a36c5eb101af04717c355c5fdea9ff class=lightbox-link><img alt="The reported h1 object" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.4.3.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f7a36c5eb101af04717c355c5fdea9ff><img alt="The reported h1 object" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.4.3.png></a></p><h2 id=the-eventtarget-interface>The EventTarget Interface</h2><p>Each node in the DOM tree also implements the <code>EventTarget</code> interface. This allows arbitrary events to be attached to any element on the page. For example, we can add a click event to the <code>&lt;h1></code> element. In the console, type:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>firstElementChild</span><span class=p>.</span><span class=nx>firstElementChild</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span> <span class=o>+</span> <span class=s1>&#39; clicked!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>The first argument to <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener rel=external target=_blank>EventTarget.addEventListener</a> is the event to listen for, and the second is a function to execute when the event happens. Here we&rsquo;ll just log the event to the console.</p><p>Now try clicking on the <em>Hello DOM!</em> <code>&lt;h1></code> element. You should see the event being logged:</p><p><a href=#R-image-9354bffe7208f3c5df99e8be59ec2734 class=lightbox-link><img alt="The logged event" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.4.4.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-9354bffe7208f3c5df99e8be59ec2734><img alt="The logged event" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.4.4.png></a></p><p>We can also remove event listeners with <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener rel=external target=_blank>EventTarget.removeEventListener</a> and trigger them programmatically with <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent rel=external target=_blank>EventTarget.dispatchEvent</a>.</p><h2 id=querying-the-dom>Querying the DOM</h2><p>While we can use the properties of a node to walk the DOM tree manually, this can result in some very ugly code. Instead, the <a href=https://developer.mozilla.org/en-US/docs/Web/API/document rel=external target=_blank>Document</a> object provides a number of methods that allow you to search the DOM tree for a specific value. For example:</p><ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByTagName rel=external target=_blank>Document.getElementsByTagName</a> returns a list of elements with a specific tag name, i.e. <code>document.getElementsByTagName('p')</code> will return a list of all <code>&lt;p></code> elements in the DOM.</li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName rel=external target=_blank>Document.getElementsByClassName</a> returns a list of elements with a specific name listed in its class attribute, i.e. <code>document.getElementsByClassName('banner')</code> will return a list containing the <code>&lt;div.banner></code> element.</li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById rel=external target=_blank>Document.getElementById</a> returns a single element with the specified id attribute.</li></ul><p>In addition to those methods, the Document object also supplies two methods that take a CSS selector. These are:</p><ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector rel=external target=_blank>Document.querySelector</a> which returns the first matching element in the DOM.</li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll rel=external target=_blank>Document.querySelectorAll</a> which returns a list of all matching elements.</li></ul><p>Let&rsquo;s try selecting the <code>&lt;h1></code> tag using the <code>querySelector</code> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=kd>var</span> <span class=nx>header</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;h1&#39;</span><span class=p>);</span></span></span></code></pre></div><p>Much easier than <code>document.body.firstElementChild.firstElementChild</code> isn&rsquo;t it?</p><h2 id=manipulating-dom-elements>Manipulating DOM Elements</h2><p>All HTML elements in the DOM also implement the <a href=https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement rel=external target=_blank>HTMLElement</a> interface, which also provides access to the element&rsquo;s attributes and styling. So when we retrieve an element from the DOM tree, we can modify these.</p><p>Let&rsquo;s tweak the color of the <code>&lt;h1></code> element we saved a reference to in the <code>header</code> variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=nx>header</span><span class=p>.</span><span class=nx>style</span><span class=p>.</span><span class=nx>color</span> <span class=o>=</span> <span class=s1>&#39;blue&#39;</span><span class=p>;</span></span></span></code></pre></div><p>This will turn the header blue:</p><p><a href=#R-image-c05b4ba6411ae6c05fd41627b0a7f96e class=lightbox-link><img alt="The blue header" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.4.5.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-c05b4ba6411ae6c05fd41627b0a7f96e><img alt="The blue header" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.4.5.png></a></p><p>All of the CSS properties can be manipulated through the <code>style</code> property.</p><p>In addition, we can access the element&rsquo;s <code>classList</code> property, which provides an <code>add()</code> and <code>remove()</code> methods that add/remove class names from the element. This way we can define a set of CSS properties for a specific class, and turn that class on and off for an element in the DOM tree, effectively applying all those properties at once.</p><h2 id=modifying-the-dom>Modifying the DOM</h2><p>We can create new elements with the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement rel=external target=_blank>Document.createElement</a> method. It takes the name of the new tag to create as a string, and an optional options map (a JavaScript object). Let&rsquo;s create a new <code>&lt;p></code> tag. In the console:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=kd>var</span> <span class=nx>p</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;p&#39;</span><span class=p>);</span></span></span></code></pre></div><p>Now let&rsquo;s give it some text:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&gt;</span> <span class=nx>p</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=s2>&#34;Tra-la-la&#34;</span><span class=p>;</span></span></span></code></pre></div><p>Up to this point, our new <code>&lt;p></code> tag isn&rsquo;t rendered, because it isn&rsquo;t part of the DOM tree. But we can use the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild rel=external target=_blank>Node.appendChild</a> method to add it to an existing node in the tree. Let&rsquo;s add it to the <code>&lt;div.banner></code> element. Type this command into the console:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;div.banner&#39;</span><span class=p>).</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>p</span><span class=p>);</span></span></span></code></pre></div><p>As soon as it is appended, it appears on the page:</p><p><a href=#R-image-90b7630a52a3885f58795e275cdb253d class=lightbox-link><img alt="The new p element" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.4.6.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-90b7630a52a3885f58795e275cdb253d><img alt="The new p element" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.4.6.png></a></p><p>Note too that the CSS rules already in place are automatically applied!</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>The popular <a href=https://jquery.com/ rel=external target=_blank>JQuery</a> library was created primarily as a tool to make DOM querying and manipulation easier at a time when browsers were not all adopting the w3c standards consistently. It provided a simple interface that worked identically in all commonly used browsers.</p><p>The JQuery function (commonly aliased to <code>$()</code>) operates much like the <code>querySelectorAll()</code>, taking a CSS selector as an argument and returning a collection of matching elements wrapped in a JQuery helper object. The helper object provided methods to access and alter the attributes, style, events, and content of the element, each returning the updated object allowing for functions to be &lsquo;chained&rsquo; into a single expression.</p><p>The above example, rewritten in JQuery, might be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;p&#39;</span><span class=p>).</span><span class=nx>text</span><span class=p>(</span><span class=s1>&#39;Tra-la-la&#39;</span><span class=p>).</span><span class=nx>appendTo</span><span class=p>(</span><span class=s1>&#39;div.banner&#39;</span><span class=p>);</span></span></span></code></pre></div><p>While modern browsers are much more consistent at supporting standardized JavaScript, JQuery remains a popular library and one you will likely encounter. Thus, while this text focuses on &lsquo;vanilla&rsquo; JavaScript, we&rsquo;ll also occasionally call out JQuery approaches in blocks like this one.</p></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=javascript-events>JavaScript Events</h1><p>It should be no surprise that JavaScript features events - after all, we&rsquo;ve already seen how the <a href=https://developer.mozilla.org/en-US/docs/Web/API/EventTarget rel=external target=_blank>EventTarget</a> interface allows us to attach event listeners to elements in the DOM tree. What might not be clear yet is how events are handled by JavaScript. JavaScript uses an <em>event loop</em> to process events. This is similar to Windows and other operating systems also handle events.</p><p>An event loop expressed in code looks something like:</p><div class=highlight><pre tabindex=0><code>function main
    initialize()
    while message != quit
        message := get_next_message()
        process_message(message)
    end while
end function</code></pre></div><p>It&rsquo;s basically an infinite loop that responds to messages, one message at a time. It might be more useful to see a visual representation:</p><p><a href=#R-image-86d3694ac20e193290a4cc6b2adc96ee class=lightbox-link><img alt="The JS Event Loop" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/1.6.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-86d3694ac20e193290a4cc6b2adc96ee><img alt="The JS Event Loop" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/1.6.1.png></a></p><p>Here we see not just the event loop, but also the <em>event queue</em>. This is a queue that holds events until the event loop is ready to process them. It works like the first-in-first-out queues you built in your data structures course (although it may also consider priorities of events).</p><p>On the far right are some common sources for JavaScript events - user input, the network, and timers. These are often managed by the operating system, and with modern multiple-processor computers can happen <em>concurrently</em>, i.e. <em>at the same time</em>. This is one reason the queue is so important - it allows JavaScript to process the events <em>one at a time</em>.</p><p>When the JavaScript VM has finished executing its current work, it pulls the next event from the event queue. This event is processed by the corresponding <em>event listener</em> function that either 1) you wrote, or 2) is the default action. If neither exists, the event is discarded.</p><h3 id=an-example>An Example</h3><p>Consider when the user clicks on a link on your page, let&rsquo;s say <code>&lt;a id="demo" href="https://google.com">Google it!&lt;/a></code>. This creates a &lsquo;click&rsquo; event for the <code>&lt;a></code> tag clicked on. Now let&rsquo;s assume you&rsquo;ve written an event handler and attached it to that anchor tag:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;demo&#39;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>e</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;You clicked the &#34;Google it!&#34; link.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>The anonymous function <code>function(e) {...}</code> attached to the <code>&lt;a></code>&rsquo;s &lsquo;click&rsquo; event is invoked, with the event details being passed as the parameter <code>e</code>. Anchor tags have a default behavior - they open the linked page. So the line <code>e.preventDefault();</code> informs JavaScript <em>not</em> to use this default behavior. Then we trigger an alert with the string <code>'You clicked the "Google it!" link.'</code>.</p><p>If we hadn&rsquo;t attached the event listener, then the page would have used the default response - loading a new page into the browser in the place of our current page.</p><p>If we clicked on an element that didn&rsquo;t have a default action (like a <code>&lt;p></code> element) and you haven&rsquo;t attached a listener the event is discarded and does nothing.</p><h3 id=concurrency-in-javascript>Concurrency in JavaScript</h3><p>An important takeaway from the discussion of the event loop is that the actual processing of JavaScript code is always <em>single-threaded</em>. This avoids many of the common challenges of multi-threaded code. You don&rsquo;t need to create semaphores, locks, and other multi-threading synchronization tools as your code will always be executing in a single thread.</p><p>However, JavaScript <em>does</em> retain many of the benefits of concurrency within its model. For example, when the DOM is loading and encounters an element referencing an external resource (i.e. a <code>video</code>, <code>img</code>, <code>link</code>, or <code>script</code> element), it triggers a request to retrieve that resource through the browser. The browser does so <em>while the JavaScript code continues executing</em>. When the resource is fully downloaded by the browser, it creates a <code>'load'</code> event with the details, and adds it to the JavaScript event queue. Multiple files are therefore downloaded <em>concurrently</em>, but our JavaScript handles the results one-by-one in a single-threaded manner.</p><p>Think of the JavaScript event loop as a busy manager that only works on one thing at a time. The manager might send several workers out to get information. When they return, they form a line in front of the manager&rsquo;s desk and wait patiently. Once the manager is finished with the task they have been working on, they take the report from the first worker in line, and starts doing what is needed to be done with the returned information. Once the manager finishes that, the next employee will report, and so on.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>Although the JavaScript execution model is single-threaded, there are ways of introducing multi-threaded programming in JavaScript - specifically, the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API rel=external target=_blank>Web Workers</a> in the browser and <a href=https://nodejs.org/api/worker_threads.html rel=external target=_blank>Worker Threads</a> in Node. These technologies essentially run additional JavaScript interpreters in parallel and enable communiation between them using events.</p></div></div><h2 id=common-events>Common Events</h2><p>There are many kinds of events in JavaScript; you can find a complete list in the <a href=https://developer.mozilla.org/en-US/docs/Web/Events rel=external target=_blank>MDN docs</a>. However some of the ones you will likely find yourself using are:</p><ul><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/load rel=external target=_blank>load</a> - Triggered when a resource (i.e. an image, video, stylesheet, script) has finished loading. You can also listen for the load event on the <code>document</code> itself; here it will be triggered after <em>all</em> the resources on the page are loaded.</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event rel=external target=_blank>change</a> The value of an <code>&lt;input></code>, <code>&lt;textarea></code>, or <code>&lt;select></code> has changed</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/focus rel=external target=_blank>focus</a> triggered when an input gains focus (is the currently selected input)</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/blur rel=external target=_blank>blur</a> triggered when an input loses focus</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/click rel=external target=_blank>click</a> The primary mouse button was clicked. On old browsers this might trigger for any button</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/contextmenu rel=external target=_blank>contextmenu</a> The right mouse button was clicked</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/mousedown rel=external target=_blank>mousedown</a> A mouse button was pressed</p></li><li><p><a href=https://developer.mozilla.org/en-US/docs/Web/Events/mouseup rel=external target=_blank>mouseup</a> A mouse button was released</p></li></ul><h2 id=timers>Timers</h2><p>Timers play a special role in JavaScript&rsquo;s concurrency model, and in many ways behave like events. For example, to cause the phrase &ldquo;Hello time!&rdquo; to be logged to the console in three seconds, you would write the code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>setTimeout</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Hello time!&#34;</span><span class=p>)},</span> <span class=mi>3000</span><span class=p>);</span></span></span></code></pre></div><p>You will notice that the <a href=https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout rel=external target=_blank>setTimeout()</a> method takes a function to execute at that future point in time, much like attaching an event handler. The second argument is the number of milliseconds in the future for this event to occur. The timer works like an event, when the time expires, a corresponding event is added to the event queue, to trigger the delayed function.</p><p>An important side-effect of this approach is that you only know the timer&rsquo;s result won&rsquo;t happen <em>before</em> the delay you specify, but if the JavaScript virtual machine is engaged in a long-running process, it may be longer before your timer event is triggered.</p><p>For events you need to do on a regular interval, use <a href=https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval rel=external target=_blank>setInterval()</a> instead. This will invoke the supplied function at each elapsing of the supplied interval. It also returns a unique id that can be supplied to <a href=https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval rel=external target=_blank>clearInterval()</a> to stop the timed event.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>You may find yourself reading code that uses a value of <code>0</code> milliseconds with <code>setTimeout()</code>, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>setTimeout</span><span class=p>(</span><span class=nx>doSomething</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span></span></span></code></pre></div><p>You might be wondering why. You might wonder if it is equivalent to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>doSomething</span><span class=p>();</span></span></span></code></pre></div><p>And while it might appear that way, the answer is <em>no</em>. Remember, <code>setTimeout()</code> creates an event in the event queue that executes after the specified delay. Thus, <code>doSomething()</code> will execute <em>immediately</em>, but <code>setTimeout(doSomething())</code> will continue to execute all code <em>after</em> the line until execution finishes, and <em>then</em> will invoke <code>doSomething()</code>.</p><p>Thus, JavaScript programmers often use this technique to trigger an action immediately after the current code finishes executing.</p></div></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=the-dom-and-external-resource-loading>The DOM and External Resource Loading</h1><p>One of the important aspects of working with HTML is understanding that an HTML page is <em>more</em> than just the HTML. It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document. These include elements like <code>&lt;link></code>, <code>&lt;script></code>, <code>&lt;video></code>, <code>&lt;img></code>, and <code>&lt;source></code> with <code>src</code> or <code>href</code> attributes set.</p><p>As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well. Modern browsers typically make these requests in parallel for faster loading times.</p><p>Once the HTML document has been completely parsed, the <code>window</code> triggers the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event rel=external target=_blank>DOMContentLoaded</a> event. This means the HTML document has been completely parsed and added to the DOM tree. However, the external resources <em>may not have all been loaded at this point</em>.</p><p>Once those resources are loaded, a separate <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event rel=external target=_blank>Load</a> event is triggered, also on the <code>window</code>.</p><p>Thus, if you have JavaScript that should only be invoked <em>after</em> the page has fully loaded, you can place it inside an event listener tied to the <code>load</code> event, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Add your code here ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span></span></span></code></pre></div><p>Or, if you want it invoked after the DOM is fully parsed, but external resources may still be loading:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;DOMContentLoaded&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Add your code here ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span></span></span></code></pre></div><p>The former - waiting for all resources to load - tends to be the most common. The reason is simple, if you are loading multiple JavaScript files, i.e. a couple of libraries and your own custom code, using the <code>'load'</code> event ensures they have all loaded before you start executing your logic.</p><p>Consider the popular <a href=https://jquery.com/ rel=external target=_blank>JQuery</a> library, which provides shorthand methods for querying and modifying the DOM. It provides a <code>JQuery()</code> function that is also aliased to the <code>$</code>. The JQuery code to show a popup element might be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#popup&#39;</span><span class=p>).</span><span class=nx>show</span><span class=p>();</span></span></span></code></pre></div><p>But if the JQuery library isn&rsquo;t loaded yet, the <code>$</code> is not defined, and this logic will crash the JavaScript interpreter. Any remaining JavaScript will be ignored, and your page won&rsquo;t work as expected. But re-writing that to trigger after all resources have loaded, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// This code only is executed once all resources have been loaded
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#popup&#39;</span><span class=p>).</span><span class=nx>show</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>Ensures the JQuery library is available before your code is run.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>JavaScript is an extremely flexible language that has evolved over time. One side effect of this evolution is that there are often multiple ways to express the same idea. For example, listening for the <code>window</code>&rsquo;s <code>'load'</code> event can be written many different ways:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Using the onload property
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>onload</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using onload property and lambda syntax 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>onload</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the addEventListener and lambda syntax
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the JQuery library 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>JQuery</span><span class=p>(</span><span class=kd>function</span><span class=p>(){...});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the JQuery library with lambda syntax 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>JQuery</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{...});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the JQuery library with $ alias
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>$</span><span class=p>(</span><span class=kd>function</span><span class=p>(){...});</span></span></span></code></pre></div><p>You are free to use whichever approach you like, but need to be able to interpret other programmers&rsquo; code when they use a different approach.</p></div></div><h2 id=loading-resources-_after_-the-dom-is-loaded>Loading Resources <em>after</em> the DOM is loaded</h2><p>There are really <em>two</em> ways to load resources into an HTML page from your JavaScript code. One is indirect, and the other direct. The indirect method simply involves creating DOM elements linked to an outside resource, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>image</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;img&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>image</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=s1>&#39;smile.png&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>img</span><span class=p>);</span></span></span></code></pre></div><p>In this case, when the new <code>&lt;img></code> element has its <code>src</code> attribute set, the image is requested by the browser. Attaching it to the DOM will result in the image being displayed once it loads.</p><p>If we want to know when the image is loaded, we can use the <code>load</code> event:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>image</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;img&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>image</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;loaded image&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>image</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=s1>&#39;smile.png&#39;</span><span class=p>;</span></span></span></code></pre></div><p>Notice too that we add the event listener <em>before</em> we set the <code>src</code> attribute. If we did it the other way around, the resource may already be loaded before the listener takes effect - and it would never be invoked!</p><p>However, this approach can be cumbersome, and limits us to what resources can be bound to HTML elements. For more flexibility, we need to make the request directly, using AJAX. We&rsquo;ll take a look at doing so after we cover HTTP in more depth.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=summary>Summary</h1><p>In this chapter, we reviewed the Document Object Model (the DOM), the tree-like structure of HTML elements built by the browser as it parses an HTML document. We discussed how CSS rules are applied to nodes in this tree to determine how the final webpage will be rendered, and how JavaScript can be used to manipulate and transform the DOM (and the resulting webpage appearance).</p><p>We also discussed how JavaScript events work, and how this event-driven approach is the basis for implementing concurrency within the language. We&rsquo;ll see this more as we delve into Node.js, which utilizes the same event-based concurrency model, in future chapters.</p><p>Finally, we discussed how supplemental files (images, videos, CSS files, JavaScript files) are loaded by the browser concurrently. We saw how this can affect the functioning of JavaScript that depends on certain parts of the page already having been loaded, and saw how we can use the <code>load</code> event to delay running scripts until these extra files have completed loading.</p><footer class=footline></footer></article></section></div></main><div class=git-footer><p class=theme-version-footer>6.0.0</p><p>Last modified by:
<i class='fas fa-user'></i> Russell Feldhausen
<i class='fas fa-calendar'></i> <a href=https://github.com/ksu-cs-textbooks/cis526/commit/41163dc548a00400a9f1d4962b4227b9a8ee4d20>Aug 10, 2023</a></p></div></div><script src=/cis526/js/clipboard.min.js?1741019921 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1741019921 defer></script><script src=/cis526/js/theme.js?1741019921 defer></script></body></html>