




	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>The Document Object Model :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/index.html" rel="canonical" type="text/html" title="The Document Object Model :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/index.xml" rel="alternate" type="application/rss+xml" title="The Document Object Model :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/tele.html" rel="alternate" type="text/html" title="The Document Object Model :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/embed.html" rel="alternate" type="text/html" title="The Document Object Model :: CIS 526 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705960759" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705960759" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1705960759" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705960759" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705960759" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1705960759" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705960759" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705960759" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1705960759" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-auto.css?1705960759" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1705960759" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1705960759" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/format-print.css?1705960759" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1705960759" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/url.js?1705960759"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1705960759"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis526/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1705960759" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="top-tele-link">
            <a class="print-link" title='Teleprompter View' href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/tele.html">
              <i class="fas fa-tv fa-fw"></i>
            </a>
          </div>
          <div id="top-embed-link">
            <a class="print-link" title='Embeddable Version' href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/embed.html">
              <i class="fas fa-expand-arrows-alt fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis526/index.html"><span itemprop="name">Web Application Development</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">The Document Object Model</span><meta itemprop="position" content="2"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>


<div class="article-subheading">Chapter 1</div>
<h1 id="the-document-object-model">The Document Object Model</h1>

<p>HTML, CSS, and JavaScript in the Browser</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of The Document Object Model</h1>
    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="introduction">Introduction</h1>

<p>At this point, you should be familiar with the big three technologies of the world-wide-web <em>HTML</em>, <em>CSS</em>, and <em>JavaScript</em> (Feel free to visit the appendices for a quick review).  These three technologies work together to create the web pages you interact with every day.  Each has a role to play in defining the final appearance of a web page:</p>
<ul>
<li>Hyper-Text Markup Language (HTML) provides the structure and content</li>
<li>Cascading Style Sheets (CSS) determine how that content should appear visually</li>
<li>JavaScript provides interactivity, allowing both the structure and appearance of the page to change dynamically</li>
</ul>
<p>We often refer to this division of responsibility as the <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" target="_blank">separation of concerns</a>
.  By placing all responsibility for appearance on a CSS file, we can refresh the look of a web application simply by replacing the old CSS file with a new one.  Similarly, we can create a new page in our site that looks and feels like the rest of the site by creating a new HTML page that links to the site&rsquo;s existing CSS files.</p>
<p>While you have written HTML, CSS, and JavaScript files in your prior learning experiences, you might not have thought about just how these files are processed, and those styling rules applied.  In this chapter we will explore this topic in detail, while introducing some more advanced uses for each.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="document-object-model">Document Object Model</h1>

<p>The Document Object Model (or DOM) is a data structure representing the content of a web page, created by the browser as it parses the website. The browser then makes this data structure accessible to scripts running on the page.  The DOM is essentially a tree composed of objects representing the HTML elements and text on the page.</p>
<p>Consider this HTML:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;Hello DOM!&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;site.css&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;banner&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">h1</span>&gt;Hello DOM!&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>                The Document Object Model (DOM) is a programming API for HTML and XML documents. It defines the logical structure of documents and the way a document is accessed and manipulated. In the DOM specification, the term &#34;document&#34; is used in the broad sense - increasingly, XML is being used as a way of representing many different kinds of information that may be stored in diverse systems, and much of this would traditionally be seen as data rather than as documents. Nevertheless, XML presents this data as documents, and the DOM may be used to manage this data.
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://www.w3.org/TR/WD-DOM/introduction.html&#34;</span>&gt;From w3.org&#39;s What is the Document Object Model?&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div><p>When it is parsed by the browser, it is transformed into this tree:</p>
<p>
<a href="#image-9899b1581ca179324a88240f0f600bfe" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.2.1.png" alt="The DOM for the supplied HTML" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9899b1581ca179324a88240f0f600bfe">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.2.1.png" alt="The DOM for the supplied HTML" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="the-dom-tree-and-developer-tools">The DOM Tree and Developer Tools</h3>
<p>Most browsers also expose the DOM tree through their developer tools.  Try opening the example page in Chrome or your favorite browser using <a href="https://ksu-cs-textbooks.github.io/cis526/examples/1.2.1/index.html" target='_blank'>this link</a>.</p>
<p>Now open the developer tools for your browser:</p>
<ul>
<li><strong>Chrome</strong> <code>CTRL + SHIFT + i</code> or right-click and select &lsquo;Inspect&rsquo; from the context menu.</li>
<li><strong>Edge</strong> <code>CTRL + SHIFT + i</code> or right-click and select &lsquo;Inspect element&rsquo; from the context menu.</li>
<li><strong>Firefox</strong> <code>CTRL + SHIFT + i</code> or right-click and select &lsquo;Inspect Element&rsquo; from the context menu.</li>
<li><strong>Safari</strong> Developer tools must be enabled.  See the <a href="https://support.apple.com/guide/safari/use-the-developer-tools-in-the-develop-menu-sfri20948/mac" target="_blank">Safari User Guide</a>
</li>
</ul>
<p>You should see a new panel open in your browser, and under its &rsquo;elements&rsquo; tab the DOM tree is displayed:</p>
<p>
<a href="#image-23f54d45a63f6acf65ea7d4e831d0656" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.2.2.png" alt="The Elements tab of the Chrome Developer Tools" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-23f54d45a63f6acf65ea7d4e831d0656">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.2.2.png" alt="The Elements tab of the Chrome Developer Tools" class="lightbox-image" loading="lazy">
</a></p>
<p>Collapsed nodes can be expanded by clicking on the arrow next to them. Try moving your mouse around the nodes in the DOM tree, and you&rsquo;ll see the corresponding element highlighted in the page.  You can also <em>dynamically edit</em> the DOM tree from the elements tab by right-clicking on a node.</p>
<p>Try right-clicking on the <code>&lt;h1&gt;</code> node and selecting &rsquo;edit text&rsquo;.  Change the text to &ldquo;Hello Browser DOM&rdquo;.  See how it changes the page?</p>
<p>The page is rendered from the DOM, so editing the DOM changes how the page appears.  However, the initial structure of the DOM is derived from the loaded HTML.  This means if we refresh the page, any changes we made to the DOM using the developer tools will be lost, and the page will return to its original state.  Give it a try - hit the refresh button.</p>

  
  
<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>For convenience, this textbook will use the <a href="https://www.google.com/chrome" target="_blank">Chrome browser</a>
 for all developer tool reference images and discussions, but the other browsers offer much of the same functionality.  If you prefer to use a different browser&rsquo;s web tools, look up the details in that browser&rsquo;s documentation.</p>
</div>
</div>
<p>You&rsquo;ve now seen how the browser creates the DOM tree by parsing the HTML document and that DOM tree is used to render the page.  Next, we&rsquo;ll look at how styles interact with the DOM to modify how it is displayed.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="css-and-the-dom">CSS and the DOM</h1>

<p>Cascading style sheets (CSS) also interact with the DOM.  Consider this CSS code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.<span style="color:#a6e22e">banner</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">4</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">gold</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">border-radius</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#66d9ef">goldenrod</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#66d9ef">brown</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">banner</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">h1</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-style</span>: <span style="color:#66d9ef">italic</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">banner</span> <span style="color:#f92672">p</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">text-decoration</span>: <span style="color:#66d9ef">line-through</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">1.2</span><span style="color:#66d9ef">rem</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>When it is placed in the <em>site.css</em> file referenced by the HTML we discussed in the last section, the rules it defines are evaluated in terms of the DOM tree.  The result is the page now looks like this:</p>
<p>
<a href="#image-0ec938a49f706aaa0727b4aa1dfda549" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.1.png" alt="The styled example page" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-0ec938a49f706aaa0727b4aa1dfda549">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.1.png" alt="The styled example page" class="lightbox-image" loading="lazy">
</a></p>
<p>Now let&rsquo;s talk about how this CSS code and the DOM interact.</p>
<p>Consider the selector <code>.banner</code>.  It looks for any element whose class attribute includes the string <code>&quot;banner&quot;</code>.  Hence, it matches the <code>&lt;div&gt;</code> element, adding a color, background color, border, and padding.  This visualization of the DOM tree indicates the selected node in yellow:</p>
<p>
<a href="#image-9276d53d26b2e098f526511026c3c1a6" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.2.png" alt="DOM tree visualization with marked .banner node" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9276d53d26b2e098f526511026c3c1a6">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.2.png" alt="DOM tree visualization with marked .banner node" class="lightbox-image" loading="lazy">
</a></p>
<p>Notice how the text in both the <code>&lt;h1&gt;</code> element and the <code>&lt;p&gt;</code> element are a reddish color?  That color is the one defined in the <code>.banner</code> rule: <code>color: #754907</code>.  The rule applies not only to the selected node, but to <em>all its descendants in the DOM tree</em>.  This is the &lsquo;cascading&rsquo; part of cascading style sheets - the rules flow down the DOM tree until they are overridden by more specific css rules in descendant nodes.</p>
<p>The second way CSS interacts with the DOM tree is through the CSS selectors themselves.</p>
<p>For example, the selector <code>.banner &gt; h1</code> uses the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator" target="_blank">child combinator</a>
 - the <code>&gt;</code> symbol between <code>.banner</code> and <code>h1</code>.  This indicates that the rule will be applied to any <code>&lt;h1&gt;</code> nodes that are <em>direct children</em> of the node with the class of <code>&quot;banner&quot;</code>.  As we can see from the DOM tree, the sole <code>&lt;h1&gt;</code> tag is a child of the <code>&lt;div.banner&gt;</code> node, so this rule is applied to it:</p>
<p>
<a href="#image-7f1dde831f406388bfc8b902292abca8" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.3.png" alt="DOM tree visualization with marked .banner &amp;gt; h1 node" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-7f1dde831f406388bfc8b902292abca8">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.3.png" alt="DOM tree visualization with marked .banner &amp;gt; h1 node" class="lightbox-image" loading="lazy">
</a></p>
<p>Similarly, the <code>.banner p</code> tag uses the <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors/Combinators" target="_blank">descendant combinator</a>
 - the space between the <code>.banner</code> and <code>p</code>.  This indicates that the rule will be applied to any <code>&lt;p&gt;</code> nodes that are <em>descended from</em> the node with the class of <code>&quot;banner&quot;</code>.  This will apply no matter how far down the tree those nodes appear.  Thus, if we added more <code>&lt;p&gt;</code> elements inside of a <code>&lt;div&gt;</code> that was a child of the <code>&lt;div.banner&gt;</code> node, it would apply to them as well.</p>
<p>
<a href="#image-d732e999731758130f203336bd13f0dc" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.4.png" alt="DOM tree visualization with marked .banner p nodes" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d732e999731758130f203336bd13f0dc">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.4.png" alt="DOM tree visualization with marked .banner p nodes" class="lightbox-image" loading="lazy">
</a></p>
<p>You can see the example with the styling applied by following <a href='https://ksu-cs-textbooks.github.io/cis526/examples/1.3.1/index.html' target='_blank'>this link</a>.  Try adding the div and two paragraphs with the developer tools.  See how the styles are automatically applied to the new nodes in the DOM tree?</p>
<h3 id="css-and-developer-tools">CSS and Developer Tools</h3>
<p>Speaking of developer tools, there is another handy tab that deals with CSS, the &lsquo;Styles&rsquo; tab.  It displays <em>all</em> the css rules applied to a specific node.  Select one of your new <code>&lt;p&gt;</code> elements.  Notice how the styles tab shows the css rule <code>.banner p</code> that we&rsquo;ve been discussing?  Moreover, it tells you which CSS file and which line in that file the rule is found on.</p>
<p>
<a href="#image-bf2c81fad2f66159acd90768fc8f496e" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.5.png" alt="Styles tab in developer tools" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-bf2c81fad2f66159acd90768fc8f496e">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.5.png" alt="Styles tab in developer tools" class="lightbox-image" loading="lazy">
</a></p>
<p>If you scroll down, it also shows you the rules inherited (cascaded) from the <code>.banner</code> rule:</p>
<p>
<a href="#image-1d242b4778f615daab066f54be5834d0" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.6.png" alt="Inherited rules" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1d242b4778f615daab066f54be5834d0">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.6.png" alt="Inherited rules" class="lightbox-image" loading="lazy">
</a></p>
<p>If you scroll clear to the bottom, you will also see a visualization of the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model" target="_blank">box model</a>
 as it is applied to this element.</p>
<p>
<a href="#image-d0d9a7b49697d0e93cc61545ada930ed" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.7.png" alt="Custom style in developer tools" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d0d9a7b49697d0e93cc61545ada930ed">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.7.png" alt="Custom style in developer tools" class="lightbox-image" loading="lazy">
</a></p>
<p>This can be very handy for debugging margin/padding/border issues.</p>
<p>Now scroll back up to the top of the styles tab.  Notice the <code>element.style {}</code> rule?  This displays inline CSS on the element, and we can also add our own inline CSS directly from the developer tools.  Add the property key/value pair <code>text-decoration: none</code>.  Notice what happens to the paragraph&rsquo;s text?  Also, notice how the <em>now overridden</em> rule has been struck through in the rule below.</p>
<p>
<a href="#image-bad02393940afc19835641ee708e4d18" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.8.png" alt="Custom style in developer tools" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-bad02393940afc19835641ee708e4d18">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.3.8.png" alt="Custom style in developer tools" class="lightbox-image" loading="lazy">
</a></p>
<p>This can be very handy for quickly trying out different style combinations without needing to add them to the CSS file. Much like changes to the DOM, these are not saved - refresh the page and they are gone.</p>
<p>Finally, notice that when the mouse hovers over a CSS property key/value pair, a checkbox appears next to it?  If you uncheck the box, the property ceases to be applied.  This can also be very handy for debugging CSS problems.</p>
<p>Now that we&rsquo;ve seen how CSS interacts with the DOM tree, it&rsquo;s time to turn our attention to the third web technology - JavaScript.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="javascript-and-the-dom">JavaScript and the DOM</h1>

<p>The DOM tree is also accessible from JavaScript running in the page.  It is accessed through the global <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window" target="_blank">window</a>
 object, i.e. <code>window.document</code> or <code>document</code>.</p>
<p>Let&rsquo;s use the &lsquo;Console&rsquo; tab of the developer tools to access this object.  Open the previous example page again from <a href='https://ksu-cs-textbooks.github.io/cis526/examples/1.3.1/index.html' target='_blank'>this link</a>.  Click the console tab to open the expanded console, or use the console area in the bottom panel of the elements tab:</p>
<p>
<a href="#image-e0778457f9ae668cd532675b987b11f3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.1.png" alt="The console tab in the developer tools" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-e0778457f9ae668cd532675b987b11f3">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.1.png" alt="The console tab in the developer tools" class="lightbox-image" loading="lazy">
</a></p>
<p>With the console open, type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> document</span></span></code></pre></div>
  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>When instructed to type something into the console, I will use the <code>&gt;</code> symbol to represent the cursor prompt.  You do <em>not</em> need to type it.</p>
</div>
</div>
<p>Once you hit the enter key, the console will report the value of the expression <code>document</code>, which exposes the document object.  You can click the arrow next to the <code>#document</code> to expose its properties:</p>
<p>
<a href="#image-010257336513be9da595b2fe9faf30af" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.2.png" alt="The reported document object" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-010257336513be9da595b2fe9faf30af">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.2.png" alt="The reported document object" class="lightbox-image" loading="lazy">
</a></p>
<p>The document is an instance of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/document" target="_blank">Document</a>
 class.  It is the entry point (and the root) of the DOM tree data structure.  It also implements the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node" target="_blank">Node</a>
 and <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" target="_blank">EventTarget</a>
 interfaces, which we&rsquo;ll discuss next.</p>
<h2 id="the-node-interface">The Node Interface</h2>
<p>All nodes in the DOM tree implement the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node" target="_blank">Node</a>
 interface.  This interface provides methods for traversing and manipulating the DOM tree.  For example, each node has a property <code>parentElement</code> that references is parent in the DOM tree, a property <code>childNodes</code> that returns a <a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList" target="_blank">NodeList</a>
 of all the Node&rsquo;s children, as well as properties referencing the <code>firstChild</code>, <code>lastChild</code>, <code>previousSibling</code>, and <code>nextSibling</code>.</p>
<p>Let&rsquo;s try walking the tree manually.  In the console, type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">firstElementChild</span>.<span style="color:#a6e22e">firstElementChild</span></span></span></code></pre></div><p>The <code>body</code> property of the document directly references the <code>&lt;body&gt;</code> element of the webpage, which also implements the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node" target="_blank">Node</a>
 interface.  The <code>firstElementChild</code> references the first HTML element that is a child of the node, so in using that twice, we are drilling down to the <code>&lt;h1&gt;</code> element.</p>
<p>
<a href="#image-7fc09aa1f0044fb1727c715ae2ff73db" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.3.png" alt="The reported h1 object" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-7fc09aa1f0044fb1727c715ae2ff73db">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.3.png" alt="The reported h1 object" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="the-eventtarget-interface">The EventTarget Interface</h2>
<p>Each node in the DOM tree also implements the <code>EventTarget</code> interface.  This allows arbitrary events to be attached to any element on the page.  For example, we can add a click event to the <code>&lt;h1&gt;</code> element.  In the console, type:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">firstElementChild</span>.<span style="color:#a6e22e">firstElementChild</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">target</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; clicked!&#39;</span>);
</span></span><span style="display:flex;"><span>});</span></span></code></pre></div><p>The first argument to <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" target="_blank">EventTarget.addEventListener</a>
 is the event to listen for, and the second is a function to execute when the event happens.  Here we&rsquo;ll just log the event to the console.</p>
<p>Now try clicking on the <em>Hello DOM!</em> <code>&lt;h1&gt;</code> element.  You should see the event being logged:</p>
<p>
<a href="#image-1a8bde76833fdc36dd70ae7d51a27d6a" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.4.png" alt="The logged event" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-1a8bde76833fdc36dd70ae7d51a27d6a">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.4.png" alt="The logged event" class="lightbox-image" loading="lazy">
</a></p>
<p>We can also remove event listeners with <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener" target="_blank">EventTarget.removeEventListener</a>
 and trigger them programmatically with <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent" target="_blank">EventTarget.dispatchEvent</a>
.</p>
<h2 id="querying-the-dom">Querying the DOM</h2>
<p>While we can use the properties of a node to walk the DOM tree manually, this can result in some very ugly code.  Instead, the <a href="https://developer.mozilla.org/en-US/docs/Web/API/document" target="_blank">Document</a>
 object provides a number of methods that allow you to search the DOM tree for a specific value.  For example:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByTagName" target="_blank">Document.getElementsByTagName</a>
 returns a list of elements with a specific tag name, i.e. <code>document.getElementsByTagName('p')</code> will return a list of all <code>&lt;p&gt;</code> elements in the DOM.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName" target="_blank">Document.getElementsByClassName</a>
 returns a list of elements with a specific name listed in its class attribute, i.e. <code>document.getElementsByClassName('banner')</code> will return a list containing the <code>&lt;div.banner&gt;</code> element.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById" target="_blank">Document.getElementById</a>
 returns a single element with the specified id attribute.</li>
</ul>
<p>In addition to those methods, the Document object also supplies two methods that take a CSS selector.  These are:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector" target="_blank">Document.querySelector</a>
 which returns the first matching element in the DOM.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll" target="_blank">Document.querySelectorAll</a>
 which returns a list of all matching elements.</li>
</ul>
<p>Let&rsquo;s try selecting the <code>&lt;h1&gt;</code> tag using the <code>querySelector</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">header</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;h1&#39;</span>);</span></span></code></pre></div><p>Much easier than <code>document.body.firstElementChild.firstElementChild</code> isn&rsquo;t it?</p>
<h2 id="manipulating-dom-elements">Manipulating DOM Elements</h2>
<p>All HTML elements in the DOM also implement the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement" target="_blank">HTMLElement</a>
 interface, which also provides access to the element&rsquo;s attributes and styling.  So when we retrieve an element from the DOM tree, we can modify these.</p>
<p>Let&rsquo;s tweak the color of the <code>&lt;h1&gt;</code> element we saved a reference to in the <code>header</code> variable:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">header</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">color</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;blue&#39;</span>;</span></span></code></pre></div><p>This will turn the header blue:</p>
<p>
<a href="#image-f8af45955fb35374413c028ca6b24e76" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.5.png" alt="The blue header" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f8af45955fb35374413c028ca6b24e76">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.5.png" alt="The blue header" class="lightbox-image" loading="lazy">
</a></p>
<p>All of the CSS properties can be manipulated through the <code>style</code> property.</p>
<p>In addition, we can access the element&rsquo;s <code>classList</code> property, which provides an <code>add()</code> and <code>remove()</code> methods that add/remove class names from the element.  This way we can define a set of CSS properties for a specific class, and turn that class on and off for an element in the DOM tree, effectively applying all those properties at once.</p>
<h2 id="modifying-the-dom">Modifying the DOM</h2>
<p>We can create new elements with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement" target="_blank">Document.createElement</a>
 method.  It takes the name of the new tag to create as a string, and an optional options map (a JavaScript object).  Let&rsquo;s create a new <code>&lt;p&gt;</code> tag.  In the console:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#39;p&#39;</span>);</span></span></code></pre></div><p>Now let&rsquo;s give it some text:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">textContent</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Tra-la-la&#34;</span>;</span></span></code></pre></div><p>Up to this point, our new <code>&lt;p&gt;</code> tag isn&rsquo;t rendered, because it isn&rsquo;t part of the DOM tree.  But we can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild" target="_blank">Node.appendChild</a>
 method to add it to an existing node in the tree.  Let&rsquo;s add it to the <code>&lt;div.banner&gt;</code> element.  Type this command into the console:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;div.banner&#39;</span>).<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">p</span>);</span></span></code></pre></div><p>As soon as it is appended, it appears on the page:</p>
<p>
<a href="#image-82da53cf3a79e109abe5c316133dd460" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.6.png" alt="The new p element" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-82da53cf3a79e109abe5c316133dd460">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.4.6.png" alt="The new p element" class="lightbox-image" loading="lazy">
</a></p>
<p>Note too that the CSS rules already in place are automatically applied!</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>The popular <a href="https://jquery.com/" target="_blank">JQuery</a>
 library was created primarily as a tool to make DOM querying and manipulation easier at a time when browsers were not all adopting the w3c standards consistently.  It provided a simple interface that worked identically in all commonly used browsers.</p>
<p>The JQuery function (commonly aliased to <code>$()</code>) operates much like the <code>querySelectorAll()</code>, taking a CSS selector as an argument and returning a collection of matching elements wrapped in a JQuery helper object.  The helper object provided methods to access and alter the attributes, style, events, and content of the element, each returning the updated object allowing for functions to be &lsquo;chained&rsquo; into a single expression.</p>
<p>The above example, rewritten in JQuery, might be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;p&#39;</span>).<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#39;Tra-la-la&#39;</span>).<span style="color:#a6e22e">appendTo</span>(<span style="color:#e6db74">&#39;div.banner&#39;</span>);</span></span></code></pre></div><p>While modern browsers are much more consistent at supporting standardized JavaScript, JQuery remains a popular library and one you will likely encounter.  Thus, while this text focuses on &lsquo;vanilla&rsquo; JavaScript, we&rsquo;ll also occasionally call out JQuery approaches in blocks like this one.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="javascript-events">JavaScript Events</h1>

<p>It should be no surprise that JavaScript features events - after all, we&rsquo;ve already seen how the <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" target="_blank">EventTarget</a>
 interface allows us to attach event listeners to elements in the DOM tree.  What might not be clear yet is how events are handled by JavaScript.  JavaScript uses an <em>event loop</em> to process events.  This is similar to Windows and other operating systems also handle events.</p>
<p>An event loop expressed in code looks something like:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code>function main
    initialize()
    while message != quit
        message := get_next_message()
        process_message(message)
    end while
end function</code></pre></div><p>It&rsquo;s basically an infinite loop that responds to messages, one message at a time.  It might be more useful to see a visual representation:</p>
<p>
<a href="#image-d4a0340dd06374d80564e3b34e388f30" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.6.1.png" alt="The JS Event Loop" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-d4a0340dd06374d80564e3b34e388f30">
<img src="https://ksu-cs-textbooks.github.io/cis526/images/1.6.1.png" alt="The JS Event Loop" class="lightbox-image" loading="lazy">
</a></p>
<p>Here we see not just the event loop, but also the <em>event queue</em>.  This is a queue that holds events until the event loop is ready to process them.  It works like the first-in-first-out queues you built in your data structures course (although it may also consider priorities of events).</p>
<p>On the far right are some common sources for JavaScript events - user input, the network, and timers.  These are often managed by the operating system, and with modern multiple-processor computers can happen <em>concurrently</em>, i.e. <em>at the same time</em>.  This is one reason the queue is so important - it allows JavaScript to process the events <em>one at a time</em>.</p>
<p>When the JavaScript VM has finished executing its current work, it pulls the next event from the event queue.  This event is processed by the corresponding <em>event listener</em> function that either 1) you wrote, or 2) is the default action.  If neither exists, the event is discarded.</p>
<h3 id="an-example">An Example</h3>
<p>Consider when the user clicks on a link on your page, let&rsquo;s say <code>&lt;a id=&quot;demo&quot; href=&quot;https://google.com&quot;&gt;Google it!&lt;/a&gt;</code>.  This creates a &lsquo;click&rsquo; event for the <code>&lt;a&gt;</code> tag clicked on.  Now let&rsquo;s assume you&rsquo;ve written an event handler and attached it to that anchor tag:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;demo&#39;</span>).<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;You clicked the &#34;Google it!&#34; link.&#39;</span>);
</span></span><span style="display:flex;"><span>});</span></span></code></pre></div><p>The anonymous function <code>function(e) {...}</code> attached to the <code>&lt;a&gt;</code>&rsquo;s &lsquo;click&rsquo; event is invoked, with the event details being passed as the parameter <code>e</code>.  Anchor tags have a default behavior - they open the linked page.  So the line <code>e.preventDefault();</code> informs JavaScript <em>not</em> to use this default behavior.  Then we trigger an alert with the string <code>'You clicked the &quot;Google it!&quot; link.'</code>.</p>
<p>If we hadn&rsquo;t attached the event listener, then the page would have used the default response - loading a new page into the browser in the place of our current page.</p>
<p>If we clicked on an element that didn&rsquo;t have a default action (like a <code>&lt;p&gt;</code> element) and you haven&rsquo;t attached a listener the event is discarded and does nothing.</p>
<h3 id="concurrency-in-javascript">Concurrency in JavaScript</h3>
<p>An important takeaway from the discussion of the event loop is that the actual processing of JavaScript code is always <em>single-threaded</em>.  This avoids many of the common challenges of multi-threaded code.  You don&rsquo;t need to create semaphores, locks, and other multi-threading synchronization tools as your code will always be executing in a single thread.</p>
<p>However, JavaScript <em>does</em> retain many of the benefits of concurrency within its model.  For example, when the DOM is loading and encounters an element referencing an external resource (i.e. a <code>video</code>, <code>img</code>, <code>link</code>, or <code>script</code> element), it triggers a request to retrieve that resource through the browser.  The browser does so <em>while the JavaScript code continues executing</em>.  When the resource is fully downloaded by the browser, it creates a <code>'load'</code> event with the details, and adds it to the JavaScript event queue.  Multiple files are therefore downloaded <em>concurrently</em>, but our JavaScript handles the results one-by-one in a single-threaded manner.</p>
<p>Think of the JavaScript event loop as a busy manager that only works on one thing at a time.  The manager might send several workers out to get information.  When they return, they form a line in front of the manager&rsquo;s desk and wait patiently.  Once the manager is finished with the task they have been working on, they take the report from the first worker in line, and starts doing what is needed to be done with the returned information.  Once the manager finishes that, the next employee will report, and so on.</p>
<h2 id="common-events">Common Events</h2>
<p>There are many kinds of events in JavaScript; you can find a complete list in the <a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank">MDN docs</a>
.  However some of the ones you will likely find yourself using are:</p>
<ul>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/load" target="_blank">load</a>
 - Triggered when a resource (i.e. an image, video, stylesheet, script) has finished loading.  You can also listen for the load event on the <code>document</code> itself; here it will be triggered after <em>all</em> the resources on the page are loaded.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event" target="_blank">change</a>
 The value of an <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, or <code>&lt;select&gt;</code> has changed</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/focus" target="_blank">focus</a>
 triggered when an input gains focus (is the currently selected input)</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/blur" target="_blank">blur</a>
 triggered when an input loses focus</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/click" target="_blank">click</a>
 The primary mouse button was clicked.  On old browsers this might trigger for any button</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/contextmenu" target="_blank">contextmenu</a>
 The right mouse button was clicked</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/mousedown" target="_blank">mousedown</a>
 A mouse button was pressed</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Events/mouseup" target="_blank">mouseup</a>
 A mouse button was released</p>
</li>
</ul>
<h2 id="timers">Timers</h2>
<p>Timers play a special role in JavaScript&rsquo;s concurrency model, and in many ways behave like events.  For example, to cause the phrase &ldquo;Hello time!&rdquo; to be logged to the console in three seconds, you would write the code:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() { <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Hello time!&#34;</span>)}, <span style="color:#ae81ff">3000</span>);</span></span></code></pre></div><p>You will notice that the <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" target="_blank">setTimeout()</a>
 method takes a function to execute at that future point in time, much like attaching an event handler.  The second argument is the number of milliseconds in the future for this event to occur.  The timer works like an event, when the time expires, a corresponding event is added to the event queue, to trigger the delayed function.</p>
<p>An important side-effect of this approach is that you only know the timer&rsquo;s result won&rsquo;t happen <em>before</em> the delay you specify, but if the JavaScript virtual machine is engaged in a long-running process, it may be longer before your timer event is triggered.</p>
<p>For events you need to do on a regular interval, use <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" target="_blank">setInterval()</a>
 instead.  This will invoke the supplied function at each elapsing of the supplied interval.  It also returns a unique id that can be supplied to <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval" target="_blank">clearInterval()</a>
 to stop the timed event.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You may find yourself reading code that uses a value of <code>0</code> milliseconds with <code>setTimeout()</code>, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#a6e22e">doSomething</span>, <span style="color:#ae81ff">0</span>);</span></span></code></pre></div><p>You might be wondering why.  You might wonder if it is equivalent to:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">doSomething</span>();</span></span></code></pre></div><p>And while it might appear that way, the answer is <em>no</em>.  Remember, <code>setTimeout()</code> creates an event in the event queue that executes after the specified delay.  Thus, <code>doSomething()</code> will execute <em>immediately</em>, but <code>setTimeout(doSomething())</code> will continue to execute all code <em>after</em> the line until execution finishes, and <em>then</em> will invoke <code>doSomething()</code>.</p>
<p>Thus, JavaScript programmers often use this technique to trigger an action immediately after the current code finishes executing.</p>
</div>
</div>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="the-dom-and-external-resource-loading">The DOM and External Resource Loading</h1>

<p>One of the important aspects of working with HTML is understanding that an HTML page is <em>more</em> than just the HTML.  It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document.  These include elements like <code>&lt;link&gt;</code>, <code>&lt;script&gt;</code>, <code>&lt;video&gt;</code>, <code>&lt;img&gt;</code>, and <code>&lt;source&gt;</code> with <code>src</code> or <code>href</code> attributes set.</p>
<p>As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well.  Modern browsers typically make these requests in parallel for faster loading times.</p>
<p>Once the HTML document has been completely parsed, the <code>window</code> triggers the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event" target="_blank">DOMContentLoaded</a>
 event.  This means the HTML document has been completely parsed and added to the DOM tree.  However, the external resources <em>may not have all been loaded at this point</em>.</p>
<p>Once those resources are loaded, a separate <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event" target="_blank">Load</a>
 event is triggered, also on the <code>window</code>.</p>
<p>Thus, if you have JavaScript that should only be invoked <em>after</em> the page has fully loaded, you can place it inside an event listener tied to the <code>load</code> event, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;load&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Add your code here ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});</span></span></code></pre></div><p>Or, if you want it invoked after the DOM is fully parsed, but external resources may still be loading:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;DOMContentLoaded&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: Add your code here ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});</span></span></code></pre></div><p>The former - waiting for all resources to load - tends to be the most common. The reason is simple, if you are loading multiple JavaScript files, i.e. a couple of libraries and your own custom code, using the <code>'load'</code> event ensures they have all loaded before you start executing your logic.</p>
<p>Consider the popular <a href="https://jquery.com/" target="_blank">JQuery</a>
 library, which provides shorthand methods for querying and modifying the DOM.  It provides a <code>JQuery()</code> function that is also aliased to the <code>$</code>.  The JQuery code to show a popup element might be:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#popup&#39;</span>).<span style="color:#a6e22e">show</span>();</span></span></code></pre></div><p>But if the JQuery library isn&rsquo;t loaded yet, the <code>$</code> is not defined, and this logic will crash the JavaScript interpreter.  Any remaining JavaScript will be ignored, and your page won&rsquo;t work as expected.  But re-writing that to trigger after all resources have loaded, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;load&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This code only is executed once all resources have been loaded
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#popup&#39;</span>).<span style="color:#a6e22e">show</span>();
</span></span><span style="display:flex;"><span>});</span></span></code></pre></div><p>Ensures the JQuery library is available before your code is run.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>JavaScript is an extremely flexible language that has evolved over time.  One side effect of this evolution is that there are often multiple ways to express the same idea.  For example, listening for the <code>window</code>&rsquo;s <code>'load'</code> event can be written many different ways:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Using the onload property
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>window.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {...}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Using onload property and lambda syntax 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>window.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">event</span>) =&gt; {...}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Using the addEventListener and lambda syntax
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>window.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;load&#39;</span>, (<span style="color:#a6e22e">event</span>) =&gt; {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Using the JQuery library 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">JQuery</span>(<span style="color:#66d9ef">function</span>(){...});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Using the JQuery library with lambda syntax 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">JQuery</span>(() =&gt; {...});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Using the JQuery library with $ alias
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">function</span>(){...});</span></span></code></pre></div><p>You are free to use whichever approach you like, but need to be able to interpret other programmers&rsquo; code when they use a different approach.</p>
</div>
</div>
<h2 id="loading-resources-_after_-the-dom-is-loaded">Loading Resources <em>after</em> the DOM is loaded</h2>
<p>There are really <em>two</em> ways to load resources into an HTML page from your JavaScript code.  One is indirect, and the other direct.  The indirect method simply involves creating DOM elements linked to an outside resource, i.e.:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">image</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#39;img&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;smile.png&#39;</span>;
</span></span><span style="display:flex;"><span>document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">img</span>);</span></span></code></pre></div><p>In this case, when the new <code>&lt;img&gt;</code> element has its <code>src</code> attribute set, the image is requested by the browser.  Attaching it to the DOM will result in the image being displayed once it loads.</p>
<p>If we want to know when the image is loaded, we can use the <code>load</code> event:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">image</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#e6db74">&#39;img&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;load&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;loaded image&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;smile.png&#39;</span>;</span></span></code></pre></div><p>Notice too that we add the event listener <em>before</em> we set the <code>src</code> attribute.  If we did it the other way around, the resource may already be loaded before the listener takes effect - and it would never be invoked!</p>
<p>However, this approach can be cumbersome, and limits us to what resources can be bound to HTML elements.  For more flexibility, we need to make the request directly, using AJAX. We&rsquo;ll take a look at doing so after we cover HTTP in more depth.</p>

            <footer class="footline">

            </footer>
          </article>

    
    
          <article class="default">
            <header class="headline">
            </header>
<h1 id="summary">Summary</h1>

<p>In this chapter, we reviewed the Document Object Model (the DOM), the tree-like structure of HTML elements built by the browser as it parses an HTML document.  We discussed how CSS rules are applied to nodes in this tree to determine how the final webpage will be rendered, and how JavaScript can be used to manipulate and transform the DOM (and the resulting webpage appearance).</p>
<p>We also discussed how JavaScript events work, and how this event-driven approach is the basis for implementing concurrency within the language.  We&rsquo;ll see this more as we delve into Node.js, which utilizes the same event-based concurrency model, in future chapters.</p>
<p>Finally, we discussed how supplemental files (images, videos, CSS files, JavaScript files) are loaded by the browser concurrently.  We saw how this can affect the functioning of JavaScript that depends on certain parts of the page already having been loaded, and saw how we can use the <code>load</code> event to delay running scripts until these extra files have completed loading.</p>

            <footer class="footline">

            </footer>
          </article>

          </section>

        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Russell Feldhausen
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/cis526-textbook/-/commit/41163dc548a00400a9f1d4962b4227b9a8ee4d20">Aug 10, 2023</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1705960762" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1705960762" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1705960762" defer></script>
  </body>
</html>
