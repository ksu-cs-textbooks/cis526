




	
	
		

	
	
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0">
    <meta name="generator" content="Relearn 5.2.0+tip">
    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>JavaScript Events :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/05-js-events/" rel="canonical" type="text/html" title="CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/05-js-events/index.xml" rel="alternate" type="application/rss+xml" title="CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/05-js-events/index.print.html" rel="alternate" type="text/html" title="CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/05-js-events/tele.html" rel="alternate" type="text/html" title="CIS 526 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1677688545" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1677688545" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/featherlight.min.css?1677688545" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/featherlight.min.css?1677688545" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1677688545" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1677688545" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1677688545" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1677688545" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1677688545" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1677688545" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1677688545" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-light-theme.css?1677688545" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1677688545" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1677688545" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1677688545" rel="stylesheet" media="print">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1677688545"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="https://ksu-cs-textbooks.github.io/cis526/index.json";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      window.variants && variants.init( [ 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1677688545" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/jquery.min.js?1677688545" defer></script>

  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/01-the-dom/05-js-events/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="default">
    
    
    
<p>It should be no surprise that JavaScript features events - after all, we&rsquo;ve already seen how the 

<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" target="_blank" rel="noopener">EventTarget</a> interface allows us to attach event listeners to elements in the DOM tree.  What might not be clear yet is how events are handled by JavaScript.  JavaScript uses an <em>event loop</em> to process events.  This is similar to Windows and other operating systems also handle events.</p>
<p>An event loop expressed in code looks something like:</p>
<pre tabindex="0"><code>function main
    initialize()
    while message != quit
        message := get_next_message()
        process_message(message)
    end while
end function
</code></pre><p>It&rsquo;s basically an infinite loop that responds to messages, one message at a time.  It might be more useful to see a visual representation:</p>
<p><img src="https://ksu-cs-textbooks.github.io/cis526/images/1.6.1.png" alt="The JS Event Loop"></p>
<p>Here we see not just the event loop, but also the <em>event queue</em>.  This is a queue that holds events until the event loop is ready to process them.  It works like the first-in-first-out queues you built in your data structures course (although it may also consider priorities of events).</p>
<p>On the far right are some common sources for JavaScript events - user input, the network, and timers.  These are often managed by the operating system, and with modern multiple-processor computers can happen <em>concurrently</em>, i.e. <em>at the same time</em>.  This is one reason the queue is so important - it allows JavaScript to process the events <em>one at a time</em>.</p>
<p>When the JavaScript VM has finished executing its current work, it pulls the next event from the event queue.  This event is processed by the corresponding <em>event listener</em> function that either 1) you wrote, or 2) is the default action.  If neither exists, the event is discarded.</p>
<h3 id="an-example">An Example</h3>
<p>Consider when the user clicks on a link on your page, let&rsquo;s say <code>&lt;a id=&quot;demo&quot; href=&quot;https://google.com&quot;&gt;Google it!&lt;/a&gt;</code>.  This creates a &lsquo;click&rsquo; event for the <code>&lt;a&gt;</code> tag clicked on.  Now let&rsquo;s assume you&rsquo;ve written an event handler and attached it to that anchor tag:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;demo&#39;</span>).<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;You clicked the &#34;Google it!&#34; link.&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>The anonymous function <code>function(e) {...}</code> attached to the <code>&lt;a&gt;</code>&rsquo;s &lsquo;click&rsquo; event is invoked, with the event details being passed as the parameter <code>e</code>.  Anchor tags have a default behavior - they open the linked page.  So the line <code>e.preventDefault();</code> informs JavaScript <em>not</em> to use this default behavior.  Then we trigger an alert with the string <code>'You clicked the &quot;Google it!&quot; link.'</code>.</p>
<p>If we hadn&rsquo;t attached the event listener, then the page would have used the default response - loading a new page into the browser in the place of our current page.</p>
<p>If we clicked on an element that didn&rsquo;t have a default action (like a <code>&lt;p&gt;</code> element) and you haven&rsquo;t attached a listener the event is discarded and does nothing.</p>
<h3 id="concurrency-in-javascript">Concurrency in JavaScript</h3>
<p>An important takeaway from the discussion of the event loop is that the actual processing of JavaScript code is always <em>single-threaded</em>.  This avoids many of the common challenges of multi-threaded code.  You don&rsquo;t need to create semaphores, locks, and other multi-threading synchronization tools as your code will always be executing in a single thread.</p>
<p>However, JavaScript <em>does</em> retain many of the benefits of concurrency within its model.  For example, when the DOM is loading and encounters an element referencing an external resource (i.e. a <code>video</code>, <code>img</code>, <code>link</code>, or <code>script</code> element), it triggers a request to retrieve that resource through the browser.  The browser does so <em>while the JavaScript code continues executing</em>.  When the resource is fully downloaded by the browser, it creates a <code>'load'</code> event with the details, and adds it to the JavaScript event queue.  Multiple files are therefore downloaded <em>concurrently</em>, but our JavaScript handles the results one-by-one in a single-threaded manner.</p>
<p>Think of the JavaScript event loop as a busy manager that only works on one thing at a time.  The manager might send several workers out to get information.  When they return, they form a line in front of the manager&rsquo;s desk and wait patiently.  Once the manager is finished with the task they have been working on, they take the report from the first worker in line, and starts doing what is needed to be done with the returned information.  Once the manager finishes that, the next employee will report, and so on.</p>
<h2 id="common-events">Common Events</h2>
<p>There are many kinds of events in JavaScript; you can find a complete list in the 

<a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank" rel="noopener">MDN docs</a>.  However some of the ones you will likely find yourself using are:</p>
<ul>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/load" target="_blank" rel="noopener">load</a> - Triggered when a resource (i.e. an image, video, stylesheet, script) has finished loading.  You can also listen for the load event on the <code>document</code> itself; here it will be triggered after <em>all</em> the resources on the page are loaded.</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event" target="_blank" rel="noopener">change</a> The value of an <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, or <code>&lt;select&gt;</code> has changed</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/focus" target="_blank" rel="noopener">focus</a> triggered when an input gains focus (is the currently selected input)</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/blur" target="_blank" rel="noopener">blur</a> triggered when an input loses focus</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/click" target="_blank" rel="noopener">click</a> The primary mouse button was clicked.  On old browsers this might trigger for any button</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/contextmenu" target="_blank" rel="noopener">contextmenu</a> The right mouse button was clicked</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/mousedown" target="_blank" rel="noopener">mousedown</a> A mouse button was pressed</p>
</li>
<li>
<p>

<a href="https://developer.mozilla.org/en-US/docs/Web/Events/mouseup" target="_blank" rel="noopener">mouseup</a> A mouse button was released</p>
</li>
</ul>
<h2 id="timers">Timers</h2>
<p>Timers play a special role in JavaScript&rsquo;s concurrency model, and in many ways behave like events.  For example, to cause the phrase &ldquo;Hello time!&rdquo; to be logged to the console in three minutes, you would write the code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() { <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Hello time!&#34;</span>)}, <span style="color:#ae81ff">3000</span>);
</span></span></code></pre></div><p>You will notice that the 

<a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" target="_blank" rel="noopener">setTimeout()</a> method takes a function to execute at that future point in time, much like attaching an event handler.  The second argument is the number of milliseconds in the future for this event to occur.  The timer works like an event, when the time expires, a corresponding event is added to the event queue, to trigger the delayed function.</p>
<p>An important side-effect of this approach is that you only know the timer&rsquo;s result won&rsquo;t happen <em>before</em> the delay you specify, but if the JavaScript virtual machine is engaged in a long-running process, it may be longer before your timer event is triggered.</p>
<p>For events you need to do on a regular interval, use 

<a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" target="_blank" rel="noopener">setInterval()</a> instead.  This will invoke the supplied function at each elapsing of the supplied interval.  It also returns a unique id that can be supplied to 

<a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval" target="_blank" rel="noopener">clearInterval()</a> to stop the timed event.</p>

  
  
<div class="box notices cstyle info">
    <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
    <div class="box-content">
<p>You may find yourself reading code that uses a value of <code>0</code> milliseconds with <code>setTimeout()</code>, i.e.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">setTimeout</span>(<span style="color:#a6e22e">doSomething</span>, <span style="color:#ae81ff">0</span>);
</span></span></code></pre></div><p>You might be wondering why.  You might wonder if it is equivalent to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">doSomething</span>();
</span></span></code></pre></div><p>And while it might appear that way, the answer is <em>no</em>.  Remember, <code>setTimeout()</code> creates an event in the event queue that executes after the specified delay.  Thus, <code>doSomething()</code> will execute <em>immediately</em>, but <code>setTimeout(doSomething())</code> will continue to execute all code <em>after</em> the line until execution finishes, and <em>then</em> will invoke <code>doSomething()</code>.</p>
<p>Thus, JavaScript programmers often use this technique to trigger an action immediately after the current code finishes executing.</p>
    </div>
</div>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1677688545" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1677688545" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/featherlight.min.js?1677688545" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1677688545" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/embed-iframe.js?1677688545 defer"></script>
    
  </body>
</html>
