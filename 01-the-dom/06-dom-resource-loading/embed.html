<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="One of the important aspects of working with HTML is understanding that an HTML page is more than just the HTML. It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document. These include elements like <link>, <script>, <video>, <img>, and <source> with src or href attributes set.
As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well."><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="The DOM and External Resource Loading :: CIS 526 Textbook"><meta name=twitter:description content="One of the important aspects of working with HTML is understanding that an HTML page is more than just the HTML. It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document. These include elements like <link>, <script>, <video>, <img>, and <source> with src or href attributes set.
As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well."><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/01-the-dom/06-dom-resource-loading/embed.html"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="The DOM and External Resource Loading :: CIS 526 Textbook"><meta property="og:description" content="One of the important aspects of working with HTML is understanding that an HTML page is more than just the HTML. It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document. These include elements like <link>, <script>, <video>, <img>, and <source> with src or href attributes set.
As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="The Document Object Model"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2022-05-24T14:24:59-05:00"><meta itemprop=name content="The DOM and External Resource Loading :: CIS 526 Textbook"><meta itemprop=description content="One of the important aspects of working with HTML is understanding that an HTML page is more than just the HTML. It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document. These include elements like <link>, <script>, <video>, <img>, and <source> with src or href attributes set.
As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well."><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2022-05-24T14:24:59-05:00"><meta itemprop=wordCount content="703"><title>The DOM and External Resource Loading :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/01-the-dom/06-dom-resource-loading/ rel=canonical type=text/html title="The DOM and External Resource Loading :: CIS 526 Textbook"><link href=/cis526/01-the-dom/06-dom-resource-loading/index.xml rel=alternate type=application/rss+xml title="The DOM and External Resource Loading :: CIS 526 Textbook"><link href=/cis526/01-the-dom/06-dom-resource-loading/index.print.html rel=alternate type=text/html title="The DOM and External Resource Loading :: CIS 526 Textbook"><link href=/cis526/01-the-dom/06-dom-resource-loading/tele.html rel=alternate type=text/html title="The DOM and External Resource Loading :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1743895915 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1743895915 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1743895915 rel=stylesheet><link href=/cis526/css/auto-complete.css?1743895915 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1743895915 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1743895915 rel=stylesheet><link href=/cis526/css/fonts.css?1743895915 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1743895915 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1743895915 rel=stylesheet><link href=/cis526/css/theme-light-theme.css?1743895915 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-relearn-light.css?1743895915 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1743895915 rel=stylesheet><link href=/cis526/css/print.css?1743895915 rel=stylesheet media=print><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["light-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1743895915 rel=stylesheet></head><body class="mobile-support embed disableInlineCopyToClipboard" data-url=/cis526/01-the-dom/06-dom-resource-loading/embed.html><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><p>One of the important aspects of working with HTML is understanding that an HTML page is <em>more</em> than just the HTML. It also involves a collection of resources that are external to the HTML document, but displayed or utilized by the document. These include elements like <code>&lt;link></code>, <code>&lt;script></code>, <code>&lt;video></code>, <code>&lt;img></code>, and <code>&lt;source></code> with <code>src</code> or <code>href</code> attributes set.</p><p>As the DOM tree is parsed and loaded and these external resources are encountered, the browser requests those resources as well. Modern browsers typically make these requests in parallel for faster loading times.</p><p>Once the HTML document has been completely parsed, the <code>window</code> triggers the <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event rel=external target=_blank>DOMContentLoaded</a> event. This means the HTML document has been completely parsed and added to the DOM tree. However, the external resources <em>may not have all been loaded at this point</em>.</p><p>Once those resources are loaded, a separate <a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event rel=external target=_blank>Load</a> event is triggered, also on the <code>window</code>.</p><p>Thus, if you have JavaScript that should only be invoked <em>after</em> the page has fully loaded, you can place it inside an event listener tied to the <code>load</code> event, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Add your code here ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span></span></span></code></pre></div><p>Or, if you want it invoked after the DOM is fully parsed, but external resources may still be loading:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;DOMContentLoaded&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// TODO: Add your code here ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span></span></span></code></pre></div><p>The former - waiting for all resources to load - tends to be the most common. The reason is simple, if you are loading multiple JavaScript files, i.e. a couple of libraries and your own custom code, using the <code>'load'</code> event ensures they have all loaded before you start executing your logic.</p><p>Consider the popular <a href=https://jquery.com/ rel=external target=_blank>JQuery</a> library, which provides shorthand methods for querying and modifying the DOM. It provides a <code>JQuery()</code> function that is also aliased to the <code>$</code>. The JQuery code to show a popup element might be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#popup&#39;</span><span class=p>).</span><span class=nx>show</span><span class=p>();</span></span></span></code></pre></div><p>But if the JQuery library isn&rsquo;t loaded yet, the <code>$</code> is not defined, and this logic will crash the JavaScript interpreter. Any remaining JavaScript will be ignored, and your page won&rsquo;t work as expected. But re-writing that to trigger after all resources have loaded, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// This code only is executed once all resources have been loaded
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>$</span><span class=p>(</span><span class=s1>&#39;#popup&#39;</span><span class=p>).</span><span class=nx>show</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>Ensures the JQuery library is available before your code is run.</p><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>JavaScript is an extremely flexible language that has evolved over time. One side effect of this evolution is that there are often multiple ways to express the same idea. For example, listening for the <code>window</code>&rsquo;s <code>'load'</code> event can be written many different ways:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Using the onload property
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>onload</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using onload property and lambda syntax 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>onload</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{...}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the addEventListener and lambda syntax
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the JQuery library 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>JQuery</span><span class=p>(</span><span class=kd>function</span><span class=p>(){...});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the JQuery library with lambda syntax 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>JQuery</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{...});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Using the JQuery library with $ alias
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>$</span><span class=p>(</span><span class=kd>function</span><span class=p>(){...});</span></span></span></code></pre></div><p>You are free to use whichever approach you like, but need to be able to interpret other programmers&rsquo; code when they use a different approach.</p></div></div><h2 id=loading-resources-_after_-the-dom-is-loaded>Loading Resources <em>after</em> the DOM is loaded</h2><p>There are really <em>two</em> ways to load resources into an HTML page from your JavaScript code. One is indirect, and the other direct. The indirect method simply involves creating DOM elements linked to an outside resource, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>image</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;img&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>image</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=s1>&#39;smile.png&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>img</span><span class=p>);</span></span></span></code></pre></div><p>In this case, when the new <code>&lt;img></code> element has its <code>src</code> attribute set, the image is requested by the browser. Attaching it to the DOM will result in the image being displayed once it loads.</p><p>If we want to know when the image is loaded, we can use the <code>load</code> event:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>image</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;img&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>image</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;loaded image&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>image</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=s1>&#39;smile.png&#39;</span><span class=p>;</span></span></span></code></pre></div><p>Notice too that we add the event listener <em>before</em> we set the <code>src</code> attribute. If we did it the other way around, the resource may already be loaded before the listener takes effect - and it would never be invoked!</p><p>However, this approach can be cumbersome, and limits us to what resources can be bound to HTML elements. For more flexibility, we need to make the request directly, using AJAX. We&rsquo;ll take a look at doing so after we cover HTTP in more depth.</p><footer class=footline></footer></article></div></main></div><script src=/cis526/js/clipboard.min.js?1743895915 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1743895915 defer></script><script src=/cis526/js/theme.js?1743895915 defer></script><script src=/cis526/js/embed-iframe.js?1743895915 defer></script></body></html>