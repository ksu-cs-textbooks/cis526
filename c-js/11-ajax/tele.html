<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.128.0"><meta name=generator content="Relearn 6.0.0"><meta name=description content="Asynchronous JavaScript and XML (AJAX) is a term coined by Jesse James Garrett to describe a technique of using the XMLHttpRequest object to request resources directly from JavaScript. As the name implies, this was originally used to request XML content, but the technique can be used with any kind of data.
The XMLHttpRequest The XMLHttpRequest object is modeled after how the window object makes web requests. You can think of it as a state machine that can be in one of several possible states, defined by both a constant and an unsigned short value:"><meta name=author content="Nathan Bean"><meta name=twitter:card content="summary"><meta name=twitter:title content="AJAX :: CIS 526 Textbook"><meta name=twitter:description content="Asynchronous JavaScript and XML (AJAX) is a term coined by Jesse James Garrett to describe a technique of using the XMLHttpRequest object to request resources directly from JavaScript. As the name implies, this was originally used to request XML content, but the technique can be used with any kind of data.
The XMLHttpRequest The XMLHttpRequest object is modeled after how the window object makes web requests. You can think of it as a state machine that can be in one of several possible states, defined by both a constant and an unsigned short value:"><meta property="og:url" content="https://textbooks.cs.ksu.edu/cis526/c-js/11-ajax/"><meta property="og:site_name" content="CIS 526 Textbook"><meta property="og:title" content="AJAX :: CIS 526 Textbook"><meta property="og:description" content="Asynchronous JavaScript and XML (AJAX) is a term coined by Jesse James Garrett to describe a technique of using the XMLHttpRequest object to request resources directly from JavaScript. As the name implies, this was originally used to request XML content, but the technique can be used with any kind of data.
The XMLHttpRequest The XMLHttpRequest object is modeled after how the window object makes web requests. You can think of it as a state machine that can be in one of several possible states, defined by both a constant and an unsigned short value:"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="JavaScript"><meta property="article:published_time" content="2018-08-24T10:53:26-05:00"><meta property="article:modified_time" content="2024-06-27T14:51:29-05:00"><meta itemprop=name content="AJAX :: CIS 526 Textbook"><meta itemprop=description content="Asynchronous JavaScript and XML (AJAX) is a term coined by Jesse James Garrett to describe a technique of using the XMLHttpRequest object to request resources directly from JavaScript. As the name implies, this was originally used to request XML content, but the technique can be used with any kind of data.
The XMLHttpRequest The XMLHttpRequest object is modeled after how the window object makes web requests. You can think of it as a state machine that can be in one of several possible states, defined by both a constant and an unsigned short value:"><meta itemprop=datePublished content="2018-08-24T10:53:26-05:00"><meta itemprop=dateModified content="2024-06-27T14:51:29-05:00"><meta itemprop=wordCount content="1063"><title>AJAX :: CIS 526 Textbook</title>
<link href=https://textbooks.cs.ksu.edu/cis526/c-js/11-ajax/ rel=canonical type=text/html title="AJAX :: CIS 526 Textbook"><link href=/cis526/c-js/11-ajax/index.xml rel=alternate type=application/rss+xml title="AJAX :: CIS 526 Textbook"><link href=/cis526/c-js/11-ajax/index.print.html rel=alternate type=text/html title="AJAX :: CIS 526 Textbook"><link href=/cis526/c-js/11-ajax/embed.html rel=alternate type=text/html title="AJAX :: CIS 526 Textbook"><link href=/cis526/css/fontawesome-all.min.css?1737074486 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fontawesome-all.min.css?1737074486 rel=stylesheet></noscript><link href=/cis526/css/nucleus.css?1737074486 rel=stylesheet><link href=/cis526/css/auto-complete.css?1737074486 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/auto-complete.css?1737074486 rel=stylesheet></noscript><link href=/cis526/css/perfect-scrollbar.min.css?1737074486 rel=stylesheet><link href=/cis526/css/fonts.css?1737074486 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/cis526/css/fonts.css?1737074486 rel=stylesheet></noscript><link href=/cis526/css/theme.css?1737074486 rel=stylesheet><link href=/cis526/css/theme-auto.css?1737074486 rel=stylesheet id=R-variant-style><link href=/cis526/css/chroma-auto.css?1737074486 rel=stylesheet id=R-variant-chroma-style><link href=/cis526/css/variant.css?1737074486 rel=stylesheet><link href=/cis526/css/print.css?1737074486 rel=stylesheet media=print><script src=/cis526/js/variant.js?1737074486></script><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../../..",window.relearn.absBaseUri="https://textbooks.cs.ksu.edu/cis526",window.index_js_url="/cis526/index.search.js",window.variants&&variants.init(["auto","light-theme","dark-theme"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><link href=/cis526/css/custom.css?1737074486 rel=stylesheet></head><body class="mobile-support tele disableInlineCopyToClipboard" data-url=/cis526/c-js/11-ajax/><div id=tele class="tele mirror"><div id=R-body class=default-animation><div id=R-body-overlay></div><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=ajax>AJAX</h1><p>Asynchronous JavaScript and XML (AJAX) is a term coined by Jesse James Garrett to describe a technique of using the <a href=https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest rel=external target=_blank>XMLHttpRequest</a> object to request resources directly from JavaScript. As the name implies, this was originally used to request XML content, but the technique can be used with any kind of data.</p><h3 id=the-xmlhttprequest>The XMLHttpRequest</h3><p>The <code>XMLHttpRequest</code> object is modeled after how the <code>window</code> object makes web requests. You can think of it as a state machine that can be in one of several possible states, defined by both a constant and an unsigned short value:</p><ul><li><strong>UNSENT</strong> or <strong>0</strong> The client has been created, but no request has been made. Analogous to a just-opened browser before you type an address in the address bar.</li><li><strong>OPENED</strong> or <strong>1</strong> The request has been made, but the response has not been received. The browser analogue would be you have just pressed enter after typing the address.</li><li><strong>HEADERS_RECEIVED</strong> or <strong>2</strong> The first part of the response has been processed. We&rsquo;ll talk about headers in the next chapter.</li><li><strong>LOADING</strong> or <strong>3</strong> The content of the response is being downloaded. In the browser, this would be the stage where the HTML is being received and parsed into the DOM.</li><li><strong>DONE</strong> or <strong>4</strong> The resource is fully loaded. In the DOM, this would be equivalent to the <code>'load'</code> event.</li></ul><p><a href=#R-image-b571e38eafc99c287002a501354aa5b6 class=lightbox-link><img alt="The XMLHttpRequest ready states" class="border lazy lightbox noshadow figure-image" loading=lazy src=/cis526/images/3.8.1.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-b571e38eafc99c287002a501354aa5b6><img alt="The XMLHttpRequest ready states" class="border lazy lightbox noshadow lightbox-image" loading=lazy src=/cis526/images/3.8.1.png></a></p><h4 id=xmlhttprequest-properties>XMLHttpRequest Properties</h4><p>The XMLHttpRequest object also has a number of properties that are helpful:</p><ul><li><code>readyState</code> - the current state of the property</li><li><code>response</code> - the body of the response, an <code>ArrayBuffer</code>, <code>Blob</code>, <code>Document</code>, or <code>DOMString</code> based on the value of the <code>responseType</code></li><li><code>responseType</code> - the mime type of response</li><li><code>status</code> - returns an unsigned short with the HTTP response status (or 0 if the response has not been received)</li><li><code>statusText</code> - returns a string containing the response string fro the server, i.e. <code>"200 OK"</code></li><li><code>timeout</code> - the number of milliseconds the request can take before being terminated</li></ul><h4 id=xmlhttprequest-events>XMLHttpRequest Events</h4><p>The XMLHttpRequest object implements the <code>EventTarget</code> interface, just like the <code>Element</code> and <code>Node</code> of the DOM, so we can attach event listeners with <code>addEventListener()</code>. The specific events we can listen for are:</p><ul><li><code>abort</code> - fired when the request has been aborted (you can abort a request with the <a href=https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/abort rel=external target=_blank>XMLHttpRequest.abort()</a> method)</li><li><code>error</code> - fired when the request encountered an error</li><li><code>load</code> - fired when the request completes successfully</li><li><code>loadend</code> - fired when the request has completed, either because of success or after an abort or error.</li><li><code>loadstart</code> - fired when the request has started to load data</li><li><code>progress</code> - fired periodically as the request receives data</li><li><code>timeout</code> - fired when the progress is expired due to taking too long</li></ul><p>Several of these events have properties you can assign a function to directly to capture the event:</p><ul><li><code>onerror</code> - corresponds to the <code>error</code> event</li><li><code>onload</code> - corresponds to the <code>load</code> event</li><li><code>onloadend</code> - corresponds to the <code>loadend</code> event</li><li><code>onloadstart</code> - corresponds to the <code>loadstart</code> event</li><li><code>onprogress</code> - corresponds to the <code>progress</code> event</li><li><code>ontimeout</code> - corresponds to the <code>timeout</code> event</li></ul><p>In addition, there is an <code>onreadystatechange</code> property which acts like one of these properties and is fired every time the state of the request changes. In older code, you may see it used instead of the <code>load</code> event, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>onreadystatechange</span><span class=p>(</span><span class=kd>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nx>xhr</span><span class=p>.</span><span class=nx>readyState</span> <span class=o>===</span> <span class=mi>4</span> <span class=o>&amp;&amp;</span> <span class=nx>xhr</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Request has finished successfully, do logic
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><h3 id=using-ajax>Using AJAX</h3><p>Of course the point of learning about the XMLHttpRequest object is to perform AJAX requests. So let&rsquo;s turn our attention to that task.</p><h4 id=creating-the-xmlhttprequest>Creating the XMLHttpRequest</h4><p>The first step in using AJAX is creating the XMLHttpRequest object. To do so, we simply call its constructor, and assign it to a variable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span></span></span></code></pre></div><p>We can create as many of these requests as we want, so if we have multiple requests to make, we&rsquo;ll usually create a new XMLHttpRequest object for each.</p><h4 id=attaching-the-event-listeners>Attaching the Event Listeners</h4><p>Usually, we&rsquo;ll want to attach our event listener(s) before doing anything else with the <code>XMLHttpRequest</code> object. The reason is simple - because the request happens asynchronously, it is entirely possible the request will be finished <em>before</em> we add the event listener to listen for the <code>load</code> event. In that case, our listener will <em>never</em> trigger.</p><p>At a minimum, you probably want to listen to <code>load</code> events, i.e.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// do something with xhr object
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span></span></span></code></pre></div><p>But it is also a good idea to listen for the <code>error</code> event as well:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// report the error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span></span></span></code></pre></div><h4 id=opening-the-xmlhttprequest>Opening the XMLHttpRequest</h4><p>Much like when we manually made requests, we first need to open the connection to the server. We do this with the <a href=https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/open rel=external target=_blank>XMLHttpRequest.open()</a> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;https://imgs.xkcd.com/comics/blogofractal.png&#39;</span><span class=p>);</span></span></span></code></pre></div><p>The first argument is the <a href=https://textbooks.cs.ksu.edu/cis526/02-http/04-request-methods/ rel=external target=_blank>HTTP request method</a> to use, and the second is the <a href=https://textbooks.cs.ksu.edu/cis526/02-http/05-uris-and-urls/ rel=external target=_blank>URL</a> to open.</p><p>There are also three optional parameters that can be used to follow - a boolean determining if the request should be made asynchronously (default <code>true</code>) and a user and password for HTTP authentication. Since AJAX requests are normally made asynchronously, and HTTP authentication has largely been displaced by more secure authentication approaches, these are rarely used.</p><h4 id=setting-headers>Setting Headers</h4><p>After the <code>XMLHttpRequest</code> has been opened, but before it is sent, you can use <a href=https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader rel=external target=_blank>XMLHttpRequest.setRequestHeader()</a> to set any <a href=https://textbooks.cs.ksu.edu/cis526/02-http/06-request-headers/ rel=external target=_blank>request headers</a> you need. For example, we might set an <code>Accept</code> header to <code>image/png</code> to indicate we would like image data as our response:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>setRequestHeader</span><span class=p>(</span><span class=s1>&#39;Accept&#39;</span><span class=p>,</span> <span class=s1>&#39;image/png&#39;</span><span class=p>);</span></span></span></code></pre></div><h4 id=sending-the-xmlhttprequest>Sending the XMLHttpRequest</h4><p>Finally, the <a href=https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send rel=external target=_blank>XMLHttpRequest.send()</a> method will send the request asynchronously (unless the <code>async</code> parameter in <code>XMLHttpRequest.open()</code> was set to <code>false</code>). As the response is received (or fails) the appropriate event handlers will be triggered. To finish our example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>send</span><span class=p>();</span></span></span></code></pre></div><div class="box notices cstyle info"><div class=box-label><i class="fa-fw fas fa-info-circle"></i> Info</div><div class=box-content><p>A second major benefit of the JQuery library (after simplifying DOM querying and manipulation) was its effort to simplify AJAX. It provides a robust wrapper around the <code>XMLHttpRequest</code> object with the <a href=https://api.jquery.com/jquery.ajax/ rel=external target=_blank>jQuery.ajax()</a> method. Consider the AJAX request we defined in this chapter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// do something with xhr object
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// report the error
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;https://imgs.xkcd.com/comics/blogofractal.png&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>setRequestHeader</span><span class=p>(</span><span class=s1>&#39;Accept&#39;</span><span class=p>,</span> <span class=s1>&#39;image/png&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>xhr</span><span class=p>.</span><span class=nx>send</span><span class=p>();</span></span></span></code></pre></div><p>The equivalent jQuery code would be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>jQuery</span><span class=p>.</span><span class=nx>ajax</span><span class=p>(</span><span class=s2>&#34;https://imgs.xkcd.com/comics/blogofractal.png&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;GET&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Accept</span><span class=o>:</span> <span class=s1>&#39;image/png&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>success</span><span class=o>:</span> <span class=p>(</span><span class=nx>data</span><span class=p>,</span> <span class=nx>status</span><span class=p>,</span> <span class=nx>xhr</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// do something with data
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>error</span><span class=o>:</span> <span class=p>(</span><span class=nx>xhr</span><span class=p>,</span> <span class=nx>status</span><span class=p>,</span> <span class=nx>error</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=c1>// report the error 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>Many developers found this all-in-one approach simpler than working directly with <code>XMLHttpRequest</code> objects. The W3C adopted some of these ideas into the Fetch API.</p></div></div><footer class=footline></footer></article></div></main></div></div><script src=/cis526/js/clipboard.min.js?1737074486 defer></script><script src=/cis526/js/perfect-scrollbar.min.js?1737074486 defer></script><script src=/cis526/js/theme.js?1737074486 defer></script><script src=/cis526/js/tele-scroll.js?1737074486 defer></script></body></html>