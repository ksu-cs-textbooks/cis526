




	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Template Rendering :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/10-template-rendering/index.html" rel="canonical" type="text/html" title="Template Rendering :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/10-template-rendering/index.xml" rel="alternate" type="application/rss+xml" title="Template Rendering :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/10-template-rendering/index.print.html" rel="alternate" type="text/html" title="Template Rendering :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/10-template-rendering/tele.html" rel="alternate" type="text/html" title="Template Rendering :: CIS 526 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705960757" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705960757" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1705960757" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705960757" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705960757" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1705960757" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705960757" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705960757" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1705960757" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-auto.css?1705960757" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1705960757" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1705960757" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1705960757" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/url.js?1705960757"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1705960757"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis526/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1705960757" rel="stylesheet">

  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/10-template-rendering/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>While skilled programmers may have chafed at the restrictions imposed by server pages, there was one aspect that came to be greatly valued - the ability to embed script directly in HTML, and have it evaluated and concatenated into the HTML text.</p>
<h2 id="template-libraries">Template Libraries</h2>
<p>This is where template libraries come in.  A template library allows you to write your HTML content <em>as HTML in a separate file</em> with a special syntax to inject dynamic programming script.  This is often some variation of <code>&lt;&gt;</code> or <code>{}</code>.  This approach allows you to validate the HTML, as the script portions are ignored as unknown tags (when using <code>&lt;&gt;</code>) or as static text.</p>
<p>When the server is running, these templates are rendered, evaluating any code and supplying the applicable variables. This process generates the HTML snippet.</p>
<p>This is similar to what server pages do. However, server pages represent an <em>integrated</em> approach - the server page framework defined all aspects of how you could interact with the OS, the web server, and other programs.  In contrast, a template library provides the option of using templates within any project - obviously for generating HTML as part of a dynamic website, but potentially for other kinds of applications as well.</p>
<p>Thus, a template rendering library gives us a lot of flexibility in how and when we use it. For example, in using the <a href="https://ejs.co/" target="_blank">Embedded JavaScript</a>
 template library, we could rewrite our directory listing as:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;Directory Listing&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h2</span>&gt;Directory Listing for <span style="color:#960050;background-color:#1e0010">&lt;</span>%= pathname %&gt;&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; flex-direction: column; padding: 2rem 0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% entries.forEach((entry) =&gt;{ %&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= path.posix.join(pathname, entry) %&gt;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                <span style="color:#960050;background-color:#1e0010">&lt;</span>%= entry %&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% }) %&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% if (pathname !== &#34;/&#34;) { %&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= path.dirname(pathname) %&gt;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                Parent directory
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% } %&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div><p>Notice how we can embed the JavaScript <em>directly into the file</em>.  In a Node server, we can use this template to render html:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Build the dynamic HTML snippets
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pathname</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pathname</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">entries</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entries</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">path</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ejs</span>.<span style="color:#a6e22e">renderFile</span>(<span style="color:#e6db74">&#34;templates/directory-listing.ejs&#34;</span>, <span style="color:#a6e22e">data</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">html</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// TODO: render the HTML in the string variable html
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});</span></span></code></pre></div><p>While this may <em>seem</em> like just as much work as the concatenation approach, where it really shines is the ability to combine multiple templates, separating parts of the pages out into different, reusable template files.  These are typically separated into two categories based on how they are used, <em>partials</em> and <em>layouts</em>.</p>
<h3 id="partials">Partials</h3>
<p>A partial is simply a <em>part</em> of a larger page.  For example, the entries we are rendering in the listing could be defined in their own template file, <em>directory-listing-entry.ejs</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= path %&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;</span>%= entry %&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">a</span>&gt;</span></span></code></pre></div><p>And then <em>included</em> in the <em>directory-listing.ejs</em> template:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;Directory Listing&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h2</span>&gt;Directory Listing for <span style="color:#960050;background-color:#1e0010">&lt;</span>%= pathname %&gt;&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; flex-direction: column; padding: 2rem 0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% entries.forEach((entry) =&gt;{ %&gt;
</span></span><span style="display:flex;"><span>            <span style="color:#960050;background-color:#1e0010">&lt;</span>%- include(&#39;directory-listing-entry&#39; {entry: entry, path: path.posix.join(pathname, entry) }) %&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% }) %&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% if (pathname !== &#34;/&#34;) { %&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= path.dirname(pathname) %&gt;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                Parent directory
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>% } %&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div><p>While this may seem overkill for this simple example, it works incredibly well for complex objects.  It also makes our code far more modular - we can use the same partial in many parts of our web application.</p>
<h3 id="layouts">Layouts</h3>
<p>A second common use of templates is to define a <em>layout</em> - the parts that every page holds in common.  Consider this template file, <em>layout.ejs</em>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">title</span>&gt;<span style="color:#960050;background-color:#1e0010">&lt;</span>%= title %&gt;&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>%- include(&#39;header&#39;) %&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>%- content %&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#960050;background-color:#1e0010">&lt;</span>%- include(&#39;footer&#39;) %&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div><p>Now our directory listing can focus entirely on the directory listing:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">h2</span>&gt;Directory Listing for <span style="color:#960050;background-color:#1e0010">&lt;</span>%= pathname %&gt;&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display: flex; flex-direction: column; padding: 2rem 0&#34;</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;</span>% entries.forEach((entry) =&gt;{ %&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">&lt;</span>%- include(&#39;directory-listing-entry&#39; {entry: entry, path: path.posix.join(pathname, entry) }) %&gt;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;</span>% }) %&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;</span>% if (pathname !== &#34;/&#34;) { %&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= path.dirname(pathname) %&gt;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        Parent directory
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">&lt;</span>% } %&gt;</span></span></code></pre></div><p>And we can render our page using the layout:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Build the dynamic HTML snippets
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pathname</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">pathname</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">entries</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">entries</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">path</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ejs</span>.<span style="color:#a6e22e">renderFile</span>(<span style="color:#e6db74">&#34;templates/directory-listing.ejs&#34;</span>, <span style="color:#a6e22e">data</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">content</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: handle error
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ejs</span>.<span style="color:#a6e22e">renderFile</span>(<span style="color:#e6db74">&#34;templates/layout.ejs&#34;</span>, {<span style="color:#a6e22e">content</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">content</span>}, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">html</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: render the HTML in the string variable html
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    });
</span></span><span style="display:flex;"><span>});</span></span></code></pre></div><p>This layout can be re-used by all pages within our site, allowing us to write the HTML shared in common by the whole website once.</p>
<p>Also, while these examples show reading the template files as the response is being generated, most template engines support <em>compiling</em> the templates into a function that can be called at any time.  This effectively caches the template, and also speeds up the rendering process dramatically.</p>
<h3 id="concise-templating-languages">Concise Templating Languages</h3>
<p>Some template libraries have leveraged the compilation idea to provide a more concise syntax for generating HTML code.  For example, the directory listing written using <a href="https://pugjs.org/api/getting-started.html" target="_blank">Pug</a>
 templates would be:</p>
<div class="wrap-code highlight"><pre tabindex="0"><code class="language-pug" data-lang="pug">doctype html
html(lang=&#34;en&#34;)
    head
        title= Directory Listing
    body
        h2= &#39;Directory Listing for &#39; + pathname 
        div(style=&#34;display: flex; flex-direction: column; padding: 2rem 0&#34;)
        each entry in entries
            a(href=path.posix.join(pathname, entry)) entry 
        if pathname !== &#34;/&#34;
            a(href=path.dirname(pathname))
                Parent directory</code></pre></div><p>Concise templating languages can significantly reduce the amount of typing involved in creating web pages, but they come with a trade-off.  As you can see from the code above, learning Pug effectively requires you to learn a new programming language, including its own iteration and conditional syntax.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>EJS is just one template library available in JavaScript.  Some of the most popular ones include:</p>
<ul>
<li><a href="https://mustache.github.io/" target="_blank">Mustache</a>
</li>
<li><a href="https://handlebarsjs.com/" target="_blank">Handlebars</a>
</li>
<li><a href="https://mozilla.github.io/nunjucks/" target="_blank">Nunjucks</a>
</li>
<li><a href="http://underscorejs.org/" target="_blank">Underscore</a>
</li>
<li><a href="https://pugjs.org/api/getting-started.html" target="_blank">Pug</a>
</li>
</ul>
<p>It is useful to compare how these different libraries approach templates as there are often large differences, not only in syntax but also in function.</p>
</div>
</div>
<h2 id="components">Components</h2>
<p>A newer approach, popularized by the <a href="https://reactjs.org/" target="_blank">React</a>
 framework, emphasizes building <em>components</em> rather than <em>pages</em>.  A component can be thought of as a single control or widget on a page.  While conceptually similar to the partials described above, it organizes its structure, styling, and scripting into a cohesive and reuseable whole.</p>
<p>This represents a move away from the separation of concerns we described earlier.  It often incorporates aspects of <a href="https://en.wikipedia.org/wiki/Declarative_programming" target="_blank">declarative programming</a>
 rather than thinking of programming in terms of control flow.  This component-based approach also lends itself to developing <a href="https://en.wikipedia.org/wiki/Progressive_web_application" target="_blank">progressive web applications</a>
, which only download the script needed to run the portion of the app the user is interacting with at a given time.</p>
<p>As this approach is significantly different from the more traditional templating libraries, we&rsquo;ll discuss these ideas in a later chapter.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1705960758" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1705960758" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1705960758" defer></script>
  </body>
</html>
