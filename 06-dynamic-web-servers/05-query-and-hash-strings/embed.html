




	
	
		

	
	
		

	
	
		

	
	
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		

	
	
		

	
	
		
		
		
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="CIS 526 Textbook">
    <meta name="author" content="Nathan Bean">
    <title>Query and Hash Strings :: CIS 526 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/05-query-and-hash-strings/index.html" rel="canonical" type="text/html" title="Query and Hash Strings :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/05-query-and-hash-strings/index.xml" rel="alternate" type="application/rss+xml" title="Query and Hash Strings :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/05-query-and-hash-strings/index.print.html" rel="alternate" type="text/html" title="Query and Hash Strings :: CIS 526 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/05-query-and-hash-strings/tele.html" rel="alternate" type="text/html" title="Query and Hash Strings :: CIS 526 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705188819" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fontawesome-all.min.css?1705188819" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/nucleus.css?1705188819" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705188819" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/auto-complete.css?1705188819" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/perfect-scrollbar.min.css?1705188819" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705188819" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis526/css/fonts.css?1705188819" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme.css?1705188819" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/theme-auto.css?1705188819" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/variant.css?1705188819" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/print.css?1705188819" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/ie.css?1705188819" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/url.js?1705188819"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/variant.js?1705188819"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis526/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis526/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis526/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis526/css/custom.css?1705188819" rel="stylesheet">

  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis526/06-dynamic-web-servers/05-query-and-hash-strings/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>Query strings (aka search strings) are the part of the URL that appear after the <code>?</code> and before the optional <code>#</code>.  The hash string is the portion of the url after the <code>#</code>.  We&rsquo;ve mentioned them a bit before, but as we dig into dynamic web servers it makes sense to do a deeper dive, as this is where they really come into play.</p>
<h2 id="the-hash-string">The Hash String</h2>
<p>First, let&rsquo;s briefly visit the hash string.  It&rsquo;s traditional use is to indicate a HTML element on the page the browser should scroll to when visiting the URL.  When used this way, its value is the <code>id</code> attribute of the element.  The browser will automatically scroll to a position that displays the element on-screen.  Thus, the traditional use of the hash string is for &ldquo;bookmarked&rdquo; links that take you to an exact section of the page, like this one which takes you to a description of your personal CS web space: <a href="https://support.cs.ksu.edu/CISDocs/wiki/Personal_Web_Pages#Dynamic_Content" target="_blank">https://support.cs.ksu.edu/CISDocs/wiki/Personal_Web_Pages#Dynamic_Content</a>
.</p>
<p>With the advent of single-page apps, it has come to serve additional purposes; but we&rsquo;ll talk about those when we visit that topic in a future chapter.</p>
<h2 id="the-querysearch-string">The Query/Search String</h2>
<p>Now, the query string is a vital tool for dynamic web pages, as it conveys information <em>beyond</em> the specific resource being asked for to the server.  Consider what a dynamic webserver does - it takes an incoming request, and sends a response.  In many ways, this is similar to a function call - you invoke a function, and it returns a value.  With this in mind, the path of the URL is like the function name, and the query string becomes its <em>parameters</em>.</p>
<p>Much like parameters have a name and a value, the query string is composed of key/value pairs.  Between the key and value of each pair is a <code>=</code>, and between the pairs is a <code>&amp;</code>.  Because the <code>=</code> and <code>&amp;</code> character now have a special meaning, any that appear in the key or value are swapped with a special percent value, i.e. <code>&amp;</code> becomes <code>%26</code> and <code>=</code> becomes <code>%3D</code>. Similarly, other characters that have special meanings in URLs are likewise swapped.  This is known as URL or percent encoding, and you can see the swapped values in the table below:</p>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>':'</code></td>
   <td><code>'/'</code></td>
   <td><code>'?'</code></td>
   <td><code>'#'</code></td>
   <td><code>'['</code></td>
   <td><code>']'</code></td>
   <td><code>'@'</code></td>
   <td><code>'!'</code></td>
   <td><code>'$'</code></td>
   <td><code>'&amp;'</code></td>
   <td><code>"'"</code></td>
   <td><code>'('</code></td>
   <td><code>')'</code></td>
   <td><code>'*'</code></td>
   <td><code>'+'</code></td>
   <td><code>','</code></td>
   <td><code>';'</code></td>
   <td><code>'='</code></td>
   <td><code>'%'</code></td>
   <td><code>' '</code></td>
  </tr>
  <tr>
   <td><code>%3A</code></td>
   <td><code>%2F</code></td>
   <td><code>%3F</code></td>
   <td><code>%23</code></td>
   <td><code>%5B</code></td>
   <td><code>%5D</code></td>
   <td><code>%40</code></td>
   <td><code>%21</code></td>
   <td><code>%24</code></td>
   <td><code>%26</code></td>
   <td><code>%27</code></td>
   <td><code>%28</code></td>
   <td><code>%29</code></td>
   <td><code>%2A</code></td>
   <td><code>%2B</code></td>
   <td><code>%2C</code></td>
   <td><code>%3B</code></td>
   <td><code>%3D</code></td>
   <td><code>%25</code></td>
   <td><code>%20</code> or <code>+</code></td>
  </tr>
 </tbody>
</table>
<p>In JavaScript, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" target="_blank">encodeURIComponent()</a>
 function can be used to apply percent encoding to a string, and the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" target="_blank">decodeURIComponent()</a>
 can be used to reverse it.</p>
<p>Node offers the <a href="https://nodejs.org/api/querystring.html" target="_blank">querystring</a>
 library.  It offers a <a href="https://nodejs.org/api/querystring.html#querystring_querystring_parse_str_sep_eq_options" target="_blank">querystring.parse()</a>
 method which can parse a query string into a JavaScript object with the decoded key/value pairs transformed into properties and a <a href="https://nodejs.org/api/querystring.html#querystring_querystring_stringify_obj_sep_eq_options" target="_blank">querystring.stringify()</a>
 method which can convert a JavaScript object into an encoded query string.  In addition, these methods allow you to override what characters are used as delimiters, potentially allowing you to use alternative encoding schemes.</p>
<h2 id="forms-and-the-query-string">Forms and the Query String</h2>
<p>While we can type a URL with a query string manually, by far the most common way to produce a query string is with a <code>&lt;form&gt;</code> element.  When a form is submitted (the user clicks on a <code>&lt;input&gt;</code> with <code>type</code> attribute of <code>&quot;submit&quot;</code>), it is serialized and submitted to the server.  By default, it will be sent to the same URL it was served from, using a GET request, with the fields of the form serialized as the query string.</p>
<p>This is why one name for the query string is the <em>search</em> string, as it is commonly used to submit search requests.  For example, Google&rsquo;s search page contains a form similar to this (very simplified form):</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;q&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Google Search&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div><p>Notice the form has one text input, named <code>&quot;q&quot;</code>.  If we type in search terms, say &ldquo;k-state computer science&rdquo; and click the search button, you&rsquo;ll notice in the resulting url the query string contains <code>q=k-state+computer+science</code> (plus a lot of other key/value pairs).  If you type <code>&quot;https://www.google.com/search?q=k-state+computer+science&quot;</code> into the address bar, you&rsquo;ll get the same page.</p>
<p>Notice though, that google uses <code>www.google.com/search</code> as the URL to display search results at, instead of the original <code>www.google.com</code> page.  We can have a form submit to a different URL than it was served on by setting its <code>action</code> attribute to that URL.</p>
<p>We can also change the HTTP method used to submit the form with the <code>method</code> attribute. By default it uses a GET request, but we can instead set it to a POST request.  When a POST request is used, the form is no longer encoded in the query string - it is instead sent as the body of the POST request.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/clipboard.min.js?1705188820" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/perfect-scrollbar.min.js?1705188820" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis526/js/theme.js?1705188820" defer></script>
  </body>
</html>
